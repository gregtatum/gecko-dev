

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>JavaScript Coding style &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Other coding style" href="coding_style_other.html" />
    <link rel="prev" title="Java Coding style" href="coding_style_java.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Code quality</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../static-analysis.html">Static analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lint/index.html">Linting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Coding style</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="coding_style_cpp.html">C++ Coding style</a></li>
<li class="toctree-l3"><a class="reference internal" href="coding_style_general.html">Mode line</a></li>
<li class="toctree-l3"><a class="reference internal" href="coding_style_java.html">Java Coding style</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">JavaScript Coding style</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#coding-style">Coding style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#methods-and-functions">Methods and functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#javascript-objects">JavaScript objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#literals">Literals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prefixes">Prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-advices">Other advices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="coding_style_other.html">Other coding style</a></li>
<li class="toctree-l3"><a class="reference internal" href="coding_style_python.html">Python Coding style</a></li>
<li class="toctree-l3"><a class="reference internal" href="format_cpp_code_with_clang-format.html">Formatting C++ Code With clang-format</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_cxx_in_firefox_code.html">Using C++ in Mozilla code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Code quality</a> &raquo;</li>
        
          <li><a href="index.html">Coding style</a> &raquo;</li>
        
      <li>JavaScript Coding style</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/code-quality/coding-style/coding_style_js.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="javascript-coding-style">
<h1>JavaScript Coding style<a class="headerlink" href="#javascript-coding-style" title="Permalink to this headline">¶</a></h1>
<div class="section" id="coding-style">
<h2>Coding style<a class="headerlink" href="#coding-style" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://prettier.io/">prettier</a> is the tool used to reformat the JavaScript code.</p>
</div>
<div class="section" id="methods-and-functions">
<h2>Methods and functions<a class="headerlink" href="#methods-and-functions" title="Permalink to this headline">¶</a></h2>
<p>In JavaScript, functions should use camelCase, but should not capitalize
the first letter. Methods should not use the named function expression
syntax, because our tools understand method names:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="nl">doSomething</span><span class="p">:</span> <span class="n">function</span> <span class="p">(</span><span class="n">aFoo</span><span class="p">,</span> <span class="n">aBar</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In-line functions should have spaces around braces, except before commas
or semicolons:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="nf">valueObject</span><span class="p">(</span><span class="n">aValue</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">{</span> <span class="nl">value</span><span class="p">:</span> <span class="n">aValue</span> <span class="p">};</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="javascript-objects">
<h2>JavaScript objects<a class="headerlink" href="#javascript-objects" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">{</span> <span class="nl">prop1</span><span class="p">:</span> <span class="s">&quot;value1&quot;</span> <span class="p">};</span>

<span class="n">var</span> <span class="n">bar</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nl">prop1</span><span class="p">:</span> <span class="s">&quot;value1&quot;</span><span class="p">,</span>
  <span class="nl">prop2</span><span class="p">:</span> <span class="s">&quot;value2&quot;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Constructors for objects should be capitalized and use Pascal Case:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="nf">ObjectConstructor</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s">&quot;bar&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h2>
<p>In JavaScript, overlong expressions not joined by <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and
<code class="docutils literal notranslate"><span class="pre">||</span></code> should break so the operator starts on the second line and
starting in the same column as the beginning of the expression in the
first line. This applies to <code class="docutils literal notranslate"><span class="pre">?:</span></code>, binary arithmetic operators
including <code class="docutils literal notranslate"><span class="pre">+</span></code>, and member-of operators. Rationale: an operator at the
front of the continuation line makes for faster visual scanning, as
there is no need to read to the end of line. Also there exists a
context-sensitive keyword hazard in JavaScript; see {{bug(442099, “bug”,
19)}}, which can be avoided by putting . at the start of a continuation
line, in long member expression.</p>
<p>In JavaScript, <code class="docutils literal notranslate"><span class="pre">==</span></code> is preferred to <code class="docutils literal notranslate"><span class="pre">===</span></code>.</p>
<p>Unary keyword operators, such as <code class="docutils literal notranslate"><span class="pre">typeof</span></code>, should have their operand
parenthesized; e.g. <code class="docutils literal notranslate"><span class="pre">typeof(&quot;foo&quot;)</span> <span class="pre">==</span> <span class="pre">&quot;string&quot;</span></code>.</p>
</div>
<div class="section" id="literals">
<h2>Literals<a class="headerlink" href="#literals" title="Permalink to this headline">¶</a></h2>
<p>Double-quoted strings (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span></code>) are preferred to single-quoted
strings (e.g. <code class="docutils literal notranslate"><span class="pre">'foo'</span></code>), in JavaScript, except to avoid escaping
embedded double quotes, or when assigning inline event handlers.</p>
</div>
<div class="section" id="prefixes">
<h2>Prefixes<a class="headerlink" href="#prefixes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>k=constant (e.g. <code class="docutils literal notranslate"><span class="pre">kNC_child</span></code>). Not all code uses this style; some
uses <code class="docutils literal notranslate"><span class="pre">ALL_CAPS</span></code> for constants.</p></li>
<li><p>g=global (e.g. <code class="docutils literal notranslate"><span class="pre">gPrefService</span></code>)</p></li>
<li><p>a=argument (e.g. <code class="docutils literal notranslate"><span class="pre">aCount</span></code>)</p></li>
<li><p>JavaScript Specific Prefixes</p>
<ul>
<li><p>_=member (variable or function) (e.g. <code class="docutils literal notranslate"><span class="pre">_length</span></code> or
<code class="docutils literal notranslate"><span class="pre">_setType(aType)</span></code>)</p></li>
<li><p>k=enumeration value (e.g. <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">kDisplayModeNormal</span> <span class="pre">=</span> <span class="pre">0</span></code>)</p></li>
<li><p>on=event handler (e.g. <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">onLoad()</span></code>)</p></li>
<li><p>Convenience constants for interface names should be prefixed with
<code class="docutils literal notranslate"><span class="pre">nsI</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">nsISupports</span> <span class="o">=</span> <span class="nx">Components</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">.</span><span class="nx">nsISupports</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">nsIWBN</span> <span class="o">=</span> <span class="nx">Components</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">.</span><span class="nx">nsIWebBrowserNavigation</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="other-advices">
<h2>Other advices<a class="headerlink" href="#other-advices" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Make sure you are aware of the <a class="reference external" href="https://developer.mozilla.org/docs/Mozilla/JavaScript_Tips">JavaScript
Tips</a>.</p></li>
<li><p>Do not compare <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">false</span></code>. Use <code class="docutils literal notranslate"><span class="pre">(x)</span></code> or
<code class="docutils literal notranslate"><span class="pre">(!x)</span></code> instead. <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">true</span></code>, is certainly different from if
<code class="docutils literal notranslate"><span class="pre">(x)</span></code>! Compare objects to <code class="docutils literal notranslate"><span class="pre">null</span></code>, numbers to <code class="docutils literal notranslate"><span class="pre">0</span></code> or strings to
<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>, if there is chance for confusion.</p></li>
<li><p>Make sure that your code doesn’t generate any strict JavaScript
warnings, such as:</p>
<ul>
<li><p>Duplicate variable declaration.</p></li>
<li><p>Mixing <code class="docutils literal notranslate"><span class="pre">return;</span></code> with <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">value;</span></code></p></li>
<li><p>Undeclared variables or members. If you are unsure if an array
value exists, compare the index to the array’s length. If you are
unsure if an object member exists, use <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">aObject</span></code>,
or if you are expecting a particular type you may use
<code class="docutils literal notranslate"><span class="pre">typeof(aObject.name)</span> <span class="pre">==</span> <span class="pre">&quot;function&quot;</span></code> (or whichever type you are
expecting).</p></li>
</ul>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">['value1,</span> <span class="pre">value2']</span></code> to create a JavaScript array in preference
to using
<code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">{{JSxRef(&quot;Array&quot;,</span> <span class="pre">&quot;Array&quot;,</span> <span class="pre">&quot;Syntax&quot;,</span> <span class="pre">1)}}(value1,</span> <span class="pre">value2)</span></code>
which can be confusing, as <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Array(length)</span></code> will actually create
a physically empty array with the given logical length, while
<code class="docutils literal notranslate"><span class="pre">[value]</span></code> will always create a 1-element array. You cannot actually
guarantee to be able to preallocate memory for an array.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">member:</span> <span class="pre">value,</span> <span class="pre">...</span> <span class="pre">}</span></code> to create a JavaScript object; a
useful advantage over <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">{{JSxRef(&quot;Object&quot;,</span> <span class="pre">&quot;Object&quot;,</span> <span class="pre">&quot;&quot;,</span> <span class="pre">1)}}()</span></code>
is the ability to create initial properties and use extended
JavaScript syntax, to define getters and setters.</p></li>
<li><p>If having defined a constructor you need to assign default
properties, it is preferred to assign an object literal to the
prototype property.</p></li>
<li><p>Use regular expressions, but use wisely. For instance, to check that
<code class="docutils literal notranslate"><span class="pre">aString</span></code> is not completely whitespace use
<code class="docutils literal notranslate"><span class="pre">/\S/.{{JSxRef(&quot;RegExp.test&quot;,</span> <span class="pre">&quot;test(aString)&quot;,</span> <span class="pre">&quot;&quot;,</span> <span class="pre">1)}}</span></code>. Only use
{{JSxRef(“String.search”, “aString.search()”)}} if you need to know
the position of the result, or {{JSxRef(“String.match”,
“aString.match()”)}} if you need to collect matching substrings
(delimited by parentheses in the regular expression). Regular
expressions are less useful if the match is unknown in advance, or to
extract substrings in known positions in the string. For instance,
{{JSxRef(“String.slice”, “aString.slice(-1)”)}} returns the last
letter in <code class="docutils literal notranslate"><span class="pre">aString</span></code>, or the empty string if <code class="docutils literal notranslate"><span class="pre">aString</span></code> is empty.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="coding_style_other.html" class="btn btn-neutral float-right" title="Other coding style" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coding_style_java.html" class="btn btn-neutral float-left" title="Java Coding style" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>