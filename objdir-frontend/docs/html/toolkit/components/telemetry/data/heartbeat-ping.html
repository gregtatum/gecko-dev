

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>“heartbeat” ping &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Install Ping" href="install-ping.html" />
    <link rel="prev" title="“health” ping" href="health-ping.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Toolkit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../featuregates/featuregates/index.html">Feature Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../search/index.html">Search Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../normandy/normandy/index.html">Shield Recipe Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../messaging-system/docs/index.html">Messaging System Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pictureinpicture/pictureinpicture/index.html">Picture-in-Picture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../prompts/prompts/index.html">Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/subprocess/toolkit_modules/subprocess/index.html">Subprocess Module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Telemetry</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../start/index.html">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/index.html">Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collection/index.html">Data collection</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Data documentation</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="common-ping.html">Common ping format</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment.html">Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="main-ping.html">“main” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="crash-ping.html">Crash ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="backgroundhangmonitor-ping.html">“backgroundhangmonitor” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="anonymous-ping.html">“anonymous” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="first-shutdown-ping.html">“first-shutdown” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="activation-ping.html">“activation” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="addons-malware-ping.html">Add-ons malware ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="core-ping.html">“core” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="coverage-ping.html">“coverage” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="default-browser-ping.html">“default-browser” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="deletion-ping.html">“deletion” ping (obsolete)</a></li>
<li class="toctree-l4"><a class="reference internal" href="deletion-request-ping.html">“deletion-request” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="downgrade-ping.html">“downgrade” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="event-ping.html">“event” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="health-ping.html">“health” ping</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">“heartbeat” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="install-ping.html">Install Ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="launcher-process-failure-ping.html">Launcher Process Failure ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="modules-ping.html">“modules” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="new-profile-ping.html">“new-profile” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="prio-ping.html">“prio” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="sync-ping.html">“sync” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="third-party-modules-ping.html">“third-party-modules” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="uitour-ping.html">“uitour-tag” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="update-ping.html">“update” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="xfocsp-error-report-ping.html">“xfocsp-error-report” ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="ecosystem-telemetry.html">Ecosystem Telemetry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../internals/index.html">Internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../obsolete/index.html">Obsolete Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../glean/index.html">Firefox on Glean (FOG)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/toolkit_modules/index.html">Toolkit Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../content/toolkit_widgets/index.html">Toolkit Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/webextensions/index.html">WebExtensions API Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Toolkit</a> &raquo;</li>
        
          <li><a href="../index.html">Telemetry</a> &raquo;</li>
        
          <li><a href="index.html">Data documentation</a> &raquo;</li>
        
      <li>“heartbeat” ping</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/toolkit/components/telemetry/data/heartbeat-ping.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="heartbeat-ping">
<h1>“heartbeat” ping<a class="headerlink" href="#heartbeat-ping" title="Permalink to this headline">¶</a></h1>
<p>This ping is submitted after a Firefox Heartbeat survey. Even if the user exits
the browser, closes the survey window, or ignores the survey, Heartbeat will
provide a ping to Telemetry for sending during the same session.</p>
<p>The payload contains the user’s survey response (if any) as well as timestamps
of various Heartbeat events (survey shown, survey closed, link clicked, etc).</p>
<p>The ping will also report the “surveyId”, “surveyVersion” and “testing”
Heartbeat survey parameters (if they are present in the survey config).
These “meta fields” will be repeated verbatim in the payload section.</p>
<p>The environment block and client ID are submitted with this ping.</p>
<p>Structure:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;heartbeat&quot;</span><span class="p">,</span>
  <span class="nx">version</span><span class="o">:</span> <span class="mf">4</span><span class="p">,</span>
  <span class="nx">clientId</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">UUID</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="nx">environment</span><span class="o">:</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="c1">// ... common ping data</span>
  <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">version</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
    <span class="nx">flowId</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="p">...</span> <span class="nx">timestamps</span> <span class="nx">below</span> <span class="p">...</span>
    <span class="nx">offeredTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">learnMoreTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">votedTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">engagedTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">closedTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">expiredTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">windowClosedTS</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span> <span class="nx">epoch</span> <span class="nx">timestamp</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="c1">// ... user&#39;s rating below</span>
    <span class="nx">score</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="c1">// ... survey meta fields below</span>
    <span class="nx">surveyId</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">surveyVersion</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">integer</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">testing</span><span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p>Pings will <strong>NOT</strong> have all possible timestamps, timestamps are only reported for events that actually occurred.</p></li>
<li><dl class="simple">
<dt>Timestamp meanings:</dt><dd><ul>
<li><p>offeredTS: when the survey was shown to the user</p></li>
<li><p>learnMoreTS: when the user clicked on the “Learn More” link</p></li>
<li><p>votedTS: when the user voted</p></li>
<li><p>engagedTS: when the user clicked on the survey-provided button (alternative to voting feature)</p></li>
<li><p>closedTS: when the Heartbeat notification bar was closed</p></li>
<li><p>expiredTS: indicates that the survey expired after 2 hours of no interaction (threshold regulated by “browser.uitour.surveyDuration” pref)</p></li>
<li><p>windowClosedTS: the user closed the entire Firefox window containing the survey, thus ending the survey. This timestamp will also be reported when the survey is ended by the browser being shut down.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>The surveyId/surveyVersion fields identify a specific survey (like a “1040EZ” tax paper form). The flowID is a UUID that uniquely identifies a single user’s interaction with the survey. Think of it as a session token.</p></li>
<li><p>The self-support page cannot include additional data in this payload. Only the the 4 flowId/surveyId/surveyVersion/testing fields are under the self-support page’s control.</p></li>
</ul>
<p>See also: <a class="reference internal" href="common-ping.html"><span class="doc">common ping fields</span></a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install-ping.html" class="btn btn-neutral float-right" title="Install Ping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="health-ping.html" class="btn btn-neutral float-left" title="“health” ping" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>