

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Implementation Basics &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="API Schemas" href="schema.html" />
    <link rel="prev" title="Background" href="background.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Toolkit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../featuregates/featuregates/index.html">Feature Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../search/index.html">Search Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../normandy/normandy/index.html">Shield Recipe Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../messaging-system/docs/index.html">Messaging System Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pictureinpicture/pictureinpicture/index.html">Picture-in-Picture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../prompts/prompts/index.html">Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/subprocess/toolkit_modules/subprocess/index.html">Subprocess Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glean/index.html">Firefox on Glean (FOG)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/toolkit_modules/index.html">Toolkit Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../content/toolkit_widgets/index.html">Toolkit Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">WebExtensions API Development</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">API Implementation Basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-api-schema">The API Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-extensionapi-class">The ExtensionAPI class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#built-in-apis-versus-experiments">Built-in APIs versus Experiments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-built-in-api">Adding a built-in API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#webextensions-experiments">WebExtensions Experiments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="schema.html">API Schemas</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">Implementing a function</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">Implementing an event</a></li>
<li class="toctree-l3"><a class="reference internal" href="manifest.html">Implementing a manifest property</a></li>
<li class="toctree-l3"><a class="reference internal" href="lifecycle.html">Managing the Extension Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="incognito.html">Incognito Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="other.html">Utilities for implementing APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html">WebExtensions Javascript Component Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Toolkit</a> &raquo;</li>
        
          <li><a href="index.html">WebExtensions API Development</a> &raquo;</li>
        
      <li>API Implementation Basics</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/toolkit/components/extensions/webextensions/basics.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-implementation-basics">
<span id="basics"></span><h1>API Implementation Basics<a class="headerlink" href="#api-implementation-basics" title="Permalink to this headline">¶</a></h1>
<p>This page describes some of the pieces involved when creating
WebExtension APIs.  Detailed documentation about how these pieces work
together to build specific features is in the next section.</p>
<div class="section" id="the-api-schema">
<h2>The API Schema<a class="headerlink" href="#the-api-schema" title="Permalink to this headline">¶</a></h2>
<p>As described previously, a WebExtension runs in a sandboxed environment
but the implementation of a WebExtension API runs with full chrome
privileges.  API implementations do not directly interact with
extensions’ Javascript environments, that is handled by the WebExtensions
framework.  Each API includes a schema that describes all the functions,
events, and other properties that the API might inject into an
extension’s Javascript environment.
Among other things, the schema specifies the namespace into which
an API should be injected, what permissions (if any) are required to
use it, and in which contexts (e.g., extension pages, content scripts, etc)
it should be available.  The WebExtensions framework reads this schema
and takes care of injecting the right objects into each extension
Javascript environment.</p>
<p>API schemas are written in JSON and are based on
<a class="reference external" href="http://json-schema.org/">JSON Schema</a> with some extensions to describe
API functions and events.
The next section describes the format of the schema in detail.</p>
</div>
<div class="section" id="the-extensionapi-class">
<h2>The ExtensionAPI class<a class="headerlink" href="#the-extensionapi-class" title="Permalink to this headline">¶</a></h2>
<p>Every WebExtension API is represented by an instance of the Javascript
<a class="reference external" href="reference.html#extensionapi-class">ExtensionAPI</a> class.
An instance of its API class is created every time an extension that has
access to the API is enabled.  Instances of this class contain the
implementations of functions and events that are exposed to extensions,
and they also contain code for handling manifest keys as well as other
part of the extension lifecycle (e.g., updates, uninstalls, etc.)
The details of this class are covered in a subsequent section, for now the
important point is that this class contains all the actual code that
backs a particular WebExtension API.</p>
</div>
<div class="section" id="built-in-apis-versus-experiments">
<h2>Built-in APIs versus Experiments<a class="headerlink" href="#built-in-apis-versus-experiments" title="Permalink to this headline">¶</a></h2>
<p>A WebExtension API can be built directly into the browser or it can be
contained in a special type of extension called a “WebExtension Experiment”.
The API schema and the ExtensionAPI class are written in the same way
regardless of how the API will be delivered, the rest of this section
explains how to package a new API using these methods.</p>
</div>
<div class="section" id="adding-a-built-in-api">
<h2>Adding a built-in API<a class="headerlink" href="#adding-a-built-in-api" title="Permalink to this headline">¶</a></h2>
<p>Built-in WebExtension APIs are loaded lazily.  That is, the schema and
accompanying code are not actually loaded and interpreted until an
extension that uses the API is activated.
To actually register the API with the WebExtensions framework, an entry
must be added to the list of WebExtensions modules in one of the following
files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">toolkit/components/extensions/ext-toolkit.json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">browser/components/extensions/ext-browser.json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobile/android/components/extensions/ext-android.json</span></code></p></li>
</ul>
<p>Here is a sample fragment for a new API:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;myapi&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;schema&quot;</span><span class="o">:</span> <span class="s2">&quot;chrome://extensions/content/schemas/myapi.json&quot;</span><span class="p">,</span>
  <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;chrome://extensions/content/ext-myapi.js&quot;</span><span class="p">,</span>
  <span class="s2">&quot;paths&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;myapi&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;anothernamespace&quot;</span><span class="p">,</span> <span class="s2">&quot;subproperty&quot;</span><span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">&quot;scopes&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;addon_parent&quot;</span><span class="p">],</span>
  <span class="s2">&quot;permissions&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;myapi&quot;</span><span class="p">],</span>
  <span class="s2">&quot;manifest&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;myapi_key&quot;</span><span class="p">],</span>
  <span class="s2">&quot;events&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;update&quot;</span><span class="p">,</span> <span class="s2">&quot;uninstall&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">schema</span></code> and <code class="docutils literal notranslate"><span class="pre">url</span></code> properties are simply URLs for the API schema
and the code implementing the API.  The <code class="docutils literal notranslate"><span class="pre">chrome:</span></code> URLs in the example above
are typically created by adding entries to <code class="docutils literal notranslate"><span class="pre">jar.mn</span></code> in the mozilla-central
directory where the API implementation is kept.  The standard locations for
API implementations are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">toolkit/components/extensions</span></code>: This is where APIs that work in both
the desktop and mobile versions of Firefox (as well as potentially any
other applications built on Gecko) should go</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">browser/components/extensions</span></code>: APIs that are only supported on
Firefox for the desktop.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobile/android/components/extensions</span></code>: APIs that are only supported
on Firefox for Android.</p></li>
</ul>
<p>Within the appropriate extensions directory, the convention is that the
API schema is in a file called <code class="docutils literal notranslate"><span class="pre">schemas/name.json</span></code> (where <em>name</em> is
the name of the API, typically the same as its namespace if it has
Javascript visible features).  The code for the ExtensionAPI class is put
in a file called <code class="docutils literal notranslate"><span class="pre">ext-name.js</span></code>.  If the API has code that runs in a
child process, that is conventionally put in a file called <code class="docutils literal notranslate"><span class="pre">ext-c-name.js</span></code>.</p>
<p>The remaining properties specify when an API should be loaded.
The <code class="docutils literal notranslate"><span class="pre">paths</span></code>, <code class="docutils literal notranslate"><span class="pre">scopes</span></code>, and <code class="docutils literal notranslate"><span class="pre">permissions</span></code> properties together
cause an API to be loaded when Javascript code in an extension references
something beneath the <code class="docutils literal notranslate"><span class="pre">browser</span></code> global object that is part of the API.
The <code class="docutils literal notranslate"><span class="pre">paths</span></code> property is an array of paths where each individual path is
also an array of property names.  In the example above, the sample API will
be loaded if an extension references either <code class="docutils literal notranslate"><span class="pre">browser.myapi</span></code> or
<code class="docutils literal notranslate"><span class="pre">browser.anothernamespace.subproperty</span></code>.</p>
<p>A reference to a property beneath <code class="docutils literal notranslate"><span class="pre">browser</span></code> only causes the API to be
loaded if it occurs within a scope listed in the <code class="docutils literal notranslate"><span class="pre">scopes</span></code> property.
A scope corresponds to the combination of a Javascript environment
(e.g., extension pages, content scripts, etc) and the process in which the
API code should run (which is either the main/parent process, or a
content/child process).
Valid <code class="docutils literal notranslate"><span class="pre">scopes</span></code> are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;addon_parent&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;addon_child</span></code>: Extension pages</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;content_parent&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;content_child</span></code>: Content scripts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;devtools_parent&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;devtools_child&quot;</span></code>: Devtools pages</p></li>
</ul>
<p>The distinction between the <code class="docutils literal notranslate"><span class="pre">_parent</span></code> and <code class="docutils literal notranslate"><span class="pre">_child</span></code> scopes will be
explained in further detail in following sections.</p>
<p>A reference to a property only causes the API to be loaded if the
extension referencing the property also has all the permissions listed
in the <code class="docutils literal notranslate"><span class="pre">permissions</span></code> property.</p>
<p>A WebExtension API that is controlled by a manifest key can also be loaded
when an extension that includes the relevant manifest key is activated.
This is specified by the <code class="docutils literal notranslate"><span class="pre">manifest</span></code> property, which lists any manifest keys
that should cause the API to be loaded.</p>
<p>Finally, APIs can be loaded based on other events in the WebExtension
lifecycle.  These are listed in the <code class="docutils literal notranslate"><span class="pre">events</span></code> property and described in
more detail in <a class="reference internal" href="lifecycle.html#lifecycle"><span class="std std-ref">Managing the Extension Lifecycle</span></a>.</p>
</div>
<div class="section" id="webextensions-experiments">
<h2>WebExtensions Experiments<a class="headerlink" href="#webextensions-experiments" title="Permalink to this headline">¶</a></h2>
<p>A new API may also be implemented within an extension. An API implemented
this way is called a WebExtension Experiment.  Experiments can be useful
when actively developing a new API, as they do not require building
Firefox locally. Note that extensions that include experiments cannot be
signed by addons.mozilla.org.  They may be installed temporarily via
<code class="docutils literal notranslate"><span class="pre">about:debugging</span></code> or, on browser that support it (current Nightly and
Developer Edition), by setting the preference
<code class="docutils literal notranslate"><span class="pre">xpinstall.signatures.required</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.  You may also set the
preference <code class="docutils literal notranslate"><span class="pre">extensions.experiments.enabled</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> to install the
addon normally and test across restart.</p>
<p>Experimental APIs have a few limitations compared with built-in APIs:</p>
<ul class="simple">
<li><p>Experimental APIs can (currently) only be exposed to extension pages,
not to devtools pages or to content scripts.</p></li>
<li><p>Experimental APIs cannot handle manifest keys (since the extension manifest
needs to be parsed and validated before experimental APIs are loaded).</p></li>
<li><p>Experimental APIs cannot use the static <code class="docutils literal notranslate"><span class="pre">&quot;update&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;uninstall&quot;</span></code>
lifecycle events (since in general those may occur when an affected
extension is not active or installed).</p></li>
</ul>
<p>Experimental APIs are declared in the <code class="docutils literal notranslate"><span class="pre">experiment_apis</span></code> property in a
WebExtension’s <code class="docutils literal notranslate"><span class="pre">manifest.json</span></code> file.  For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;manifest_version&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Extension containing an experimental API&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiment_apis&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;apiname&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;schema&quot;</span><span class="o">:</span> <span class="s2">&quot;schema.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;scopes&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;addon_parent&quot;</span><span class="p">],</span>
        <span class="s2">&quot;paths&quot;</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;myapi&quot;</span><span class="p">]],</span>
        <span class="s2">&quot;script&quot;</span><span class="o">:</span> <span class="s2">&quot;implementation.js&quot;</span>
      <span class="p">},</span>

      <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;scopes&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;addon_child&quot;</span><span class="p">],</span>
        <span class="s2">&quot;paths&quot;</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;myapi&quot;</span><span class="p">]],</span>
        <span class="s2">&quot;script&quot;</span><span class="o">:</span> <span class="s2">&quot;child-implementation.js&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is essentially the same information required for built-in APIs,
just organized differently.  The <code class="docutils literal notranslate"><span class="pre">schema</span></code> property is a relative path
to a file inside the extension containing the API schema.  The actual
implementation details for the parent process and for child processes
are defined in the <code class="docutils literal notranslate"><span class="pre">parent</span></code> and <code class="docutils literal notranslate"><span class="pre">child</span></code> properties of the API
definition respectively.  Inside these sections, the <code class="docutils literal notranslate"><span class="pre">scope</span></code> and <code class="docutils literal notranslate"><span class="pre">paths</span></code>
properties have the same meaning as those properties in the definition
of a built-in API (though see the note above about limitations; the
only currently valid values for <code class="docutils literal notranslate"><span class="pre">scope</span></code> are <code class="docutils literal notranslate"><span class="pre">&quot;addon_parent&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;addon_child&quot;</span></code>).  The <code class="docutils literal notranslate"><span class="pre">script</span></code> property is a relative path to a file
inside the extension containing the implementation of the API.</p>
<p>The extension that includes an experiment defined in this way automatically
gets access to the experimental API.  An extension may also use an
experimental API implemented in a different extension by including the
string <code class="docutils literal notranslate"><span class="pre">experiments.name</span></code> in the <code class="docutils literal notranslate"><span class="pre">permissions`</span></code> property in its
<code class="docutils literal notranslate"><span class="pre">manifest.json</span></code> file.  In this case, the string name must be replace by
the name of the API from the extension that defined it (e.g., <code class="docutils literal notranslate"><span class="pre">apiname</span></code>
in the example above.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="schema.html" class="btn btn-neutral float-right" title="API Schemas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="background.html" class="btn btn-neutral float-left" title="Background" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>