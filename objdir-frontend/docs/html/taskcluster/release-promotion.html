

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Release Promotion &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release Promotion Action" href="release-promotion-action.html" />
    <link rel="prev" title="Actions" href="actions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">TaskCluster Task-Graph Generation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="taskgraph.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.html">Taskcluster Mach commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="loading.html">Loading Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="transforms.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization.html">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker-images.html">Docker Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="cron.html">Periodic Taskgraphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="try.html">Try</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Release Promotion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#release-promotion-phases">Release Promotion Phases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#in-depth-relpro-guide">In-depth relpro guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release-promotion-action.html">Release Promotion Action</a></li>
<li class="toctree-l4"><a class="reference internal" href="balrog.html">Balrog in Release Promotion</a></li>
<li class="toctree-l4"><a class="reference internal" href="setting-up-an-update-server.html">Setting Up An Update Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="partials.html">Partial Update Generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="signing.html">Signing</a></li>
<li class="toctree-l4"><a class="reference internal" href="partner-repacks.html">Partner repacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="partner-attribution.html">Partner attribution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="versioncontrol.html">Version Control in CI</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Taskcluster Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-tos.html">How Tos</a></li>
<li class="toctree-l2"><a class="reference internal" href="task-graph.html">Task Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">TaskCluster Task-Graph Generation</a> &raquo;</li>
        
      <li>Release Promotion</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/taskcluster/release-promotion.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-promotion">
<h1>Release Promotion<a class="headerlink" href="#release-promotion" title="Permalink to this headline">¶</a></h1>
<p>Release promotion allows us to ship the same compiled binaries that we’ve
already tested.</p>
<p>In the olden days, we used to re-compile our release builds with separate
configs, which led to release-specific bugs which weren’t caught by continuous
integration tests. This meant we required new builds at release time, which
increased the end-to-end time for a given release significantly. Release
promotion removes these anti-patterns.</p>
<p>By running our continuous integration tests against our shippable builds, we
have a higher degree of confidence at release time. By separating the build
phase tasks (compilation, packaging, and related tests) from the promotion
phase tasks, we can schedule each phase at their own independent cadence, as
needed, and the end-to-end time for promotion is reduced significantly.</p>
<div class="section" id="release-promotion-phases">
<span id="id1"></span><h2>Release Promotion Phases<a class="headerlink" href="#release-promotion-phases" title="Permalink to this headline">¶</a></h2>
<p>Currently, we have the <code class="docutils literal notranslate"><span class="pre">build</span></code>, <code class="docutils literal notranslate"><span class="pre">promote</span></code>, <code class="docutils literal notranslate"><span class="pre">push</span></code>, and <code class="docutils literal notranslate"><span class="pre">ship</span></code> phases.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span></code> phase creates <code class="docutils literal notranslate"><span class="pre">shippable</span> <span class="pre">builds</span></code>. These optimize for correctness
over speed, and are designed to be of shipping quality, should we decide to
ship that revision of code. These are triggered on push on release branches.
(We also schedule <code class="docutils literal notranslate"><span class="pre">depend</span></code> builds on most branches, which optimize for speed
over correctness, so we can detect new code bustage sooner.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">promote</span></code> phase localizes the shippable builds, creates any update MARs,
and populates the candidates directories on S3. (On Android, we rebuild, because
we haven’t been successful repacking the APK.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">push</span></code> phase pushes the candidates files to the appropriate release directory
on S3.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ship</span></code> phase ships or schedules updates to users. These are often at a
limited rollout percentage or are dependent on multiple downstream signoffs to
fully ship.</p>
</div>
<div class="section" id="in-depth-relpro-guide">
<h2>In-depth relpro guide<a class="headerlink" href="#in-depth-relpro-guide" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-promotion-action.html">Release Promotion Action</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#the-snowman-model">The snowman model</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#release-promotion-action-mechanics">Release promotion action mechanics</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#release-promotion-flavors">Release Promotion Flavors</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#triggering-the-release-promotion-action-via-treeherder">Triggering the release promotion action via Treeherder</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#triggering-the-release-promotion-action-via-releaserunner3">Triggering the release promotion action via releaserunner3</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#release-promotion-action-taskid-and-taskgroupid">Release promotion action taskId and taskGroupId</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-promotion-action.html#testing-and-developing-the-release-promotion-action">Testing and developing the release promotion action</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="balrog.html">Balrog in Release Promotion</a><ul>
<li class="toctree-l2"><a class="reference internal" href="balrog.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="balrog.html#submit-new-release-metadata">Submit New Release Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="balrog.html#update-test-channels">Update Test Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="balrog.html#verify-the-release">Verify the Release</a></li>
<li class="toctree-l2"><a class="reference internal" href="balrog.html#schedule-shipping">Schedule Shipping</a></li>
<li class="toctree-l2"><a class="reference internal" href="balrog.html#secondary-tasks"><code class="docutils literal notranslate"><span class="pre">secondary</span></code> tasks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setting-up-an-update-server.html">Setting Up An Update Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setting-up-an-update-server.html#obtaining-an-update-mar">Obtaining an update MAR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setting-up-an-update-server.html#downloading-a-mar">Downloading a MAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="setting-up-an-update-server.html#building-a-mar">Building a MAR</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="setting-up-an-update-server.html#serving-the-update">Serving the update</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setting-up-an-update-server.html#preparing-the-update-files">Preparing the update files</a></li>
<li class="toctree-l3"><a class="reference internal" href="setting-up-an-update-server.html#starting-your-update-server">Starting your update server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="setting-up-an-update-server.html#installing-the-update">Installing the update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="partials.html">Partial Update Generation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partials.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="partials.html#how-the-task-works">How the Task Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="partials.html#for-releases">For Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="partials.html#nightly-partials">Nightly Partials</a></li>
<li class="toctree-l2"><a class="reference internal" href="partials.html#nightly-partials-and-beetmover">Nightly Partials and Beetmover</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="signing.html">Signing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="signing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="signing.html#how-the-task-works">How the Task Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="signing.html#signing-kinds">Signing kinds</a></li>
<li class="toctree-l2"><a class="reference internal" href="signing.html#signing-formats">Signing formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="signing.html#cert-levels">Cert levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="signing.html#signing-scriptworker-workertypes">Signing scriptworker workerTypes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="partner-repacks.html">Partner repacks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partner-repacks.html#parameters-scheduling">Parameters &amp; Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="partner-repacks.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="partner-repacks.html#repacking-process">Repacking process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#partner-repack">Partner repack</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#signing">Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#repackage">Repackage</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#chunking-dummy">Chunking dummy</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#repackage-signing">Repackage Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#beetmover">Beetmover</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-repacks.html#beetmover-checksums">Beetmover checksums</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="partner-repacks.html#updates">Updates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="partner-attribution.html">Partner attribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="partner-attribution.html#parameters-scheduling">Parameters &amp; Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="partner-attribution.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="partner-attribution.html#repacking-process">Repacking process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="partner-attribution.html#attribution">Attribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="partner-attribution.html#beetmover">Beetmover</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-promotion-action.html" class="btn btn-neutral float-right" title="Release Promotion Action" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="actions.html" class="btn btn-neutral float-left" title="Actions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>