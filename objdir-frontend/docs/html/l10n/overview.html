

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Localization &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fluent" href="fluent/index.html" />
    <link rel="prev" title="Localization" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intl/index.html">Internationalization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Localization</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Localization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#localization-at-mozilla">Localization at Mozilla</a></li>
<li class="toctree-l3"><a class="reference internal" href="#content-vs-ui">Content vs. UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lifecycle-workflow">Lifecycle &amp; Workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#new-feature">1) New feature</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ux-mockup-copy-review">2) UX mockup + copy review</a></li>
<li class="toctree-l4"><a class="reference internal" href="#patch-l10n-review">3) Patch l10n review</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exposure-in-gecko-strings">4) Exposure in <cite>gecko-strings</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">5) Localization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string-updates">6) String updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#selecting-l10n-identifier">Selecting L10n Identifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="#localization-systems">Localization Systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fluent">Fluent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dtd-stringbundle">DTD &amp; StringBundle</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fluent/index.html">Fluent</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrations/index.html">Migrating Strings From Legacy or Fluent Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="crosschannel/index.html">Cross-channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">L10N Glossary</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Localization</a> &raquo;</li>
        
      <li>Localization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/l10n/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="localization">
<h1>Localization<a class="headerlink" href="#localization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="localization-at-mozilla">
<h2>Localization at Mozilla<a class="headerlink" href="#localization-at-mozilla" title="Permalink to this headline">¶</a></h2>
<p>At Mozilla localizations are managed by locale communities around the world, who
are responsible for maintaining high quality linguistic and cultural adaptation
of Mozilla software into over 100 locales.</p>
<p>The exact process of localization management differs from project to project, but
in the case of Gecko applications, the localization is primarily done via a web localization
system called <a class="reference external" href="https://pontoon.mozilla.org/">Pontoon</a> and stored in HG repositories under
<a class="reference external" href="https://hg.mozilla.org/l10n-central/">hg.mozilla.org/l10n-central</a>.</p>
<p>Developers are expected to keep their code localizable using localization
and internationalization systems, and also serve as localizers into the <cite>en-US</cite> locale
which is used as the <cite>source</cite> locale.</p>
<p>In between the developers and localizers, there’s a sophisticated ecosystem of tools,
tests, automation, validators and other checks on one hand, and management, release,
community and quality processes facilitated by the <a class="reference external" href="https://wiki.mozilla.org/L10n:Mozilla_Team">L10n Drivers Team</a>, on the other.</p>
</div>
<div class="section" id="content-vs-ui">
<h2>Content vs. UI<a class="headerlink" href="#content-vs-ui" title="Permalink to this headline">¶</a></h2>
<p>The two main categories in localization are content localization vs UI localization.</p>
<p>The former is usually involved when dealing with large blocks of text such as
documentation, help articles, marketing material and legal documents.</p>
<p>The latter is the primary type when handling user interfaces for applications such
as Firefox.</p>
<p>This article will focus on UI localization.</p>
</div>
<div class="section" id="lifecycle-workflow">
<h2>Lifecycle &amp; Workflow<a class="headerlink" href="#lifecycle-workflow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-feature">
<h3>1) New feature<a class="headerlink" href="#new-feature" title="Permalink to this headline">¶</a></h3>
<p>The typical life cycle of a localizable UI starts with a UX/UI or new feature need which
should be accompanied by the UX mockups involving so called <cite>copy</cite> - the original
content to be used in the new piece of UI.</p>
</div>
<div class="section" id="ux-mockup-copy-review">
<h3>2) UX mockup + copy review<a class="headerlink" href="#ux-mockup-copy-review" title="Permalink to this headline">¶</a></h3>
<p>The UX mockup with copy is the first step that should be reviewed by the L10n Drivers Team.
Their aim is to identify potential cultural and localization challenges that may arise
later and ensure that the UI is ready for localization on a linguistic, cultural,
and technical level.</p>
</div>
<div class="section" id="patch-l10n-review">
<h3>3) Patch l10n review<a class="headerlink" href="#patch-l10n-review" title="Permalink to this headline">¶</a></h3>
<p>Once that is completed, the next stage is for front-end engineers to create patches
which implement the new UI. Those patches should already contain the <cite>copy</cite> and
place the strings in the localization resources for the source locale (<cite>en-US</cite>).</p>
<p>The developer uses the localization API by selecting a special identifier we call
<cite>L10n ID</cite> and optionally a list of variables that will be passed to the translation.</p>
<p>We call this “a social contract” which binds the l10n-id/args combination to a particular
source translation to use in the UI.</p>
<p>The localizer expects the developer to maintain the contract by ensuring that the
translation will be used in the given location, and will correspond to the
source translation. If that contract is to be changed, the developer will be expected
to update it. More on that in part <cite>6) String Updates</cite>.</p>
<p>The next review comes from either L10n Drivers, or experienced front end engineers
familiar with the internationalization and localization systems, making sure that
the patches properly use the right APIs and the code is ready to be landed
into <cite>mozilla-central</cite>.</p>
</div>
<div class="section" id="exposure-in-gecko-strings">
<span id="id1"></span><h3>4) Exposure in <cite>gecko-strings</cite><a class="headerlink" href="#exposure-in-gecko-strings" title="Permalink to this headline">¶</a></h3>
<p>Once the patch lands in <cite>mozilla-central</cite>, L10n Drivers will take a final look at
the localizability of the introduced strings. In case of issues, developers might
be asked to land a follow up, or the patch could be backed out with the help of sheriffs.</p>
<p>Every few days, strings are exported into a repository called <cite>gecko-strings-quarantine</cite>,
a unified repository that includes strings for all shipping versions of Firefox
(nightly, beta, release). This repository is used as a buffer to avoid exposing potential
issues to over 100 locales.</p>
<p>As a last step, strings are pushed into <cite>gecko-strings</cite>, another unified repository that
is exposed to localization tools, like Pontoon, and build automation.</p>
</div>
<div class="section" id="id2">
<h3>5) Localization<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>From that moment localizers will work on providing translations for the new feature
either while the new strings are only in Nightly or after they are merged to Beta.
The goal is to have as much of the UI ready in as many locales as early as possible,
but the process is continuous and we’re capable of releasing Firefox with incomplete
translations falling back on a backup locale in case of a missing string.</p>
<p>While Nightly products use the latest version of localization available in repositories,
the L10n Drivers team is responsible for reviewing and signing off versions of each
localization shipping in Beta and Release versions of Gecko products.</p>
</div>
<div class="section" id="string-updates">
<h3>6) String updates<a class="headerlink" href="#string-updates" title="Permalink to this headline">¶</a></h3>
<p>Later in the software life cycle some strings might need to be changed or removed.
As a general rule, once the strings lands in <cite>mozilla-central</cite>, any further update
to existing strings will need to follow these guidelines, independently from how much
time has passed since previous changes.</p>
<p>If it’s just a string removal, all the engineer has to do is to remove it from the UI
and from the localization resource file in <cite>mozilla-central</cite>.</p>
<p>If it’s an update, we currently have two “levels” of change severity:</p>
<p>1) If the change is minor, like fixing a spelling error or case, the developer should update
the <cite>en-US</cite> translation without changing the l10n-id.</p>
<p>2) If the change is anyhow affecting the meaning or tone of the message, the developer
is requested to update the l10n string ID.</p>
<p>The latter is considered a change in the social contract between the developer and
the localizer and an update to the ID is expected.</p>
<p>In case of <a class="reference internal" href="#fluent">Fluent</a>, any changes to the structure of the message such as adding/removing
attributes also requires an update of the ID.</p>
<p>The new ID will be recognized by the l10n tooling as untranslated, and the old one
as obsolete. This will give the localizers an opportunity to find and update the
translation, while the old string will be removed from the build process.</p>
<p>There is a gray area between the two severity levels. In case of doubt, don’t hesitate
to request feedback of review from L10n Drivers to avoid issues once the strings land.</p>
</div>
</div>
<div class="section" id="selecting-l10n-identifier">
<h2>Selecting L10n Identifier<a class="headerlink" href="#selecting-l10n-identifier" title="Permalink to this headline">¶</a></h2>
<p>Choosing an identifier for a localization message is tricky. It may seem similar
to picking a variable name, but in reality, it’s much closer to designing a public
API.</p>
<p>An l10n identifier, once defined, is then getting associated to a translated
message in every one of 100+ locales and it becomes very costly to attempt to
migrate that string in all locales to a different identifier.</p>
<p>Additionally, in Fluent an identifier is used as a last resort string to be displayed in
an error scenario when formatting the message fails, which makes selecting
<strong>meaningful</strong> identifiers particularly valuable.</p>
<p>Lastly, l10n resources get mixed and matched into localization contexts where
it becomes important to avoid identifier collision from two strings coming
from two different files.</p>
<p>For all those reasons, a longer identifier such as <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">privacy</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">exceptions</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">button</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">ok</span></span></code> is
preferred over short identifiers like <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">ok</span></span></code> or <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">ok</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">button</span></span></code>.</p>
</div>
<div class="section" id="localization-systems">
<h2>Localization Systems<a class="headerlink" href="#localization-systems" title="Permalink to this headline">¶</a></h2>
<p>Gecko has three main localization systems: Fluent and two legacy systems,
DTD and StringBundle.</p>
<div class="section" id="fluent">
<h3>Fluent<a class="headerlink" href="#fluent" title="Permalink to this headline">¶</a></h3>
<p>Fluent is a modern localization system designed by Mozilla to address the challenges
and limitations of older systems.</p>
<p>It’s well suited for modern web development cycle, provides a number of localization
features including good internationalization model and strong bidirectionality support.</p>
<p>To learn more about Fluent, follow the <a class="reference external" href="./l10n/l10n/fluent_tutorial.html">Fluent for Firefox Developers</a> guide.</p>
</div>
<div class="section" id="dtd-stringbundle">
<h3>DTD &amp; StringBundle<a class="headerlink" href="#dtd-stringbundle" title="Permalink to this headline">¶</a></h3>
<p>DTD are deprecated, but still used for XUL and XHTML file localization. It uses <cite>.dtd</cite> files
and the only localization feature it provides is the ability to reference one
string from another via entity reference.</p>
<p>StringBundle is a runtime API used primarily for localization of C++ code.
The messages are stored in <cite>.properties</cite> files and loaded using the StringBundle API
and then retrieved from there via imperative calls.</p>
<p>The system provides external arguments which can be placed into the string, and
support basic plural categories via a proprietary API <cite>PluralForms.jsm</cite>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fluent/index.html" class="btn btn-neutral float-right" title="Fluent" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Localization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>