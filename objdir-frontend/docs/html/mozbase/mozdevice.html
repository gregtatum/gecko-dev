

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mozdevice — Interact with Android devices &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using third-party Python packages" href="../python/index.html" />
    <link rel="prev" title="Device management" href="devicemanagement.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">mozbase</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="manifestparser.html">Managing lists of tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="gettinginfo.html">Getting information on the system under test</a></li>
<li class="toctree-l2"><a class="reference internal" href="setuprunning.html">Set up and running</a></li>
<li class="toctree-l2"><a class="reference internal" href="servingcontent.html">Handling content for the browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="loggingreporting.html">Logging and reporting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="devicemanagement.html">Device management</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mozdevice</span></code> — Interact with Android devices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">mozbase</a> &raquo;</li>
        
          <li><a href="devicemanagement.html">Device management</a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">mozdevice</span></code> — Interact with Android devices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/mozbase/mozdevice.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mozdevice">
<span id="mozdevice-interact-with-android-devices"></span><h1><a class="reference internal" href="#module-mozdevice" title="mozdevice"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mozdevice</span></code></a> — Interact with Android devices<a class="headerlink" href="#module-mozdevice" title="Permalink to this headline">¶</a></h1>
<p>mozdevice provides a Python interface to the Android Debug Bridge (adb) for Android Devices.</p>
<p>mozdevice exports the following classes:</p>
<p>ADBProcess is a class which is used by ADBCommand to execute commands
via subprocess.Popen.</p>
<p>ADBCommand is an internal only class which provides the basics of
the interfaces for connecting to a device, and executing commands
either on the host or device using ADBProcess.</p>
<p>ADBHost is a Python class used to execute commands which are not
necessarily associated with a specific device. It is intended to be
used directly.</p>
<p>ADBDevice is a Python class used to execute commands which will
interact with a specific connected Android device.</p>
<p>ADBAndroid inherits directly from ADBDevice and is essentially a
synonym for ADBDevice. It is included for backwards compatibility only
and should not be used in new code.</p>
<p>ADBDeviceFactory is a Python function used to create instances of
ADBDevice. ADBDeviceFactory is preferred over using ADBDevice to
create new instances of ADBDevice since it will only create one
instance of ADBDevice for each connected device.</p>
<p>mozdevice exports the following exceptions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">Exception</span> <span class="o">-</span>
<span class="o">|-</span> <span class="n">ADBTimeoutError</span>
<span class="o">|-</span> <span class="n">ADBDeviceFactoryError</span>
<span class="o">|-</span> <span class="n">ADBError</span>
   <span class="o">|-</span> <span class="n">ADBProcessError</span>
   <span class="o">|-</span> <span class="n">ADBListDevicesError</span>
</pre></div>
</div>
<p>ADBTimeoutError is a special exception that is not part of the
ADBError class hierarchy. It is raised when a command has failed to
complete within the specified timeout period. Since this typically is
due to a failure in the usb connection to the device and is not
recoverable, it is implemented separately from ADBError so that it
will not be caught by normal except clause handling of expected error
conditions and is considered to be treated as a <em>fatal</em> error.</p>
<p>ADBDeviceFactoryError is also a special exception that is not part
of the ADBError class hierarchy. It is raised by ADBDeviceFactory
when the state of the internal ADBDevices object is in an
inconsistent state and is considered to be a <em>fatal</em> error.</p>
<p>ADBListDevicesError is an instance of ADBError which is
raised only by the ADBHost.devices() method to signify that
<code class="docutils literal notranslate"><span class="pre">adb</span> <span class="pre">devices</span></code> reports that the device state has no permissions and can
not be contacted via adb.</p>
<p>ADBProcessError is an instance of ADBError which is raised when a
process executed via ADBProcess has exited with a non-zero exit
code. It is raised by the ADBCommand.command method and the methods
that call it.</p>
<p>ADBError is a generic exception class to signify that some error
condition has occured which may be handled depending on the semantics
of the executing code.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mozdevice</span> <span class="kn">import</span> <span class="n">ADBHost</span><span class="p">,</span> <span class="n">ADBDeviceFactory</span><span class="p">,</span> <span class="n">ADBError</span>

<span class="n">adbhost</span> <span class="o">=</span> <span class="n">ADBHost</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">adbhost</span><span class="o">.</span><span class="n">kill_server</span><span class="p">()</span>
    <span class="n">adbhost</span><span class="o">.</span><span class="n">start_server</span><span class="p">()</span>
<span class="k">except</span> <span class="n">ADBError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unable to restart the adb server: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">ADBDeviceFactory</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">sdcard_contents</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/sdcard/&#39;</span><span class="p">)</span>  <span class="c1"># List the contents of the sdcard on the device.</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sdcard contains </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sdcard_contents</span><span class="p">))</span>
<span class="k">except</span> <span class="n">ADBError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unable to list the sdcard: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
</pre></div>
</div>
<p>Android devices use a security model based upon user permissions much
like that used in Linux upon which it is based. The adb shell executes
commands on the device as the shell user whose access to the files and
directories on the device are limited by the directory and file
permissions set in the device’s file system.</p>
<p>Android apps run under their own user accounts and are restricted by
the app’s requested permissions in terms of what commands and files
and directories they may access.</p>
<p>Like Linux, Android supports a root user who has unrestricted access
to the command and content stored on the device.</p>
<p>Most commercially released Android devices do not allow adb to run
commands as the root user. Typically, only Android emulators running
certain system images, devices which have AOSP debug or engineering
Android builds or devices which have been <em>rooted</em> can run commands as
the root user.</p>
<p>ADBDevice supports using both unrooted and rooted devices by laddering
its capabilities depending on the specific circumstances where it is
used.</p>
<p>ADBDevice uses a special location on the device, called the
<em>test_root</em>, where it places content to be tested. This can include
binary executables and libraries, configuration files and log
files. Since the special location /data/local/tmp is usually
accessible by the shell user, the test_root is located at
/data/local/tmp/test_root by default. /data/local/tmp is used instead
of the sdcard due to recent Scoped Storage restrictions on access to
the sdcard in Android 10 and later.</p>
<p>If the device supports running adbd as root, or if the device has been
rooted and supports the use of the su command to run commands as root,
ADBDevice will default to running all shell commands under the root
user and the test_root will remain set to /data/local/tmp/test_root
unless changed.</p>
<p>If the device does not support running shell commands under the root
user, and a <em>debuggable</em> app is set in ADBDevice property
run_as_package, then ADBDevice will set the test_root to
/data/data/&lt;app-package-name&gt;/test_root and will run shell commands as
the app user when accessing content located in the app’s data
directory. Content can be pushed to the app’s data directory or pulled
from the app’s data directory by using the command run-as to access
the app’s data.</p>
<p>If a device does not support running commands as root and a
<em>debuggable</em> app is not being used, command line programs can still be
executed by pushing them to the /data/local/tmp directory which is
accessible to the shell user.</p>
<p>If for some reason, the device is not rooted and /data/local/tmp is
not acccessible to the shell user, then ADBDevice will fail to
initialize and will not be useable for that device.</p>
<p>NOTE: ADBFactory will clear the contents of the test_root when it
first creates an instance of ADBDevice.</p>
<p>When the run_as_package property is set in an ADBDevice instance, it
will clear the contents of the current test_root before changing the
test_root to point to the new location
/data/data/&lt;app-package-name&gt;/test_root which will then be cleared of
any existing content.</p>
<dl class="py class">
<dt id="mozdevice.ADBAndroid">
<em class="property">class </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBAndroid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">adb_host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb_port</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">test_root</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger_name</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">300</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">device_ready_retry_wait</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">device_ready_retry_attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">use_root</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">share_test_root</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">run_as_package</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mozdevice.adb.ADBDevice</span></code></p>
<p>ADBAndroid functionality is now provided by ADBDevice. New callers
should use ADBDevice.</p>
<dl class="py attribute">
<dt id="mozdevice.ADBAndroid.SOCKET_DIRECTION_FORWARD">
<code class="sig-name descname">SOCKET_DIRECTION_FORWARD</code><em class="property"> = 'forward'</em><a class="headerlink" href="#mozdevice.ADBAndroid.SOCKET_DIRECTION_FORWARD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="mozdevice.ADBAndroid.SOCKET_DIRECTION_REVERSE">
<code class="sig-name descname">SOCKET_DIRECTION_REVERSE</code><em class="property"> = 'reverse'</em><a class="headerlink" href="#mozdevice.ADBAndroid.SOCKET_DIRECTION_REVERSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.batch_execute">
<code class="sig-name descname">batch_execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">commands</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.batch_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes commands to a temporary file then executes on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>commands_list</strong> (<em>list</em>) – List of commands to be run by the shell.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.chmod">
<code class="sig-name descname">chmod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">'777'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.chmod" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively changes the permissions of a directory on the
device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Flag specifying if the command should be
executed recursively.</p></li>
<li><p><strong>mask</strong> (<em>str</em>) – The octal permissions.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.chown">
<code class="sig-name descname">chown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">owner</span></em>, <em class="sig-param"><span class="n">group</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.chown" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the chown command on the provided path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – path name on the device.</p></li>
<li><p><strong>owner</strong> (<em>str</em>) – new owner of the path.</p></li>
<li><p><strong>group</strong> (<em>str</em>) – optional parameter specifying the new group the path
should belong to.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – optional value specifying whether the command should
operate on files and directories recursively.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.clear_logcat">
<code class="sig-name descname">clear_logcat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">buffers</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.clear_logcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears logcat via adb logcat -c.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per
adb call. The total time spent may exceed this
value. If it is not specified, the value set
in the ADBDevice constructor is used.</p></li>
<li><p><strong>buffers</strong> (<em>list</em>) – Log buffers to clear. Valid buffers are
“radio”, “events”, and “main”. Defaults to “main”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host against the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be
executed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBProcess" title="mozdevice.ADBProcess"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBProcess</span></code></a></p>
</dd>
</dl>
<p>command() provides a low level interface for executing
commands for a specific device on the host via adb.</p>
<p>command() executes on the host in such a fashion that stdout
of the adb process are file handles on the host and
the exit code is available as the exit code of the adb
process.</p>
<p>For executing shell commands on the device, use
ADBDevice.shell().  The caller provides a list containing
commands, as well as a timeout period in seconds.</p>
<p>A subprocess is spawned to execute adb for the device with
stdout and stderr directed to a temporary file. If the process
takes longer than the specified timeout, the process is
terminated.</p>
<p>It is the caller’s responsibilty to clean up by closing
the stdout temporary file.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.command_output">
<code class="sig-name descname">command_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.command_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host against the device returning
stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be executed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str - content of stdout.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.cp">
<code class="sig-name descname">cp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">destination</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies a file or directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> – string containing the path of the source file or
directory.</p></li>
<li><p><strong>destination</strong> – string containing the path of the destination file
or directory.</p></li>
<li><p><strong>recursive</strong> – optional boolean indicating if a recursive copy is to
be performed. Required if the source is a directory. Defaults to
False. Think cp -R source destination.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.create_socket_connection">
<code class="sig-name descname">create_socket_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">allow_rebind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.create_socket_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up a socket connection in the specified direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>str</em>) – Direction of the socket connection</p></li>
<li><p><strong>local</strong> (<em>str</em>) – Local port</p></li>
<li><p><strong>remote</strong> (<em>str</em>) – Remote port</p></li>
<li><p><strong>allow_rebind</strong> (<em>bool</em>) – Do not fail if port is already bound</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.enable_run_as_for_path">
<code class="sig-name descname">enable_run_as_for_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.enable_run_as_for_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.enforcing">
<em class="property">property </em><code class="sig-name descname">enforcing</code><a class="headerlink" href="#mozdevice.ADBAndroid.enforcing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the path exists on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>root</strong> (<em>bool</em>) – Flag specifying if the command should be
executed as root.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if path exists.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">allow_rebind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward a local port to a specific port on the device.</p>
<p>See <cite>ADBDevice.create_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_battery_percentage">
<code class="sig-name descname">get_battery_percentage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_battery_percentage" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the battery charge as a percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>battery charge as a percentage.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_file">
<code class="sig-name descname">get_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull file from device and return the file’s content</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote</strong> (<em>str</em>) – The path of the remote file.</p></li>
<li><p><strong>offset</strong> – If specified, return only content beyond this offset.</p></li>
<li><p><strong>length</strong> – If specified, limit content length accordingly.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_info">
<code class="sig-name descname">get_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directive</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of information strings about the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directive</strong> – <dl class="simple">
<dt>information you want to get. Options are:</dt><dd><ul>
<li><p><cite>battery</cite> - battery charge as a percentage</p></li>
<li><p><cite>disk</cite> - total, free, available bytes on disk</p></li>
<li><p><cite>id</cite> - unique id of the device</p></li>
<li><p><cite>os</cite> - name of the os</p></li>
<li><p><cite>process</cite> - list of running processes (same as ps)</p></li>
<li><p><cite>systime</cite> - system time of the device</p></li>
<li><p><cite>uptime</cite> - uptime of the device</p></li>
</ul>
</dd>
</dl>
<p>If <cite>directive</cite> is <cite>None</cite>, will return all available information</p>
</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_ip_address">
<code class="sig-name descname">get_ip_address</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interfaces</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_ip_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the device’s ip address, or None if it doesn’t have one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interfaces</strong> (<em>list</em>) – Interfaces to allow, or None to allow any
non-loopback interface.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str ip address of the device or None if it could not
be found.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_logcat">
<code class="sig-name descname">get_logcat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filter_specs</span><span class="o">=</span><span class="default_value">['dalvikvm:I', 'ConnectivityService:S', 'WifiMonitor:S', 'WifiStateTracker:S', 'wpa_supplicant:S', 'NetworkStateTracker:S', 'EmulatedCamera_Camera:S', 'EmulatedCamera_Device:S', 'EmulatedCamera_FakeCamera:S', 'EmulatedCamera_FakeDevice:S', 'EmulatedCamera_CallbackNotifier:S', 'GnssLocationProvider:S', 'Hyphenator:S', 'BatteryStats:S']</span></em>, <em class="sig-param"><span class="n">format</span><span class="o">=</span><span class="default_value">'time'</span></em>, <em class="sig-param"><span class="n">filter_out_regexps</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">buffers</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_logcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the contents of the logcat file as a list of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_specs</strong> (<em>list</em>) – Optional logcat messages to
be included.</p></li>
<li><p><strong>format</strong> (<em>str</em>) – Optional logcat format.</p></li>
<li><p><strong>filter_out_regexps</strong> (<em>list</em>) – Optional logcat messages to be
excluded.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>buffers</strong> (<em>list</em>) – Log buffers to retrieve. Valid buffers are
“radio”, “events”, and “main”. Defaults to “main”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of lines logcat output.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_process_list">
<code class="sig-name descname">get_process_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_process_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of tuples (pid, name, user) for running
processes on device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time
in seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified,
the value set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (pid, name, user) tuples for running processes
on the device.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_prop">
<code class="sig-name descname">get_prop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prop</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_prop" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets value of a property from the device via adb shell getprop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prop</strong> (<em>str</em>) – The propery name.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str value of property.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the device’s state via adb get-state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str value of adb get-state.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_sysinfo">
<code class="sig-name descname">get_sysinfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_sysinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a detailed dictionary of information strings about the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.get_top_activity">
<code class="sig-name descname">get_top_activity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.get_top_activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the top activity (focused app) reported by dumpsys</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>package name of top activity or None (cannot be determined)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.grant_runtime_permissions">
<code class="sig-name descname">grant_runtime_permissions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.grant_runtime_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Grant required runtime permissions to the specified app
(typically org.mozilla.fennec_$USER).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> – app_name: Name of application (e.g. <cite>org.mozilla.fennec</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.install_app">
<code class="sig-name descname">install_app</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span></em>, <em class="sig-param"><span class="n">replace</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.install_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs an app on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> (<em>str</em>) – The apk file name to be installed.</p></li>
<li><p><strong>replace</strong> (<em>bool</em>) – If True, replace existing application.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string - name of installed package.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.is_app_installed">
<code class="sig-name descname">is_app_installed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.is_app_installed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if an app is installed on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – name of the app to be checked.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – maximum time in seconds for any spawned
adb process to complete before throwing an ADBTimeoutError.
This timeout is per adb call. If it is not specified,
the value set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.is_device_ready">
<code class="sig-name descname">is_device_ready</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.is_device_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a device is ready for testing.</p>
<p>This method uses the android only package manager to check for
readiness.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time
in seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.is_dir">
<code class="sig-name descname">is_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.is_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if path is an existing directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if path exists on the device and is a
directory.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.is_file">
<code class="sig-name descname">is_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if path is an existing file on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The file name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if path exists on the device and is a
file.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.is_path_internal_storage">
<code class="sig-name descname">is_path_internal_storage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.is_path_internal_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the path matches an internal storage path
as defined by either ‘/sdcard’, ‘/mnt/sdcard’, or any of the
.*_STORAGE environment variables on the device otherwise False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path to test.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.is_rooted">
<em class="property">property </em><code class="sig-name descname">is_rooted</code><a class="headerlink" href="#mozdevice.ADBAndroid.is_rooted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.kill">
<code class="sig-name descname">kill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pids</span></em>, <em class="sig-param"><span class="n">sig</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills processes on the device given a list of process ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pids</strong> (<em>list</em>) – process ids to be killed.</p></li>
<li><p><strong>sig</strong> (<em>int</em>) – signal to be sent to the process.</p></li>
<li><p><strong>attempts</strong> (<em>integer</em>) – number of attempts to try to
kill the processes.</p></li>
<li><p><strong>wait</strong> (<em>integer</em>) – number of seconds to wait after each attempt.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.launch_activity">
<code class="sig-name descname">launch_activity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">activity_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">intent</span><span class="o">=</span><span class="default_value">'android.intent.action.MAIN'</span></em>, <em class="sig-param"><span class="n">moz_env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">e10s</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fail_if_running</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.launch_activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to launch an application on Android with various
debugging arguments; convenient for geckoview apps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of application (e.g.
<cite>org.mozilla.geckoview_example</cite> or <cite>org.mozilla.geckoview.test</cite>)</p></li>
<li><p><strong>activity_name</strong> (<em>str</em>) – Activity name, like <cite>GeckoViewActivity</cite>, or
<cite>TestRunnerActivity</cite>.</p></li>
<li><p><strong>intent</strong> (<em>str</em>) – Intent to launch application.</p></li>
<li><p><strong>moz_env</strong> (<em>str</em>) – Mozilla specific environment to pass into
application.</p></li>
<li><p><strong>extra_args</strong> (<em>str</em>) – Extra arguments to be parsed by the app.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL to open</p></li>
<li><p><strong>e10s</strong> (<em>bool</em>) – If True, run in multiprocess mode.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If True, wait for application to start before
returning.</p></li>
<li><p><strong>fail_if_running</strong> (<em>bool</em>) – Raise an exception if instance of
application is already running.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.launch_application">
<code class="sig-name descname">launch_application</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">activity_name</span></em>, <em class="sig-param"><span class="n">intent</span></em>, <em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extras</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fail_if_running</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">grant_runtime_permissions</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.launch_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Launches an Android application</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of application (e.g. <cite>com.android.chrome</cite>)</p></li>
<li><p><strong>activity_name</strong> (<em>str</em>) – Name of activity to launch (e.g. <cite>.Main</cite>)</p></li>
<li><p><strong>intent</strong> (<em>str</em>) – Intent to launch application with</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL to open</p></li>
<li><p><strong>extras</strong> (<em>dict</em>) – Extra arguments for application.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If True, wait for application to start before
returning.</p></li>
<li><p><strong>fail_if_running</strong> (<em>bool</em>) – Raise an exception if instance of
application is already running.</p></li>
<li><p><strong>grant_runtime_permissions</strong> (<em>bool</em>) – Grant special runtime
permissions.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.launch_fennec">
<code class="sig-name descname">launch_fennec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">intent</span><span class="o">=</span><span class="default_value">'android.intent.action.VIEW'</span></em>, <em class="sig-param"><span class="n">moz_env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fail_if_running</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.launch_fennec" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to launch Fennec on Android with various
debugging arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of fennec application (e.g.
<cite>org.mozilla.fennec</cite>)</p></li>
<li><p><strong>intent</strong> (<em>str</em>) – Intent to launch application.</p></li>
<li><p><strong>moz_env</strong> (<em>str</em>) – Mozilla specific environment to pass into
application.</p></li>
<li><p><strong>extra_args</strong> (<em>str</em>) – Extra arguments to be parsed by fennec.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL to open</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If True, wait for application to start before
returning.</p></li>
<li><p><strong>fail_if_running</strong> (<em>bool</em>) – Raise an exception if instance of
application is already running.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.list_files">
<code class="sig-name descname">list_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.list_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of files/directories contained in a directory
on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of files/directories contained in the directory.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.list_forwards">
<code class="sig-name descname">list_forwards</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.list_forwards" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of tuples specifying active forwards.</p>
<p>See <cite>ADBDevice.list_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.list_reverses">
<code class="sig-name descname">list_reverses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.list_reverses" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of tuples showing active reverse socket connections.</p>
<p>See <cite>ADBDevice.list_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.list_socket_connections">
<code class="sig-name descname">list_socket_connections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.list_socket_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of tuples specifying active socket connectionss.</p>
<p>Return values are of the form (device, local, remote).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>str</em>) – ‘forward’ to list forward socket connections
‘reverse’ to list reverse socket connections</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.ls">
<code class="sig-name descname">ls</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of matching files/directories on the device.</p>
<p>The ls method emulates the behavior of the ls shell command.
It differs from the list_files method by supporting wild cards
and returning matches even if the path is not a directory and
by allowing a recursive listing.</p>
<p>ls /sdcard always returns /sdcard and not the contents of the
sdcard path. The ls method makes the behavior consistent with
others paths by adjusting /sdcard to /sdcard/. Note this is
also the case of other sdcard related paths such as
/storage/emulated/legacy but no adjustment is made in those
cases.</p>
<p>The ls method works around a Nexus 4 bug which prevents
recursive listing of directories on the sdcard unless the path
ends with “/<em>” by adjusting sdcard paths ending in “/” to end
with “/</em>”. This adjustment is only made on official Nexus 4
builds with property ro.product.model “Nexus 4”. Note that
this will fail to return any “hidden” files or directories
which begin with “.”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Flag specifying if a recursive listing
is to be returned. If recursive is False, the returned
matches will be relative to the path. If recursive is True,
the returned matches will be absolute paths.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of files/directories contained in the directory.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.mkdir">
<code class="sig-name descname">mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">parents</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device
to be created.</p></li>
<li><p><strong>parents</strong> (<em>bool</em>) – Flag indicating if the parent directories are
also to be created. Think mkdir -p path.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.mv">
<code class="sig-name descname">mv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">destination</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.mv" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves a file or directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> – string containing the path of the source file or
directory.</p></li>
<li><p><strong>destination</strong> – string containing the path of the destination file
or directory.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.pkill">
<code class="sig-name descname">pkill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">appname</span></em>, <em class="sig-param"><span class="n">sig</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.pkill" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills a processes on the device matching a name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>appname</strong> (<em>str</em>) – The app name of the process to
be killed. Note that only the first 75 characters of the
process name are significant.</p></li>
<li><p><strong>sig</strong> (<em>int</em>) – optional signal to be sent to the process.</p></li>
<li><p><strong>attempts</strong> (<em>integer</em>) – number of attempts to try to
kill the processes.</p></li>
<li><p><strong>wait</strong> (<em>integer</em>) – number of seconds to wait after each attempt.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>root</strong> (<em>bool</em>) – Flag specifying if the command should
be executed as root.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.power_on">
<code class="sig-name descname">power_on</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the device’s power stayon value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.process_exist">
<code class="sig-name descname">process_exist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.process_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if process with name process_name is running on
device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process_name</strong> (<em>str</em>) – The name of the process
to check. Note that only the first 75 characters of the
process name are significant.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if process exists.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.pull">
<code class="sig-name descname">pull</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls a file or directory from the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote</strong> (<em>str</em>) – The path of the remote file or
directory.</p></li>
<li><p><strong>local</strong> (<em>str</em>) – The path of the local file or
directory name.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.push">
<code class="sig-name descname">push</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Pushes a file or directory to the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local</strong> (<em>str</em>) – The name of the local file or
directory name.</p></li>
<li><p><strong>remote</strong> (<em>str</em>) – The name of the remote file or
directory name.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.reboot">
<code class="sig-name descname">reboot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.reboot" title="Permalink to this definition">¶</a></dt>
<dd><p>Reboots the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
<p>reboot() reboots the device, issues an adb wait-for-device in order to
wait for the device to complete rebooting, then calls is_device_ready()
to determine if the device has completed booting.</p>
<p>If the device supports running adbd as root, adbd will be
restarted running as root. Then, if the device supports
SELinux, setenforce Permissive will be called to change
SELinux to permissive. This must be done after adbd is
restarted in order for the SELinux Permissive setting to
persist.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.remount">
<code class="sig-name descname">remount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.remount" title="Permalink to this definition">¶</a></dt>
<dd><p>Remount /system/ in read/write mode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.remove_forwards">
<code class="sig-name descname">remove_forwards</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.remove_forwards" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove existing port forwards.</p>
<p>See <cite>ADBDevice.remove_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.remove_reverses">
<code class="sig-name descname">remove_reverses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.remove_reverses" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove existing reverse socket connections.</p>
<p>See <cite>ADBDevice.remove_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.remove_socket_connections">
<code class="sig-name descname">remove_socket_connections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">local</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.remove_socket_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove existing socket connections for a given direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>str</em>) – ‘forward’ to remove forward socket connection
‘reverse’ to remove reverse socket connection</p></li>
<li><p><strong>local</strong> (<em>str</em>) – local port specifier as for ADBDevice.forward. If local
is not specified removes all forwards.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.reverse">
<code class="sig-name descname">reverse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">allow_rebind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up a reverse socket connection from device to host.</p>
<p>See <cite>ADBDevice.create_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.rm">
<code class="sig-name descname">rm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">force</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.rm" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete files or directories on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path of the remote file or directory.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Flag specifying if the command is
to be applied recursively to the target. Default is False.</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – Flag which if True will not raise an
error when attempting to delete a non-existent file. Default
is False.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.rmdir">
<code class="sig-name descname">rmdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.rmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete empty directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.run_as_package">
<em class="property">property </em><code class="sig-name descname">run_as_package</code><a class="headerlink" href="#mozdevice.ADBAndroid.run_as_package" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the package which will be used in run-as to change
the effective user executing a command.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.selinux">
<em class="property">property </em><code class="sig-name descname">selinux</code><a class="headerlink" href="#mozdevice.ADBAndroid.selinux" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if SELinux is supported, False otherwise.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.shell">
<code class="sig-name descname">shell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stdout_callback</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.shell" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a shell command on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – The command to be executed.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – Contains the environment variables and
their values.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – The directory from which to execute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBDevice constructor is used.</p></li>
<li><p><strong>stdout_callback</strong> (<em>function</em>) – Function called for each line of output.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBProcess" title="mozdevice.ADBProcess"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBProcess</span></code></a></p>
</dd>
</dl>
<p>shell() provides a low level interface for executing commands
on the device via adb shell.</p>
<p>shell() executes on the host in such as fashion that stdout
contains the stdout and stderr of the host abd process
combined with the stdout and stderr of the shell command
on the device. The exit code of shell() is the exit code of
the adb command if it was non-zero or the extracted exit code
from the output of the shell command executed on the
device.</p>
<p>The caller provides a flag indicating if the command is to be
executed as root, a string for any requested working
directory, a hash defining the environment, a string
containing shell commands, as well as a timeout period in
seconds.</p>
<p>The command line to be executed is created to set the current
directory, set the required environment variables, optionally
execute the command using su and to output the return code of
the command to stdout. The command list is created as a
command sequence separated by &amp;&amp; which will terminate the
command sequence on the first command which returns a non-zero
exit code.</p>
<p>A subprocess is spawned to execute adb shell for the device
with stdout and stderr directed to a temporary file. If the
process takes longer than the specified timeout, the process
is terminated. The return code is extracted from the stdout
and is then removed from the file.</p>
<p>It is the caller’s responsibilty to clean up by closing
the stdout temporary files.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.shell_bool">
<code class="sig-name descname">shell_bool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.shell_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a shell command on the device returning True on success
and False on failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – The command to be executed.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – Contains the environment variables and
their values.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – The directory from which to execute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.shell_output">
<code class="sig-name descname">shell_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.shell_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb shell on the device returning stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – The command to be executed.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – Contains the environment variables and their values.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – The directory from which to execute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per
adb call. The total time spent may exceed this
value. If it is not specified, the value set
in the ADBDevice constructor is used.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str - content of stdout.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.stop_application">
<code class="sig-name descname">stop_application</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.stop_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the specified application</p>
<p>For Android 3.0+, we use the “am force-stop” to do this, which
is reliable and does not require root. For earlier versions of
Android, we simply try to manually kill the processes started
by the app repeatedly until none is around any more. This is
less reliable and does require root.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of application (e.g. <cite>com.android.chrome</cite>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
<li><p><strong>root</strong> (<em>bool</em>) – Flag specifying if the command should be
executed as root.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.test_root">
<em class="property">property </em><code class="sig-name descname">test_root</code><a class="headerlink" href="#mozdevice.ADBAndroid.test_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The test_root property returns the directory on the device where
temporary test files are stored.</p>
<p>The first time test_root it is called it determines and caches a value
for the test root on the device. It determines the appropriate test
root by attempting to create a ‘proof’ directory on each of a list of
directories and returning the first successful directory as the
test_root value. The cached value for the test_root will be shared
by subsequent instances of ADBDevice if self._share_test_root is True.</p>
<p>The default list of directories checked by test_root are:</p>
<ul class="simple">
<li><p>/data/local/tmp/test_root</p></li>
</ul>
<p>You may override the default list by providing a test_root argument to
the <a class="reference internal" href="#mozdevice.ADBDevice" title="mozdevice.ADBDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBDevice</span></code></a> constructor which will then be used when
attempting to create the ‘proof’ directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.uninstall_app">
<code class="sig-name descname">uninstall_app</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">reboot</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.uninstall_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Uninstalls an app on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – The name of the app to be
uninstalled.</p></li>
<li><p><strong>reboot</strong> (<em>bool</em>) – Flag indicating that the device should
be rebooted after the app is uninstalled. No reboot occurs
if the app is not installed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBAndroid.update_app">
<code class="sig-name descname">update_app</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBAndroid.update_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates an app on the device and reboots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> (<em>str</em>) – The apk file name to be
updated.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mozdevice.ADBCommand">
<em class="property">class </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBCommand</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">adb</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">adb_host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb_port</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger_name</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">300</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_root</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>ADBCommand provides a basic interface to adb commands
which is used to provide the ‘command’ methods for the
classes ADBHost and ADBDevice.</p>
<p>ADBCommand should only be used as the base class for other
classes and should not be instantiated directly. To enforce this
restriction calling ADBCommand’s constructor will raise a
NonImplementedError exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adb</strong> (<em>str</em>) – path to adb executable. Defaults to ‘adb’.</p></li>
<li><p><strong>adb_host</strong> (<em>str</em>) – host of the adb server.</p></li>
<li><p><strong>adb_port</strong> (<em>int</em>) – port of the adb server.</p></li>
<li><p><strong>logger_name</strong> (<em>str</em>) – logging logger name. Defaults to ‘adb’.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The default maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value defaults to 300.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – provide verbose output</p></li>
<li><p><strong>use_root</strong> (<em>bool</em>) – Use root if available on device</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mozdevice</span> <span class="kn">import</span> <span class="n">ADBCommand</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">adbcommand</span> <span class="o">=</span> <span class="n">ADBCommand</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;ADBCommand can not be instantiated.&quot;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mozdevice.ADBCommand.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">device_serial</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBCommand.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be
executed.</p></li>
<li><p><strong>device_serial</strong> (<em>str</em>) – The device’s
serial number if the adb command is to be executed against
a specific device. If it is not specified, ANDROID_SERIAL
from the environment will be used if it is set.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBCommand constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBProcess" title="mozdevice.ADBProcess"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBProcess</span></code></a></p>
</dd>
</dl>
<p>command() provides a low level interface for executing
commands on the host via adb.</p>
<p>command() executes on the host in such a fashion that stdout
of the adb process is a file handle on the host and
the exit code is available as the exit code of the adb
process.</p>
<p>The caller provides a list containing commands, as well as a
timeout period in seconds.</p>
<p>A subprocess is spawned to execute adb with stdout and stderr
directed to a temporary file. If the process takes longer than
the specified timeout, the process is terminated.</p>
<p>It is the caller’s responsibilty to clean up by closing
the stdout temporary file.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBCommand.command_output">
<code class="sig-name descname">command_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">device_serial</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBCommand.command_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host returning stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be
executed.</p></li>
<li><p><strong>device_serial</strong> (<em>str</em>) – The device’s
serial number if the adb command is to be executed against
a specific device. If it is not specified, ANDROID_SERIAL
from the environment will be used if it is set.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBCommand constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str - content of stdout.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mozdevice.ADBDevice">
<em class="property">class </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBDevice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">adb_host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb_port</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">test_root</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger_name</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">300</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">device_ready_retry_wait</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">device_ready_retry_attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">use_root</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">share_test_root</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">run_as_package</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mozdevice.adb.ADBCommand</span></code></p>
<p>ADBDevice provides methods which can be used to interact with the
associated Android-based device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> (<em>str</em>) – When a string is passed in device, it
is interpreted as the device serial number. This form is not
compatible with devices containing a “:” in the serial; in
this case ValueError will be raised.  When a dictionary is
passed it must have one or both of the keys “device_serial”
and “usb”. This is compatible with the dictionaries in the
list returned by ADBHost.devices(). If the value of
device_serial is a valid serial not containing a “:” it will
be used to identify the device, otherwise the value of the usb
key, prefixed with “usb:” is used.  If None is passed and
there is exactly one device attached to the host, that device
is used. If None is passed and ANDROID_SERIAL is set in the environment,
that device is used. If there is more than one device attached and
device is None and ANDROID_SERIAL is not set in the environment, ValueError
is raised. If no device is attached the constructor will block
until a device is attached or the timeout is reached.</p></li>
<li><p><strong>adb_host</strong> (<em>str</em>) – host of the adb server to connect to.</p></li>
<li><p><strong>adb_port</strong> (<em>int</em>) – port of the adb server to connect to.</p></li>
<li><p><strong>test_root</strong> (<em>str</em>) – value containing the test root to be
used on the device. This value will be shared among all
instances of ADBDevice if share_test_root is True.</p></li>
<li><p><strong>logger_name</strong> (<em>str</em>) – logging logger name. Defaults to ‘adb’</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The default maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value defaults to 300.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – provide verbose output</p></li>
<li><p><strong>device_ready_retry_wait</strong> (<em>int</em>) – number of seconds to wait
between attempts to check if the device is ready after a
reboot.</p></li>
<li><p><strong>device_ready_retry_attempts</strong> (<em>integer</em>) – number of attempts when
checking if a device is ready.</p></li>
<li><p><strong>use_root</strong> (<em>bool</em>) – Use root if it is available on device</p></li>
<li><p><strong>share_test_root</strong> (<em>bool</em>) – True if instance should share the
same test_root value with other ADBInstances. Defaults to True.</p></li>
<li><p><strong>run_as_package</strong> (<em>str</em>) – Name of package to be used in run-as in liew of
using su.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mozdevice</span> <span class="kn">import</span> <span class="n">ADBDevice</span>

<span class="n">adbdevice</span> <span class="o">=</span> <span class="n">ADBDevice</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">adbdevice</span><span class="o">.</span><span class="n">list_files</span><span class="p">(</span><span class="s2">&quot;/mnt/sdcard&quot;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">adbdevice</span><span class="o">.</span><span class="n">process_exist</span><span class="p">(</span><span class="s2">&quot;org.mozilla.geckoview.test&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;org.mozilla.geckoview.test is running&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="mozdevice.ADBDevice.SOCKET_DIRECTION_FORWARD">
<code class="sig-name descname">SOCKET_DIRECTION_FORWARD</code><em class="property"> = 'forward'</em><a class="headerlink" href="#mozdevice.ADBDevice.SOCKET_DIRECTION_FORWARD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="mozdevice.ADBDevice.SOCKET_DIRECTION_REVERSE">
<code class="sig-name descname">SOCKET_DIRECTION_REVERSE</code><em class="property"> = 'reverse'</em><a class="headerlink" href="#mozdevice.ADBDevice.SOCKET_DIRECTION_REVERSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.batch_execute">
<code class="sig-name descname">batch_execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">commands</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.batch_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes commands to a temporary file then executes on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>commands_list</strong> (<em>list</em>) – List of commands to be run by the shell.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.chmod">
<code class="sig-name descname">chmod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">'777'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.chmod" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively changes the permissions of a directory on the
device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Flag specifying if the command should be
executed recursively.</p></li>
<li><p><strong>mask</strong> (<em>str</em>) – The octal permissions.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.chown">
<code class="sig-name descname">chown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">owner</span></em>, <em class="sig-param"><span class="n">group</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.chown" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the chown command on the provided path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – path name on the device.</p></li>
<li><p><strong>owner</strong> (<em>str</em>) – new owner of the path.</p></li>
<li><p><strong>group</strong> (<em>str</em>) – optional parameter specifying the new group the path
should belong to.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – optional value specifying whether the command should
operate on files and directories recursively.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.clear_logcat">
<code class="sig-name descname">clear_logcat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">buffers</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.clear_logcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears logcat via adb logcat -c.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per
adb call. The total time spent may exceed this
value. If it is not specified, the value set
in the ADBDevice constructor is used.</p></li>
<li><p><strong>buffers</strong> (<em>list</em>) – Log buffers to clear. Valid buffers are
“radio”, “events”, and “main”. Defaults to “main”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host against the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be
executed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBProcess" title="mozdevice.ADBProcess"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBProcess</span></code></a></p>
</dd>
</dl>
<p>command() provides a low level interface for executing
commands for a specific device on the host via adb.</p>
<p>command() executes on the host in such a fashion that stdout
of the adb process are file handles on the host and
the exit code is available as the exit code of the adb
process.</p>
<p>For executing shell commands on the device, use
ADBDevice.shell().  The caller provides a list containing
commands, as well as a timeout period in seconds.</p>
<p>A subprocess is spawned to execute adb for the device with
stdout and stderr directed to a temporary file. If the process
takes longer than the specified timeout, the process is
terminated.</p>
<p>It is the caller’s responsibilty to clean up by closing
the stdout temporary file.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.command_output">
<code class="sig-name descname">command_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.command_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host against the device returning
stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be executed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str - content of stdout.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.cp">
<code class="sig-name descname">cp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">destination</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies a file or directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> – string containing the path of the source file or
directory.</p></li>
<li><p><strong>destination</strong> – string containing the path of the destination file
or directory.</p></li>
<li><p><strong>recursive</strong> – optional boolean indicating if a recursive copy is to
be performed. Required if the source is a directory. Defaults to
False. Think cp -R source destination.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.create_socket_connection">
<code class="sig-name descname">create_socket_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">allow_rebind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.create_socket_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up a socket connection in the specified direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>str</em>) – Direction of the socket connection</p></li>
<li><p><strong>local</strong> (<em>str</em>) – Local port</p></li>
<li><p><strong>remote</strong> (<em>str</em>) – Remote port</p></li>
<li><p><strong>allow_rebind</strong> (<em>bool</em>) – Do not fail if port is already bound</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.enable_run_as_for_path">
<code class="sig-name descname">enable_run_as_for_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.enable_run_as_for_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.enforcing">
<em class="property">property </em><code class="sig-name descname">enforcing</code><a class="headerlink" href="#mozdevice.ADBDevice.enforcing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the path exists on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>root</strong> (<em>bool</em>) – Flag specifying if the command should be
executed as root.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if path exists.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">allow_rebind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forward a local port to a specific port on the device.</p>
<p>See <cite>ADBDevice.create_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_battery_percentage">
<code class="sig-name descname">get_battery_percentage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_battery_percentage" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the battery charge as a percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>battery charge as a percentage.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_file">
<code class="sig-name descname">get_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull file from device and return the file’s content</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote</strong> (<em>str</em>) – The path of the remote file.</p></li>
<li><p><strong>offset</strong> – If specified, return only content beyond this offset.</p></li>
<li><p><strong>length</strong> – If specified, limit content length accordingly.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_info">
<code class="sig-name descname">get_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">directive</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of information strings about the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directive</strong> – <dl class="simple">
<dt>information you want to get. Options are:</dt><dd><ul>
<li><p><cite>battery</cite> - battery charge as a percentage</p></li>
<li><p><cite>disk</cite> - total, free, available bytes on disk</p></li>
<li><p><cite>id</cite> - unique id of the device</p></li>
<li><p><cite>os</cite> - name of the os</p></li>
<li><p><cite>process</cite> - list of running processes (same as ps)</p></li>
<li><p><cite>systime</cite> - system time of the device</p></li>
<li><p><cite>uptime</cite> - uptime of the device</p></li>
</ul>
</dd>
</dl>
<p>If <cite>directive</cite> is <cite>None</cite>, will return all available information</p>
</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_ip_address">
<code class="sig-name descname">get_ip_address</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interfaces</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_ip_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the device’s ip address, or None if it doesn’t have one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interfaces</strong> (<em>list</em>) – Interfaces to allow, or None to allow any
non-loopback interface.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str ip address of the device or None if it could not
be found.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_logcat">
<code class="sig-name descname">get_logcat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filter_specs</span><span class="o">=</span><span class="default_value">['dalvikvm:I', 'ConnectivityService:S', 'WifiMonitor:S', 'WifiStateTracker:S', 'wpa_supplicant:S', 'NetworkStateTracker:S', 'EmulatedCamera_Camera:S', 'EmulatedCamera_Device:S', 'EmulatedCamera_FakeCamera:S', 'EmulatedCamera_FakeDevice:S', 'EmulatedCamera_CallbackNotifier:S', 'GnssLocationProvider:S', 'Hyphenator:S', 'BatteryStats:S']</span></em>, <em class="sig-param"><span class="n">format</span><span class="o">=</span><span class="default_value">'time'</span></em>, <em class="sig-param"><span class="n">filter_out_regexps</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">buffers</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_logcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the contents of the logcat file as a list of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter_specs</strong> (<em>list</em>) – Optional logcat messages to
be included.</p></li>
<li><p><strong>format</strong> (<em>str</em>) – Optional logcat format.</p></li>
<li><p><strong>filter_out_regexps</strong> (<em>list</em>) – Optional logcat messages to be
excluded.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>buffers</strong> (<em>list</em>) – Log buffers to retrieve. Valid buffers are
“radio”, “events”, and “main”. Defaults to “main”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of lines logcat output.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_process_list">
<code class="sig-name descname">get_process_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_process_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of tuples (pid, name, user) for running
processes on device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time
in seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified,
the value set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of (pid, name, user) tuples for running processes
on the device.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_prop">
<code class="sig-name descname">get_prop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prop</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_prop" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets value of a property from the device via adb shell getprop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prop</strong> (<em>str</em>) – The propery name.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str value of property.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the device’s state via adb get-state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str value of adb get-state.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_sysinfo">
<code class="sig-name descname">get_sysinfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_sysinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a detailed dictionary of information strings about the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.get_top_activity">
<code class="sig-name descname">get_top_activity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.get_top_activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the top activity (focused app) reported by dumpsys</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>package name of top activity or None (cannot be determined)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.grant_runtime_permissions">
<code class="sig-name descname">grant_runtime_permissions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.grant_runtime_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Grant required runtime permissions to the specified app
(typically org.mozilla.fennec_$USER).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> – app_name: Name of application (e.g. <cite>org.mozilla.fennec</cite>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.install_app">
<code class="sig-name descname">install_app</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span></em>, <em class="sig-param"><span class="n">replace</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.install_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs an app on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> (<em>str</em>) – The apk file name to be installed.</p></li>
<li><p><strong>replace</strong> (<em>bool</em>) – If True, replace existing application.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string - name of installed package.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.is_app_installed">
<code class="sig-name descname">is_app_installed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.is_app_installed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if an app is installed on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – name of the app to be checked.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – maximum time in seconds for any spawned
adb process to complete before throwing an ADBTimeoutError.
This timeout is per adb call. If it is not specified,
the value set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.is_device_ready">
<code class="sig-name descname">is_device_ready</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.is_device_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a device is ready for testing.</p>
<p>This method uses the android only package manager to check for
readiness.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time
in seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.is_dir">
<code class="sig-name descname">is_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.is_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if path is an existing directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if path exists on the device and is a
directory.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.is_file">
<code class="sig-name descname">is_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if path is an existing file on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The file name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if path exists on the device and is a
file.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.is_path_internal_storage">
<code class="sig-name descname">is_path_internal_storage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.is_path_internal_storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the path matches an internal storage path
as defined by either ‘/sdcard’, ‘/mnt/sdcard’, or any of the
.*_STORAGE environment variables on the device otherwise False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path to test.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.is_rooted">
<em class="property">property </em><code class="sig-name descname">is_rooted</code><a class="headerlink" href="#mozdevice.ADBDevice.is_rooted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.kill">
<code class="sig-name descname">kill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pids</span></em>, <em class="sig-param"><span class="n">sig</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills processes on the device given a list of process ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pids</strong> (<em>list</em>) – process ids to be killed.</p></li>
<li><p><strong>sig</strong> (<em>int</em>) – signal to be sent to the process.</p></li>
<li><p><strong>attempts</strong> (<em>integer</em>) – number of attempts to try to
kill the processes.</p></li>
<li><p><strong>wait</strong> (<em>integer</em>) – number of seconds to wait after each attempt.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.launch_activity">
<code class="sig-name descname">launch_activity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">activity_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">intent</span><span class="o">=</span><span class="default_value">'android.intent.action.MAIN'</span></em>, <em class="sig-param"><span class="n">moz_env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">e10s</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fail_if_running</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.launch_activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to launch an application on Android with various
debugging arguments; convenient for geckoview apps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of application (e.g.
<cite>org.mozilla.geckoview_example</cite> or <cite>org.mozilla.geckoview.test</cite>)</p></li>
<li><p><strong>activity_name</strong> (<em>str</em>) – Activity name, like <cite>GeckoViewActivity</cite>, or
<cite>TestRunnerActivity</cite>.</p></li>
<li><p><strong>intent</strong> (<em>str</em>) – Intent to launch application.</p></li>
<li><p><strong>moz_env</strong> (<em>str</em>) – Mozilla specific environment to pass into
application.</p></li>
<li><p><strong>extra_args</strong> (<em>str</em>) – Extra arguments to be parsed by the app.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL to open</p></li>
<li><p><strong>e10s</strong> (<em>bool</em>) – If True, run in multiprocess mode.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If True, wait for application to start before
returning.</p></li>
<li><p><strong>fail_if_running</strong> (<em>bool</em>) – Raise an exception if instance of
application is already running.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.launch_application">
<code class="sig-name descname">launch_application</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">activity_name</span></em>, <em class="sig-param"><span class="n">intent</span></em>, <em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extras</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fail_if_running</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">grant_runtime_permissions</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.launch_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Launches an Android application</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of application (e.g. <cite>com.android.chrome</cite>)</p></li>
<li><p><strong>activity_name</strong> (<em>str</em>) – Name of activity to launch (e.g. <cite>.Main</cite>)</p></li>
<li><p><strong>intent</strong> (<em>str</em>) – Intent to launch application with</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL to open</p></li>
<li><p><strong>extras</strong> (<em>dict</em>) – Extra arguments for application.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If True, wait for application to start before
returning.</p></li>
<li><p><strong>fail_if_running</strong> (<em>bool</em>) – Raise an exception if instance of
application is already running.</p></li>
<li><p><strong>grant_runtime_permissions</strong> (<em>bool</em>) – Grant special runtime
permissions.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.launch_fennec">
<code class="sig-name descname">launch_fennec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">intent</span><span class="o">=</span><span class="default_value">'android.intent.action.VIEW'</span></em>, <em class="sig-param"><span class="n">moz_env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fail_if_running</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.launch_fennec" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to launch Fennec on Android with various
debugging arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of fennec application (e.g.
<cite>org.mozilla.fennec</cite>)</p></li>
<li><p><strong>intent</strong> (<em>str</em>) – Intent to launch application.</p></li>
<li><p><strong>moz_env</strong> (<em>str</em>) – Mozilla specific environment to pass into
application.</p></li>
<li><p><strong>extra_args</strong> (<em>str</em>) – Extra arguments to be parsed by fennec.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL to open</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – If True, wait for application to start before
returning.</p></li>
<li><p><strong>fail_if_running</strong> (<em>bool</em>) – Raise an exception if instance of
application is already running.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.list_files">
<code class="sig-name descname">list_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.list_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of files/directories contained in a directory
on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of files/directories contained in the directory.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.list_forwards">
<code class="sig-name descname">list_forwards</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.list_forwards" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of tuples specifying active forwards.</p>
<p>See <cite>ADBDevice.list_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.list_reverses">
<code class="sig-name descname">list_reverses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.list_reverses" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of tuples showing active reverse socket connections.</p>
<p>See <cite>ADBDevice.list_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.list_socket_connections">
<code class="sig-name descname">list_socket_connections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.list_socket_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of tuples specifying active socket connectionss.</p>
<p>Return values are of the form (device, local, remote).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>str</em>) – ‘forward’ to list forward socket connections
‘reverse’ to list reverse socket connections</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.ls">
<code class="sig-name descname">ls</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of matching files/directories on the device.</p>
<p>The ls method emulates the behavior of the ls shell command.
It differs from the list_files method by supporting wild cards
and returning matches even if the path is not a directory and
by allowing a recursive listing.</p>
<p>ls /sdcard always returns /sdcard and not the contents of the
sdcard path. The ls method makes the behavior consistent with
others paths by adjusting /sdcard to /sdcard/. Note this is
also the case of other sdcard related paths such as
/storage/emulated/legacy but no adjustment is made in those
cases.</p>
<p>The ls method works around a Nexus 4 bug which prevents
recursive listing of directories on the sdcard unless the path
ends with “/<em>” by adjusting sdcard paths ending in “/” to end
with “/</em>”. This adjustment is only made on official Nexus 4
builds with property ro.product.model “Nexus 4”. Note that
this will fail to return any “hidden” files or directories
which begin with “.”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Flag specifying if a recursive listing
is to be returned. If recursive is False, the returned
matches will be relative to the path. If recursive is True,
the returned matches will be absolute paths.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of files/directories contained in the directory.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.mkdir">
<code class="sig-name descname">mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">parents</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device
to be created.</p></li>
<li><p><strong>parents</strong> (<em>bool</em>) – Flag indicating if the parent directories are
also to be created. Think mkdir -p path.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.mv">
<code class="sig-name descname">mv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">destination</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.mv" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves a file or directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> – string containing the path of the source file or
directory.</p></li>
<li><p><strong>destination</strong> – string containing the path of the destination file
or directory.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.pkill">
<code class="sig-name descname">pkill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">appname</span></em>, <em class="sig-param"><span class="n">sig</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.pkill" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills a processes on the device matching a name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>appname</strong> (<em>str</em>) – The app name of the process to
be killed. Note that only the first 75 characters of the
process name are significant.</p></li>
<li><p><strong>sig</strong> (<em>int</em>) – optional signal to be sent to the process.</p></li>
<li><p><strong>attempts</strong> (<em>integer</em>) – number of attempts to try to
kill the processes.</p></li>
<li><p><strong>wait</strong> (<em>integer</em>) – number of seconds to wait after each attempt.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>root</strong> (<em>bool</em>) – Flag specifying if the command should
be executed as root.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.power_on">
<code class="sig-name descname">power_on</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.power_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the device’s power stayon value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.process_exist">
<code class="sig-name descname">process_exist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">process_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.process_exist" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if process with name process_name is running on
device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>process_name</strong> (<em>str</em>) – The name of the process
to check. Note that only the first 75 characters of the
process name are significant.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean - True if process exists.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.pull">
<code class="sig-name descname">pull</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls a file or directory from the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote</strong> (<em>str</em>) – The path of the remote file or
directory.</p></li>
<li><p><strong>local</strong> (<em>str</em>) – The path of the local file or
directory name.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.push">
<code class="sig-name descname">push</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Pushes a file or directory to the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local</strong> (<em>str</em>) – The name of the local file or
directory name.</p></li>
<li><p><strong>remote</strong> (<em>str</em>) – The name of the remote file or
directory name.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.reboot">
<code class="sig-name descname">reboot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.reboot" title="Permalink to this definition">¶</a></dt>
<dd><p>Reboots the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – optional integer specifying the maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
<p>reboot() reboots the device, issues an adb wait-for-device in order to
wait for the device to complete rebooting, then calls is_device_ready()
to determine if the device has completed booting.</p>
<p>If the device supports running adbd as root, adbd will be
restarted running as root. Then, if the device supports
SELinux, setenforce Permissive will be called to change
SELinux to permissive. This must be done after adbd is
restarted in order for the SELinux Permissive setting to
persist.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.remount">
<code class="sig-name descname">remount</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.remount" title="Permalink to this definition">¶</a></dt>
<dd><p>Remount /system/ in read/write mode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.remove_forwards">
<code class="sig-name descname">remove_forwards</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.remove_forwards" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove existing port forwards.</p>
<p>See <cite>ADBDevice.remove_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.remove_reverses">
<code class="sig-name descname">remove_reverses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.remove_reverses" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove existing reverse socket connections.</p>
<p>See <cite>ADBDevice.remove_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.remove_socket_connections">
<code class="sig-name descname">remove_socket_connections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">direction</span></em>, <em class="sig-param"><span class="n">local</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.remove_socket_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove existing socket connections for a given direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>str</em>) – ‘forward’ to remove forward socket connection
‘reverse’ to remove reverse socket connection</p></li>
<li><p><strong>local</strong> (<em>str</em>) – local port specifier as for ADBDevice.forward. If local
is not specified removes all forwards.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.reverse">
<code class="sig-name descname">reverse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local</span></em>, <em class="sig-param"><span class="n">remote</span></em>, <em class="sig-param"><span class="n">allow_rebind</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up a reverse socket connection from device to host.</p>
<p>See <cite>ADBDevice.create_socket_connection</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.rm">
<code class="sig-name descname">rm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">force</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.rm" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete files or directories on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path of the remote file or directory.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Flag specifying if the command is
to be applied recursively to the target. Default is False.</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – Flag which if True will not raise an
error when attempting to delete a non-existent file. Default
is False.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.rmdir">
<code class="sig-name descname">rmdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.rmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete empty directory on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory name on the device.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.run_as_package">
<em class="property">property </em><code class="sig-name descname">run_as_package</code><a class="headerlink" href="#mozdevice.ADBDevice.run_as_package" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the package which will be used in run-as to change
the effective user executing a command.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.selinux">
<em class="property">property </em><code class="sig-name descname">selinux</code><a class="headerlink" href="#mozdevice.ADBDevice.selinux" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if SELinux is supported, False otherwise.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.shell">
<code class="sig-name descname">shell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stdout_callback</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.shell" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a shell command on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – The command to be executed.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – Contains the environment variables and
their values.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – The directory from which to execute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBDevice constructor is used.</p></li>
<li><p><strong>stdout_callback</strong> (<em>function</em>) – Function called for each line of output.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBProcess" title="mozdevice.ADBProcess"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBProcess</span></code></a></p>
</dd>
</dl>
<p>shell() provides a low level interface for executing commands
on the device via adb shell.</p>
<p>shell() executes on the host in such as fashion that stdout
contains the stdout and stderr of the host abd process
combined with the stdout and stderr of the shell command
on the device. The exit code of shell() is the exit code of
the adb command if it was non-zero or the extracted exit code
from the output of the shell command executed on the
device.</p>
<p>The caller provides a flag indicating if the command is to be
executed as root, a string for any requested working
directory, a hash defining the environment, a string
containing shell commands, as well as a timeout period in
seconds.</p>
<p>The command line to be executed is created to set the current
directory, set the required environment variables, optionally
execute the command using su and to output the return code of
the command to stdout. The command list is created as a
command sequence separated by &amp;&amp; which will terminate the
command sequence on the first command which returns a non-zero
exit code.</p>
<p>A subprocess is spawned to execute adb shell for the device
with stdout and stderr directed to a temporary file. If the
process takes longer than the specified timeout, the process
is terminated. The return code is extracted from the stdout
and is then removed from the file.</p>
<p>It is the caller’s responsibilty to clean up by closing
the stdout temporary files.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.shell_bool">
<code class="sig-name descname">shell_bool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.shell_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a shell command on the device returning True on success
and False on failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – The command to be executed.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – Contains the environment variables and
their values.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – The directory from which to execute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBDevice constructor is used.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.shell_output">
<code class="sig-name descname">shell_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_run_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.shell_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb shell on the device returning stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<em>str</em>) – The command to be executed.</p></li>
<li><p><strong>env</strong> (<em>dict</em>) – Contains the environment variables and their values.</p></li>
<li><p><strong>cwd</strong> (<em>str</em>) – The directory from which to execute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per
adb call. The total time spent may exceed this
value. If it is not specified, the value set
in the ADBDevice constructor is used.</p></li>
<li><p><strong>enable_run_as</strong> (<em>bool</em>) – Flag used to temporarily enable use
of run-as to execute the command.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str - content of stdout.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.stop_application">
<code class="sig-name descname">stop_application</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.stop_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the specified application</p>
<p>For Android 3.0+, we use the “am force-stop” to do this, which
is reliable and does not require root. For earlier versions of
Android, we simply try to manually kill the processes started
by the app repeatedly until none is around any more. This is
less reliable and does require root.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – Name of application (e.g. <cite>com.android.chrome</cite>)</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
<li><p><strong>root</strong> (<em>bool</em>) – Flag specifying if the command should be
executed as root.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.test_root">
<em class="property">property </em><code class="sig-name descname">test_root</code><a class="headerlink" href="#mozdevice.ADBDevice.test_root" title="Permalink to this definition">¶</a></dt>
<dd><p>The test_root property returns the directory on the device where
temporary test files are stored.</p>
<p>The first time test_root it is called it determines and caches a value
for the test root on the device. It determines the appropriate test
root by attempting to create a ‘proof’ directory on each of a list of
directories and returning the first successful directory as the
test_root value. The cached value for the test_root will be shared
by subsequent instances of ADBDevice if self._share_test_root is True.</p>
<p>The default list of directories checked by test_root are:</p>
<ul class="simple">
<li><p>/data/local/tmp/test_root</p></li>
</ul>
<p>You may override the default list by providing a test_root argument to
the <a class="reference internal" href="#mozdevice.ADBDevice" title="mozdevice.ADBDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBDevice</span></code></a> constructor which will then be used when
attempting to create the ‘proof’ directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.uninstall_app">
<code class="sig-name descname">uninstall_app</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_name</span></em>, <em class="sig-param"><span class="n">reboot</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.uninstall_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Uninstalls an app on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_name</strong> (<em>str</em>) – The name of the app to be
uninstalled.</p></li>
<li><p><strong>reboot</strong> (<em>bool</em>) – Flag indicating that the device should
be rebooted after the app is uninstalled. No reboot occurs
if the app is not installed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBDevice.update_app">
<code class="sig-name descname">update_app</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">apk_path</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDevice.update_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates an app on the device and reboots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apk_path</strong> (<em>str</em>) – The apk file name to be
updated.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADB constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mozdevice.ADBDeviceFactory">
<code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBDeviceFactory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">adb_host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb_port</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">test_root</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger_name</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">300</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">device_ready_retry_wait</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">device_ready_retry_attempts</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">use_root</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">share_test_root</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">run_as_package</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBDeviceFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>ADBDeviceFactory provides a factory for <a class="reference internal" href="#mozdevice.ADBDevice" title="mozdevice.ADBDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBDevice</span></code></a>
instances that enforces the requirement that only one
<a class="reference internal" href="#mozdevice.ADBDevice" title="mozdevice.ADBDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBDevice</span></code></a> be created for each attached device. It uses
the identical arguments as the <a class="reference internal" href="#mozdevice.ADBDevice" title="mozdevice.ADBDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBDevice</span></code></a>
constructor. This is also used to ensure that the device’s
test_root is initialized to an empty directory before tests are
run on the device.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBDevice" title="mozdevice.ADBDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBDevice</span></code></a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBDeviceFactoryError</span></code>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt id="mozdevice.ADBError">
<em class="property">exception </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBError</code><a class="headerlink" href="#mozdevice.ADBError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>ADBError is raised in situations where a command executed on a
device either exited with a non-zero exitcode or when an
unexpected error condition has occurred. Generally, ADBErrors can
be handled and the device can continue to be used.</p>
<dl class="py attribute">
<dt id="mozdevice.ADBError.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#mozdevice.ADBError.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBError.with_traceback">
<code class="sig-name descname">with_traceback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBError.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) –
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mozdevice.ADBHost">
<em class="property">class </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBHost</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">adb</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">adb_host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adb_port</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger_name</span><span class="o">=</span><span class="default_value">'adb'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">300</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBHost" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mozdevice.adb.ADBCommand</span></code></p>
<p>ADBHost provides a basic interface to adb host commands
which do not target a specific device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adb</strong> (<em>str</em>) – path to adb executable. Defaults to ‘adb’.</p></li>
<li><p><strong>adb_host</strong> (<em>str</em>) – host of the adb server.</p></li>
<li><p><strong>adb_port</strong> (<em>int</em>) – port of the adb server.</p></li>
<li><p><strong>logger_name</strong> – logging logger name. Defaults to ‘adb’.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The default maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value defaults to 300.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – provide verbose output</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a></p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mozdevice</span> <span class="kn">import</span> <span class="n">ADBHost</span>

<span class="n">adbhost</span> <span class="o">=</span> <span class="n">ADBHost</span><span class="p">()</span>
<span class="n">adbhost</span><span class="o">.</span><span class="n">start_server</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mozdevice.ADBHost.command">
<code class="sig-name descname">command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBHost.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be
executed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBHost constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBProcess" title="mozdevice.ADBProcess"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADBProcess</span></code></a></p>
</dd>
</dl>
<p>command() provides a low level interface for executing
commands on the host via adb.</p>
<p>command() executes on the host in such a fashion that stdout
of the adb process is a file handle on the host and
the exit code is available as the exit code of the adb
process.</p>
<p>The caller provides a list containing commands, as well as a
timeout period in seconds.</p>
<p>A subprocess is spawned to execute adb with stdout and stderr
directed to a temporary file. If the process takes longer than
the specified timeout, the process is terminated.</p>
<p>It is the caller’s responsibilty to clean up by closing
the stdout temporary file.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBHost.command_output">
<code class="sig-name descname">command_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmds</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBHost.command_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an adb command on the host returning stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmds</strong> (<em>list</em>) – The command and its arguments to be
executed.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – The maximum time in seconds
for any spawned adb process to complete before throwing
an ADBTimeoutError.
This timeout is per adb call. The total time spent
may exceed this value. If it is not specified, the value
set in the ADBHost constructor is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str - content of stdout.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBHost.devices">
<code class="sig-name descname">devices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBHost.devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes adb devices -l and returns a list of objects describing attached devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBHost constructor is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an object contain</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBListDevicesError</span></code>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
<p>The output of adb devices -l</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ adb devices -l
List of devices attached
b313b945               device usb:1-7 product:d2vzw model:SCH_I535 device:d2vzw
</pre></div>
</div>
<p>is parsed and placed into an object as in</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;device_serial&#39;</span><span class="p">:</span> <span class="s1">&#39;b313b945&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">:</span> <span class="s1">&#39;d2vzw&#39;</span><span class="p">,</span>
  <span class="s1">&#39;usb&#39;</span><span class="p">:</span> <span class="s1">&#39;1-7&#39;</span><span class="p">,</span> <span class="s1">&#39;device&#39;</span><span class="p">:</span> <span class="s1">&#39;d2vzw&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;SCH_I535&#39;</span> <span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBHost.kill_server">
<code class="sig-name descname">kill_server</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBHost.kill_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills the adb server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBHost constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBHost.start_server">
<code class="sig-name descname">start_server</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBHost.start_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the adb server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>int</em>) – The maximum time in
seconds for any spawned adb process to complete before
throwing an ADBTimeoutError.  This timeout is per adb call. The
total time spent may exceed this value. If it is not
specified, the value set in the ADBHost constructor is used.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#mozdevice.ADBTimeoutError" title="mozdevice.ADBTimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBTimeoutError</span></code></a>
<a class="reference internal" href="#mozdevice.ADBError" title="mozdevice.ADBError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ADBError</span></code></a></p>
</dd>
</dl>
<p>Attempting to use start_server with any adb_host value other than None
will fail with an ADBError exception.</p>
<p>You will need to start the server on the remote host via the command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>adb -a fork-server server
</pre></div>
</div>
<p>If you wish the remote adb server to restart automatically, you can
enclose the command in a loop as in:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> true<span class="p">;</span> <span class="k">do</span>
  adb -a fork-server server
<span class="k">done</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mozdevice.ADBProcess">
<em class="property">class </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBProcess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>ADBProcess encapsulates the data related to executing the adb process.</p>
<dl class="py attribute">
<dt id="mozdevice.ADBProcess.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#mozdevice.ADBProcess.args" title="Permalink to this definition">¶</a></dt>
<dd><p>command argument list.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mozdevice.ADBProcess.exitcode">
<code class="sig-name descname">exitcode</code><a class="headerlink" href="#mozdevice.ADBProcess.exitcode" title="Permalink to this definition">¶</a></dt>
<dd><p>exitcode of the process.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mozdevice.ADBProcess.proc">
<code class="sig-name descname">proc</code><a class="headerlink" href="#mozdevice.ADBProcess.proc" title="Permalink to this definition">¶</a></dt>
<dd><p>subprocess Process object used to execute the command.</p>
</dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBProcess.stdout">
<em class="property">property </em><code class="sig-name descname">stdout</code><a class="headerlink" href="#mozdevice.ADBProcess.stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the contents of stdout.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mozdevice.ADBProcess.stdout_file">
<code class="sig-name descname">stdout_file</code><a class="headerlink" href="#mozdevice.ADBProcess.stdout_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporary file handle to be used for stdout.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mozdevice.ADBProcess.timedout">
<code class="sig-name descname">timedout</code><a class="headerlink" href="#mozdevice.ADBProcess.timedout" title="Permalink to this definition">¶</a></dt>
<dd><p>boolean indicating if the command timed out.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="mozdevice.ADBProcessError">
<em class="property">exception </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBProcessError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">adb_process</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBProcessError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mozdevice.adb.ADBError</span></code></p>
<p>ADBProcessError is raised when an associated ADBProcess is
available and relevant.</p>
<dl class="py attribute">
<dt id="mozdevice.ADBProcessError.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#mozdevice.ADBProcessError.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBProcessError.with_traceback">
<code class="sig-name descname">with_traceback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBProcessError.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) –
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="mozdevice.ADBTimeoutError">
<em class="property">exception </em><code class="sig-prename descclassname">mozdevice.</code><code class="sig-name descname">ADBTimeoutError</code><a class="headerlink" href="#mozdevice.ADBTimeoutError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>ADBTimeoutError is raised when either a host command or shell
command takes longer than the specified timeout to execute. The
timeout value is set in the ADBCommand constructor and is 300 seconds by
default. This error is typically fatal since the host is having
problems communicating with the device. You may be able to recover
by rebooting, but this is not guaranteed.</p>
<p>Recovery options are:</p>
<ul>
<li><p>Killing and restarting the adb server via</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adb</span> <span class="n">kill</span><span class="o">-</span><span class="n">server</span><span class="p">;</span> <span class="n">adb</span> <span class="n">start</span><span class="o">-</span><span class="n">server</span>
</pre></div>
</div>
</li>
<li><p>Rebooting the device manually.</p></li>
<li><p>Rebooting the host.</p></li>
</ul>
<dl class="py attribute">
<dt id="mozdevice.ADBTimeoutError.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#mozdevice.ADBTimeoutError.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mozdevice.ADBTimeoutError.with_traceback">
<code class="sig-name descname">with_traceback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mozdevice.ADBTimeoutError.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) –
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../python/index.html" class="btn btn-neutral float-right" title="Using third-party Python packages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="devicemanagement.html" class="btn btn-neutral float-left" title="Device management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>