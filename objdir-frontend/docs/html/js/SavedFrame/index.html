

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SavedFrame &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Welcome to GeckoView’s documentation!" href="../../mobile/android/geckoview/index.html" />
    <link rel="prev" title="Tutorial: Evaluate an Expression When a debugger; Statement Is Executed" href="../Debugger/Tutorial-Debugger-Statement.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">SpiderMonkey</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../build.html">Building SpiderMonkey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Debugger/index.html">Debugger API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SavedFrame</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#capturing-savedframe-stacks">Capturing <code class="docutils literal notranslate"><span class="pre">SavedFrame</span></code> Stacks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#from-c">From C++</a></li>
<li class="toctree-l4"><a class="reference internal" href="#from-js">From JS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#including-and-excluding-chrome-frames">Including and Excluding Chrome Frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessor-properties-of-the-savedframe-prototype-object">Accessor Properties of the <code class="docutils literal notranslate"><span class="pre">SavedFrame.prototype</span></code> Object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#source"><code class="docutils literal notranslate"><span class="pre">source</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sourceid"><code class="docutils literal notranslate"><span class="pre">sourceId</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#line"><code class="docutils literal notranslate"><span class="pre">line</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#column"><code class="docutils literal notranslate"><span class="pre">column</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#functiondisplayname"><code class="docutils literal notranslate"><span class="pre">functionDisplayName</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#asynccause"><code class="docutils literal notranslate"><span class="pre">asyncCause</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#asyncparent"><code class="docutils literal notranslate"><span class="pre">asyncParent</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#function-properties-of-the-savedframe-prototype-object">Function Properties of the <code class="docutils literal notranslate"><span class="pre">SavedFrame.prototype</span></code> Object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tostring"><code class="docutils literal notranslate"><span class="pre">toString()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">SpiderMonkey</a> &raquo;</li>
        
      <li>SavedFrame</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/js/SavedFrame/index.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="savedframe">
<h1>SavedFrame<a class="headerlink" href="#savedframe" title="Permalink to this headline">¶</a></h1>
<p>A <code class="docutils literal notranslate"><span class="pre">SavedFrame</span></code> instance is a singly linked list of stack frames. It represents a
JavaScript call stack at a past moment of execution. Younger frames hold a
reference to the frames that invoked them. The older tails are shared across
many younger frames.</p>
<p><code class="docutils literal notranslate"><span class="pre">SavedFrame</span></code> stacks should generally be captured, allocated, and live within the
compartment that is being observed or debugged. Usually this is a content
compartment.</p>
<div class="section" id="capturing-savedframe-stacks">
<h2>Capturing <code class="docutils literal notranslate"><span class="pre">SavedFrame</span></code> Stacks<a class="headerlink" href="#capturing-savedframe-stacks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="from-c">
<h3>From C++<a class="headerlink" href="#from-c" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">JS::CaptureCurrentStack</span></code> declared in <code class="docutils literal notranslate"><span class="pre">jsapi.h</span></code>.</p>
</div>
<div class="section" id="from-js">
<h3>From JS<a class="headerlink" href="#from-js" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">saveStack</span></code>, accessible via <code class="docutils literal notranslate"><span class="pre">Components.utils.getJSTestingFunction()</span></code>.</p>
</div>
</div>
<div class="section" id="including-and-excluding-chrome-frames">
<h2>Including and Excluding Chrome Frames<a class="headerlink" href="#including-and-excluding-chrome-frames" title="Permalink to this headline">¶</a></h2>
<p>Consider the following <code class="docutils literal notranslate"><span class="pre">SavedFrame</span></code> stack. Arrows represent links from child to
parent frame, <code class="docutils literal notranslate"><span class="pre">content.js</span></code> is from a compartment with content principals, and
<code class="docutils literal notranslate"><span class="pre">chrome.js</span></code> is from a compartment with chrome principals.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>function A from content.js
            |
            V
function B from chrome.js
            |
            V
function C from content.js
</pre></div>
</div>
<p>The content compartment will ever have one view of this stack: <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">C</span></code>.</p>
<p>However, a chrome compartment has a choice: it can either take the same view
that the content compartment has (<code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">C</span></code>), or it can view all stack frames,
including the frames from chrome compartments (<code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">B</span> <span class="pre">-&gt;</span> <span class="pre">C</span></code>). To view
everything, use an <code class="docutils literal notranslate"><span class="pre">XrayWrapper</span></code>. This is the default wrapper. To see the stack
as the content compartment sees it, waive the xray wrapper with
<code class="docutils literal notranslate"><span class="pre">Components.utils.waiveXrays</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">contentViewOfStack</span> <span class="o">=</span> <span class="n">Components</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">waiveXrays</span><span class="p">(</span><span class="n">someStack</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="accessor-properties-of-the-savedframe-prototype-object">
<h2>Accessor Properties of the <code class="docutils literal notranslate"><span class="pre">SavedFrame.prototype</span></code> Object<a class="headerlink" href="#accessor-properties-of-the-savedframe-prototype-object" title="Permalink to this headline">¶</a></h2>
<div class="section" id="source">
<h3><code class="docutils literal notranslate"><span class="pre">source</span></code><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h3>
<p>The source URL for this stack frame, as a string.</p>
</div>
<div class="section" id="sourceid">
<h3><code class="docutils literal notranslate"><span class="pre">sourceId</span></code><a class="headerlink" href="#sourceid" title="Permalink to this headline">¶</a></h3>
<p>The process-unique internal integer ID of this source. Usable to match up
a SavedFrame with a <a class="reference internal" href="../Debugger/Debugger.Source.html"><span class="doc">Debugger.Source</span></a> using its <code class="docutils literal notranslate"><span class="pre">id</span></code> property.</p>
</div>
<div class="section" id="line">
<h3><code class="docutils literal notranslate"><span class="pre">line</span></code><a class="headerlink" href="#line" title="Permalink to this headline">¶</a></h3>
<p>The line number for this stack frame.</p>
</div>
<div class="section" id="column">
<h3><code class="docutils literal notranslate"><span class="pre">column</span></code><a class="headerlink" href="#column" title="Permalink to this headline">¶</a></h3>
<p>The column number for this stack frame.</p>
</div>
<div class="section" id="functiondisplayname">
<h3><code class="docutils literal notranslate"><span class="pre">functionDisplayName</span></code><a class="headerlink" href="#functiondisplayname" title="Permalink to this headline">¶</a></h3>
<p>Either SpiderMonkey’s inferred name for this stack frame’s function, or
<code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</div>
<div class="section" id="asynccause">
<h3><code class="docutils literal notranslate"><span class="pre">asyncCause</span></code><a class="headerlink" href="#asynccause" title="Permalink to this headline">¶</a></h3>
<p>If this stack frame is the <code class="docutils literal notranslate"><span class="pre">asyncParent</span></code> of other stack frames, then this is
a string representing the type of asynchronous call by which this frame
invoked its children. For example, if this frame’s children are calls to
handlers for a promise this frame created, this frame’s <code class="docutils literal notranslate"><span class="pre">asyncCause</span></code> would
be <code class="docutils literal notranslate"><span class="pre">&quot;Promise&quot;</span></code>. If the asynchronous call was started in a descendant frame
to which the requester of the property does not have access, this will be
the generic string <code class="docutils literal notranslate"><span class="pre">&quot;Async&quot;</span></code>. If this is not an asynchronous call point,
this will be <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</div>
<div class="section" id="asyncparent">
<h3><code class="docutils literal notranslate"><span class="pre">asyncParent</span></code><a class="headerlink" href="#asyncparent" title="Permalink to this headline">¶</a></h3>
<p>If this stack frame was called as a result of an asynchronous operation, for
example if the function referenced by this frame is a promise handler, this
property points to the stack frame responsible for the asynchronous call,
for example where the promise was created. If the frame responsible for the
call is not accessible to the caller, this points to the youngest accessible
ancestor of the real frame, if any. In all other cases, this is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
</div>
<div class="section" id="parent">
<h3><code class="docutils literal notranslate"><span class="pre">parent</span></code><a class="headerlink" href="#parent" title="Permalink to this headline">¶</a></h3>
<p>This stack frame’s caller, or <code class="docutils literal notranslate"><span class="pre">null</span></code> if this is the oldest frame on the
stack. In this case, there might be an <code class="docutils literal notranslate"><span class="pre">asyncParent</span></code> instead.</p>
</div>
</div>
<div class="section" id="function-properties-of-the-savedframe-prototype-object">
<h2>Function Properties of the <code class="docutils literal notranslate"><span class="pre">SavedFrame.prototype</span></code> Object<a class="headerlink" href="#function-properties-of-the-savedframe-prototype-object" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tostring">
<h3><code class="docutils literal notranslate"><span class="pre">toString()</span></code><a class="headerlink" href="#tostring" title="Permalink to this headline">¶</a></h3>
<p>Return this frame and its parents formatted as a human readable stack trace
string.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../mobile/android/geckoview/index.html" class="btn btn-neutral float-right" title="Welcome to GeckoView’s documentation!" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../Debugger/Tutorial-Debugger-Statement.html" class="btn btn-neutral float-left" title="Tutorial: Evaluate an Expression When a debugger; Statement Is Executed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>