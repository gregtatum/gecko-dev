

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Feature Gates &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Search Service" href="../../../search/index.html" />
    <link rel="prev" title="Using the Mozilla symbol server" href="../../../crashreporter/crashreporter/Using_the_Mozilla_symbol_server.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Toolkit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Feature Gates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#feature-definitions">Feature Definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#targeted-values">Targeted values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fields">Fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#feature-gate-api">Feature Gate API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../search/index.html">Search Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../normandy/normandy/index.html">Shield Recipe Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../messaging-system/docs/index.html">Messaging System Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pictureinpicture/pictureinpicture/index.html">Picture-in-Picture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../prompts/prompts/index.html">Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/subprocess/toolkit_modules/subprocess/index.html">Subprocess Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glean/index.html">Firefox on Glean (FOG)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/toolkit_modules/index.html">Toolkit Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../content/toolkit_widgets/index.html">Toolkit Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/webextensions/index.html">WebExtensions API Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Toolkit</a> &raquo;</li>
        
      <li>Feature Gates</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/toolkit/components/featuregates/featuregates/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="feature-gates">
<span id="components-featuregates"></span><h1>Feature Gates<a class="headerlink" href="#feature-gates" title="Permalink to this headline">¶</a></h1>
<p>A feature gate is a high level tool to turn features on and off. It provides
metadata about features, a simple, opinionated API, and avoid many potential
pitfalls of other systems, such as using preferences directly. It is designed
to be compatible with tools that want to know and affect the state of
features in Firefox over time and in the wild.</p>
<div class="section" id="feature-definitions">
<h2>Feature Definitions<a class="headerlink" href="#feature-definitions" title="Permalink to this headline">¶</a></h2>
<p>All features must have a definition, specified in
<code class="docutils literal notranslate"><span class="pre">toolkit/components/featuregates/Features.toml</span></code>. These definitions include
data such as references to title and description strings (to be shown to users),
and bug numbers (to track the development of the feature over time). Here is an
example feature definition with an id of <code class="docutils literal notranslate"><span class="pre">demo-feature</span></code>:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[demo-feature]</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">&quot;experimental-features-demo-feature&quot;</span>
<span class="n">description</span> <span class="o">=</span> <span class="s">&quot;experimental-features-demo-feature-description&quot;</span>
<span class="n">restart-required</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">bug-numbers</span> <span class="o">=</span> <span class="k">[1479127]</span>
<span class="n">type</span> <span class="o">=</span> <span class="n">boolean</span>
<span class="n">is-public</span> <span class="o">=</span> <span class="p">{</span><span class="n">default</span> <span class="o">=</span> <span class="n">false</span><span class="p">,</span> <span class="n">nightly</span> <span class="o">=</span> <span class="n">true</span><span class="p">}</span>
<span class="n">default-value</span> <span class="o">=</span> <span class="p">{</span><span class="n">default</span> <span class="o">=</span> <span class="n">false</span><span class="p">,</span> <span class="n">nightly</span> <span class="o">=</span> <span class="n">true</span><span class="p">}</span>
</pre></div>
</div>
<p>The references defined in the <cite>title</cite> and <cite>description</cite> values point to strings
stored in <code class="docutils literal notranslate"><span class="pre">toolkit/locales/en-US/toolkit/featuregates/features.ftl</span></code>. The <cite>title</cite>
string should specify the user-facing string as the <cite>label</cite> attribute.</p>
<div class="section" id="targeted-values">
<span id="targeted-value"></span><h3>Targeted values<a class="headerlink" href="#targeted-values" title="Permalink to this headline">¶</a></h3>
<p>Several fields can take a value that indicates it varies by channel and OS.
These are known as <em>targeted values</em>. The simplest computed value is to
simply provide the value:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">default-value</span><span class="p">:</span> <span class="kc">true</span>
</pre></div>
</div>
<p>A more interesting example is to make a feature default to true on Nightly,
but be disabled otherwise. That would look like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">default-value</span><span class="p">:</span> <span class="p">{</span><span class="n">default</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">nightly</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
</pre></div>
</div>
<p>Values can depend on multiple conditions. For example, to enable a feature
only on Nightly running on Windows:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">default-value</span><span class="p">:</span> <span class="p">{</span><span class="n">default</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="s">&quot;nightly,win&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
</pre></div>
</div>
<p>Multiple sets of conditions can be specified, however use caution here: if
multiple sets could match (except <code class="docutils literal notranslate"><span class="pre">default</span></code>), the set chosen is undefined.
An example of safely using multiple conditions:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">default-value</span><span class="p">:</span> <span class="p">{</span><span class="n">default</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">nightly</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="s">&quot;beta,win&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">default</span></code> condition is required. It is used as a fallback in case no
more-specific case matches. The conditions allowed are</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">release</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">beta</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dev-edition</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nightly</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">esr</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">win</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mac</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">android</span></code></p></li>
</ul>
</div>
<div class="section" id="fields">
<h3>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>title</dt><dd><p>Required. The string ID of the human readable name for the feature, meant to be shown to
users. Should fit onto a single line. The actual string should be defined in
<code class="docutils literal notranslate"><span class="pre">toolkit/locales/en-US/toolkit/featuregates/features.ftl</span></code> with the user-facing value
defined as the <cite>label</cite> attribute of the string.</p>
</dd>
<dt>description</dt><dd><p>Required. The string ID of the human readable description for the feature, meant to be shown to
users. Should be at most a paragraph. The actual string should be defined in
<code class="docutils literal notranslate"><span class="pre">toolkit/locales/en-US/toolkit/featuregates/features.ftl</span></code>.</p>
</dd>
<dt>description-links</dt><dd><p>Optional. A dictionary of key-value pairs that are referenced in the description. The key
name must appear in the description localization text as
&lt;a data-l10n-name=”key-name”&gt;. For example in Features.toml:</p>
</dd>
</dl>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[demo-feature]</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">&quot;experimental-features-demo-feature&quot;</span>
<span class="n">description</span> <span class="o">=</span> <span class="s">&quot;experimental-features-demo-feature-description&quot;</span>
<span class="n">description-links</span> <span class="o">=</span> <span class="p">{</span><span class="n">exampleCom</span> <span class="o">=</span> <span class="s">&quot;https://example.com&quot;</span><span class="p">,</span> <span class="n">exampleOrg</span> <span class="o">=</span> <span class="s">&quot;https://example.org&quot;</span><span class="p">}</span>
<span class="n">restart-required</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">bug-numbers</span> <span class="o">=</span> <span class="k">[1479127]</span>
<span class="n">type</span> <span class="o">=</span> <span class="n">boolean</span>
<span class="n">is-public</span> <span class="o">=</span> <span class="p">{</span><span class="n">default</span> <span class="o">=</span> <span class="n">false</span><span class="p">,</span> <span class="n">nightly</span> <span class="o">=</span> <span class="n">true</span><span class="p">}</span>
<span class="n">default-value</span> <span class="o">=</span> <span class="p">{</span><span class="n">default</span> <span class="o">=</span> <span class="n">false</span><span class="p">,</span> <span class="n">nightly</span> <span class="o">=</span> <span class="n">true</span><span class="p">}</span>
</pre></div>
</div>
<p>and in features.ftl:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>experimental-features-demo-feature =
    .label = Example Demo Feature
experimental-features-demo-feature-description = Example demo feature that can point to &lt;a data-l10n-name=&quot;exampleCom&quot;&gt;.com&lt;/a&gt; links and &lt;a data-l10n-name=&quot;exampleOrg&quot;&gt;.org&lt;/a&gt; links.
</pre></div>
</div>
<dl class="simple">
<dt>bug-numbers</dt><dd><p>Required. A list of bug numbers related to this feature. This should
likely be the metabug for the the feature, but any related bugs can be
included. At least one bug is required.</p>
</dd>
<dt>restart-required</dt><dd><p>Required. If this feature requires a the browser to be restarted for changes
to take effect, this field should be <code class="docutils literal notranslate"><span class="pre">true</span></code>. Otherwise, the field should
be <code class="docutils literal notranslate"><span class="pre">false</span></code>. Features should aspire to not require restarts and react to
changes to the preference dynamically.</p>
</dd>
<dt>type</dt><dd><p>Required. The type of value this feature relates to. The only legal value is
<code class="docutils literal notranslate"><span class="pre">boolean</span></code>, but more may be added in the future.</p>
</dd>
<dt>preference</dt><dd><p>Optional. The preference used to track the feature. If a preference is not
provided, one will be automatically generated based on the feature ID. It is
not recommended to specify a preference directly, except to integrate with
older code. In the future, alternate storage mechanisms may be used if a
preference is not supplied.</p>
</dd>
<dt>default-value</dt><dd><p>Optional. This is a <a class="reference internal" href="#targeted-value">targeted value</a> describing
the value for the feature if no other changes have been made, such as in
a fresh profile. If not provided, the default for a boolean type feature
gate will be <code class="docutils literal notranslate"><span class="pre">false</span></code> for all profiles.</p>
</dd>
<dt>is-public</dt><dd><p>Optional. This is a <a class="reference internal" href="#targeted-value">targeted value</a> describing
on which branches this feature should be exposed to users. When a feature
is made public, it may show up in a future UI that allows users to opt-in
to experimental features. This is not related to <code class="docutils literal notranslate"><span class="pre">about:preferences</span></code> or
<code class="docutils literal notranslate"><span class="pre">about:config</span></code>. If not provided, the default is to make a feature
private for all channels.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="feature-gate-api">
<h2>Feature Gate API<a class="headerlink" href="#feature-gate-api" title="Permalink to this headline">¶</a></h2>
<dl class="js class">
<dt id="FeatureGate">
<em class="property">class </em><code class="sig-name descname">FeatureGate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGate" title="Permalink to this definition">¶</a></dt>
<dd><p>A high level control for turning features on and off.</p>
<dl class="js function">
<dt id="FeatureGate.addObserver">
<code class="sig-prename descclassname">FeatureGate.</code><code class="sig-name descname">addObserver</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">observer</em>, <em class="sig-param">testDefinitionsUrl</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGate.addObserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an observer for a feature gate by ID. If the feature is of type
boolean and currently enabled, <cite>onEnable</cite> will be called.</p>
<p>The underlying feature gate instance will be shared with all other callers
of this function, and share an observer.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>string</em>) – The ID of the feature’s definition in <cite>Features.toml</cite>.</p></li>
<li><p><strong>observer</strong> (<em>object</em>) – Functions to be called when the feature changes. All observer functions are optional.</p></li>
<li><p><strong>observer.onEnable</strong> (<em>function</em>) – Called when the feature becomes enabled.</p></li>
<li><p><strong>observer.onDisable</strong> (<em>function</em>) – Called when the feature becomes disabled.</p></li>
<li><p><strong>observer.onChange</strong> (<em>function</em>) – Called when the feature’s state changes to any value. The new value will be passed to the function.</p></li>
<li><p><strong>testDefinitionsUrl</strong> (<em>string</em>) – A URL from which definitions can be fetched. Only use this in tests.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>[ 'Promise' ].&lt;boolean&gt;</strong> – The current value of the feature.</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt id="FeatureGate.removeObserver">
<code class="sig-prename descclassname">FeatureGate.</code><code class="sig-name descname">removeObserver</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">observer</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGate.removeObserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an observer of changes from this feature</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>string</em>) – The ID of the feature’s definition in <cite>Features.toml</cite>.</p></li>
<li><p><strong>observer</strong> – Then observer that was passed to addObserver to remove.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt id="FeatureGate.isEnabled">
<code class="sig-prename descclassname">FeatureGate.</code><code class="sig-name descname">isEnabled</code><span class="sig-paren">(</span><em class="sig-param">id</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGate.isEnabled" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias of <cite>getValue</cite> for boolean typed feature gates.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>string</em>) – The ID of the feature’s definition in <cite>Features.toml</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Throws</dt>
<dd class="field-even"><p><strong>Error</strong> – If the feature is not a boolean.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>[ 'Promise' ].&lt;boolean&gt;</strong> – A promise for the value associated with this feature.</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt id="FeatureGate.fromId">
<code class="sig-prename descclassname">FeatureGate.</code><code class="sig-name descname">fromId</code><span class="sig-paren">(</span><em class="sig-param">id</em>, <em class="sig-param">testDefinitionsUrl</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGate.fromId" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a feature gate object that is defined in <code class="docutils literal notranslate"><span class="pre">Features.toml</span></code>.
This is the primary way to create a <code class="docutils literal notranslate"><span class="pre">FeatureGate</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>string</em>) – The ID of the feature’s definition in <cite>Features.toml</cite>.</p></li>
<li><p><strong>testDefinitionsUrl</strong> (<em>string</em>) – A URL from which definitions can be fetched. Only use this in tests.</p></li>
</ul>
</dd>
<dt class="field-even">Throws</dt>
<dd class="field-even"><p>If the <code class="docutils literal notranslate"><span class="pre">id</span></code> passed is not defined in <code class="docutils literal notranslate"><span class="pre">Features.toml</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="js class">
<dt id="FeatureGateImplementation">
<em class="property">class </em><code class="sig-name descname">FeatureGateImplementation</code><span class="sig-paren">(</span><em class="sig-param">definition</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGateImplementation" title="Permalink to this definition">¶</a></dt>
<dd><p>An individual feature gate that can be re-used for more advanced usage.</p>
<p>Feature implementors should use the methods <code class="xref py py-func docutils literal notranslate"><span class="pre">fromId()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">addListener()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">removeListener()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">removeAllListeners()</span></code>. Additionally, metadata is available for UI and
analysis.</p>
<dl class="js attribute">
<dt id="FeatureGateImplementation.id">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">id</code><a class="headerlink" href="#FeatureGateImplementation.id" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> string</p>
<p>A short string used to refer to this feature in code.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.title">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">title</code><a class="headerlink" href="#FeatureGateImplementation.title" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> string</p>
<p>A Fluent string ID that will resolve to some text to identify this feature to users.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.description">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">description</code><a class="headerlink" href="#FeatureGateImplementation.description" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> string</p>
<p>A Fluent string ID that will resolve to a longer string to show to users that explains the feature.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.type">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">type</code><a class="headerlink" href="#FeatureGateImplementation.type" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> string</p>
<p>The type of feature. Currently only booleans are supported. This may be
richer than JS types in the future, such as enum values.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.bugNumbers">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">bugNumbers</code><a class="headerlink" href="#FeatureGateImplementation.bugNumbers" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> [ ‘Array’ ].&lt;number&gt;</p>
<p>Bug numbers associated with this feature.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.isPublic">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">isPublic</code><a class="headerlink" href="#FeatureGateImplementation.isPublic" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> boolean</p>
<p>If this feature should be exposed to users in an advanced settings panel
for this build of Firefox.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.defaultValue">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">defaultValue</code><a class="headerlink" href="#FeatureGateImplementation.defaultValue" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> boolean</p>
<p>The default value for the feature gate for this update channel.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.restartRequired">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">restartRequired</code><a class="headerlink" href="#FeatureGateImplementation.restartRequired" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> boolean</p>
<p>Whether this feature requires a browser restart to take effect after toggling.</p>
</dd></dl>

<dl class="js attribute">
<dt id="FeatureGateImplementation.preference">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">preference</code><a class="headerlink" href="#FeatureGateImplementation.preference" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> string</p>
<p>The name of the preference that stores the value of this feature.</p>
<p>This preference should not be read directly, but instead its values should
be accessed via FeatureGate#addObserver or FeatureGate#getValue. This
property is provided for backwards compatibility.</p>
</dd></dl>

<dl class="js function">
<dt id="FeatureGateImplementation.addObserver">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">addObserver</code><span class="sig-paren">(</span><em class="sig-param">observer</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGateImplementation.addObserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an observer for changes to this feature. When the observer is added,
<cite>onChange</cite> will asynchronously be called with the current value of the
preference. If the feature is of type boolean and currently enabled,
<cite>onEnable</cite> will additionally be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>observer</strong> (<em>object</em>) – Functions to be called when the feature changes. All observer functions are optional.</p></li>
<li><p><strong>observer.onEnable</strong> (<em>function</em>) – Called when the feature becomes enabled.</p></li>
<li><p><strong>observer.onDisable</strong> (<em>function</em>) – Called when the feature becomes disabled.</p></li>
</ul>
</dd>
</dl>
<p>:param :
:type observer: object
:type observer.onEnable: function
:type observer.onDisable: function
:type :
:returns: <strong>[ 'Promise' ].&lt;boolean&gt;</strong> – The current value of the feature.</p>
</dd></dl>

<dl class="js function">
<dt id="FeatureGateImplementation.removeObserver">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">removeObserver</code><span class="sig-paren">(</span><em class="sig-param">observer</em><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGateImplementation.removeObserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an observer of changes from this feature</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>observer</strong> – The observer that was passed to addObserver to remove.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt id="FeatureGateImplementation.removeAllObservers">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">removeAllObservers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGateImplementation.removeAllObservers" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all observers from this instance of the feature gate.</p>
</dd></dl>

<dl class="js function">
<dt id="FeatureGateImplementation.getValue">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGateImplementation.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current value of this feature gate. Implementors should avoid
storing the result to avoid missing changes to the feature’s value.
Consider using <code class="xref py py-func docutils literal notranslate"><span class="pre">addObserver()</span></code> if it is necessary to store the value
of the feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>[ 'Promise' ].&lt;boolean&gt;</strong> – A promise for the value associated with this feature.</p>
</dd>
</dl>
</dd></dl>

<dl class="js function">
<dt id="FeatureGateImplementation.isEnabled">
<code class="sig-prename descclassname">FeatureGateImplementation.</code><code class="sig-name descname">isEnabled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#FeatureGateImplementation.isEnabled" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias of <cite>getValue</cite> for boolean typed feature gates.</p>
<dl class="field-list simple">
<dt class="field-odd">Throws</dt>
<dd class="field-odd"><p><strong>Error</strong> – If the feature is not a boolean.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>[ 'Promise' ].&lt;boolean&gt;</strong> – A promise for the value associated with this feature.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../search/index.html" class="btn btn-neutral float-right" title="Search Service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../../crashreporter/crashreporter/Using_the_Mozilla_symbol_server.html" class="btn btn-neutral float-left" title="Using the Mozilla symbol server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>