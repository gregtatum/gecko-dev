

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>taskgraph.optimize package &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>taskgraph.optimize package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/python/taskgraph.optimize.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="taskgraph-optimize-package">
<h1>taskgraph.optimize package<a class="headerlink" href="#taskgraph-optimize-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-taskgraph.optimize.backstop">
<span id="taskgraph-optimize-backstop-module"></span><h2>taskgraph.optimize.backstop module<a class="headerlink" href="#module-taskgraph.optimize.backstop" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="taskgraph.optimize.backstop.SkipUnlessBackstop">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.backstop.</code><code class="sig-name descname">SkipUnlessBackstop</code><a class="headerlink" href="#taskgraph.optimize.backstop.SkipUnlessBackstop" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<p>Always removes tasks except on backstop pushes.</p>
<dl class="py method">
<dt id="taskgraph.optimize.backstop.SkipUnlessBackstop.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">_</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.backstop.SkipUnlessBackstop.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.backstop.SkipUnlessPushInterval">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.backstop.</code><code class="sig-name descname">SkipUnlessPushInterval</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">push_interval</span></em>, <em class="sig-param"><span class="n">remove_on_projects</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.backstop.SkipUnlessPushInterval" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<p>Always removes tasks except every N pushes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>push_interval</strong> (<em>int</em>) – Number of pushes</p>
</dd>
</dl>
<dl class="py method">
<dt id="taskgraph.optimize.backstop.SkipUnlessPushInterval.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#taskgraph.optimize.backstop.SkipUnlessPushInterval.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.backstop.SkipUnlessPushInterval.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">_</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.backstop.SkipUnlessPushInterval.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-taskgraph.optimize.bugbug">
<span id="taskgraph-optimize-bugbug-module"></span><h2>taskgraph.optimize.bugbug module<a class="headerlink" href="#module-taskgraph.optimize.bugbug" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="taskgraph.optimize.bugbug.BugBugPushSchedules">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.bugbug.</code><code class="sig-name descname">BugBugPushSchedules</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">confidence_threshold</span></em>, <em class="sig-param"><span class="n">tasks_only</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_reduced_tasks</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">fallback</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">num_pushes</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">select_configs</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.bugbug.BugBugPushSchedules" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<p>Query the ‘bugbug’ service to retrieve relevant tasks and manifests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>confidence_threshold</strong> (<em>float</em>) – The minimum confidence threshold (in
range [0, 1]) needed for a task to be scheduled.</p></li>
<li><p><strong>tasks_only</strong> (<em>bool</em>) – Whether or not to only use tasks and no groups
(default: False)</p></li>
<li><p><strong>use_reduced_tasks</strong> (<em>bool</em>) – Whether or not to use the reduced set of tasks
provided by the bugbug service (default: False).</p></li>
<li><p><strong>fallback</strong> (<em>str</em>) – The fallback strategy to use if there
was a failure in bugbug (default: None)</p></li>
<li><p><strong>num_pushes</strong> (<em>int</em>) – The number of pushes to consider for the selection
(default: 1).</p></li>
<li><p><strong>select_configs</strong> (<em>bool</em>) – Whether to select configurations for manifests
too (default: False).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="taskgraph.optimize.bugbug.BugBugPushSchedules.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">importance</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.bugbug.BugBugPushSchedules.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.bugbug.DisperseGroups">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.bugbug.</code><code class="sig-name descname">DisperseGroups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_counts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unseen_modifier</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.bugbug.DisperseGroups" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<p>Disperse groups across test configs.</p>
<p>Each task has an associated ‘importance’ dict passed in via the arg. This
is of the form <cite>{&lt;group&gt;: &lt;importance&gt;}</cite>.</p>
<p>Where ‘group’ is a test group id (usually a path to a manifest), and ‘importance’ is
one of <cite>{‘lowest’, ‘low’, ‘medium’, ‘high’}</cite>.</p>
<p>Each importance value has an associated ‘count’ as defined in
<cite>self.target_counts</cite>. It guarantees that ‘manifest’ will run in at least
‘count’ different configurations (assuming there are enough tasks
containing ‘manifest’).</p>
<p>On configurations that haven’t been seen before, we’ll increase the target
count by <cite>self.unseen_modifier</cite> to increase the likelihood of scheduling a
task on that configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_counts</strong> (<em>dict</em>) – Override DEFAULT_TARGET_COUNTS with custom counts. This
is a dict mapping the importance value (‘lowest’, ‘low’, etc) to the
minimum number of configurations manifests with this value should run
on.</p></li>
<li><p><strong>unseen_modifier</strong> (<em>int</em>) – Override DEFAULT_UNSEEN_MODIFIER to a custom
value. This is the amount we’ll increase ‘target_count’ by for unseen
configurations.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="taskgraph.optimize.bugbug.DisperseGroups.DEFAULT_TARGET_COUNTS">
<code class="sig-name descname">DEFAULT_TARGET_COUNTS</code><em class="property"> = {'high': 3, 'low': 1, 'lowest': 0, 'medium': 2}</em><a class="headerlink" href="#taskgraph.optimize.bugbug.DisperseGroups.DEFAULT_TARGET_COUNTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.bugbug.DisperseGroups.DEFAULT_UNSEEN_MODIFIER">
<code class="sig-name descname">DEFAULT_UNSEEN_MODIFIER</code><em class="property"> = 1</em><a class="headerlink" href="#taskgraph.optimize.bugbug.DisperseGroups.DEFAULT_UNSEEN_MODIFIER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.bugbug.DisperseGroups.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">importance</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.bugbug.DisperseGroups.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.bugbug.SkipUnlessDebug">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.bugbug.</code><code class="sig-name descname">SkipUnlessDebug</code><a class="headerlink" href="#taskgraph.optimize.bugbug.SkipUnlessDebug" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<p>Only run debug platforms.</p>
<dl class="py method">
<dt id="taskgraph.optimize.bugbug.SkipUnlessDebug.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.bugbug.SkipUnlessDebug.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.bugbug.merge_bugbug_replies">
<code class="sig-prename descclassname">taskgraph.optimize.bugbug.</code><code class="sig-name descname">merge_bugbug_replies</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">new_data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.bugbug.merge_bugbug_replies" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge a bugbug reply (stored in the <cite>new_data</cite> argument) into another (stored
in the <cite>data</cite> argument).</p>
</dd></dl>

</div>
<div class="section" id="module-taskgraph.optimize.schema">
<span id="taskgraph-optimize-schema-module"></span><h2>taskgraph.optimize.schema module<a class="headerlink" href="#module-taskgraph.optimize.schema" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="taskgraph.optimize.schema.set_optimization_schema">
<code class="sig-prename descclassname">taskgraph.optimize.schema.</code><code class="sig-name descname">set_optimization_schema</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema_tuple</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.schema.set_optimization_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets OptimizationSchema so it can be imported by the task transform.
This function is called by projects that extend Firefox’s taskgraph.
It should be called by the project’s taskgraph:register function before
any transport or job runner code is imported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema_tuple</strong> (<em>tuple</em>) – Tuple of possible optimization strategies</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-taskgraph.optimize.strategies">
<span id="taskgraph-optimize-strategies-module"></span><h2>taskgraph.optimize.strategies module<a class="headerlink" href="#module-taskgraph.optimize.strategies" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="taskgraph.optimize.strategies.IndexSearch">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.strategies.</code><code class="sig-name descname">IndexSearch</code><a class="headerlink" href="#taskgraph.optimize.strategies.IndexSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<dl class="py method">
<dt id="taskgraph.optimize.strategies.IndexSearch.should_replace_task">
<code class="sig-name descname">should_replace_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">index_paths</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.strategies.IndexSearch.should_replace_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Look for a task with one of the given index paths</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.strategies.SkipUnlessChanged">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.strategies.</code><code class="sig-name descname">SkipUnlessChanged</code><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessChanged" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<dl class="py method">
<dt id="taskgraph.optimize.strategies.SkipUnlessChanged.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">file_patterns</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessChanged.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.strategies.SkipUnlessHasRelevantTests">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.strategies.</code><code class="sig-name descname">SkipUnlessHasRelevantTests</code><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessHasRelevantTests" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<p>Optimizes tasks that don’t run any tests that were
in child directories of a modified file.</p>
<dl class="py method">
<dt id="taskgraph.optimize.strategies.SkipUnlessHasRelevantTests.get_changed_dirs">
<code class="sig-name descname">get_changed_dirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">repo</span></em>, <em class="sig-param"><span class="n">rev</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessHasRelevantTests.get_changed_dirs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.strategies.SkipUnlessHasRelevantTests.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">_</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessHasRelevantTests.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.strategies.SkipUnlessSchedules">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.strategies.</code><code class="sig-name descname">SkipUnlessSchedules</code><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessSchedules" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<dl class="py method">
<dt id="taskgraph.optimize.strategies.SkipUnlessSchedules.scheduled_by_push">
<code class="sig-name descname">scheduled_by_push</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">repository</span></em>, <em class="sig-param"><span class="n">revision</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessSchedules.scheduled_by_push" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.strategies.SkipUnlessSchedules.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">conditions</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.strategies.SkipUnlessSchedules.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-taskgraph.optimize">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-taskgraph.optimize" title="Permalink to this headline">¶</a></h2>
<p>The objective of optimization is to remove as many tasks from the graph as
possible, as efficiently as possible, thereby delivering useful results as
quickly as possible.  For example, ideally if only a test script is modified in
a push, then the resulting graph contains only the corresponding test suite
task.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">taskcluster/docs/optimization.rst</span></code> for more information.</p>
<dl class="py class">
<dt id="taskgraph.optimize.Alias">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">Alias</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">strategy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.CompositeStrategy" title="taskgraph.optimize.CompositeStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.CompositeStrategy</span></code></a></p>
<p>Provides an alias to an existing strategy.</p>
<p>This can be useful to swap strategies in and out without needing to modify
the task transforms.</p>
<dl class="py method">
<dt id="taskgraph.optimize.Alias.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#taskgraph.optimize.Alias.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A textual description of the combined substrategies.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.Alias.reduce">
<code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Alias.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Given all substrategy results as a generator, return the overall
result.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.All">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">All</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">substrategies</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.All" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.CompositeStrategy" title="taskgraph.optimize.CompositeStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.CompositeStrategy</span></code></a></p>
<p>Given one or more optimization strategies, remove or replace a task if all of them
says to.</p>
<p>Replacement will use the value returned by the first strategy passed in.
Note the values used for replacement need not be the same, as long as they
all say to replace.</p>
<dl class="py method">
<dt id="taskgraph.optimize.All.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#taskgraph.optimize.All.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A textual description of the combined substrategies.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.All.reduce">
<em class="property">classmethod </em><code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.All.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Given all substrategy results as a generator, return the overall
result.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.Always">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">Always</code><a class="headerlink" href="#taskgraph.optimize.Always" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<dl class="py method">
<dt id="taskgraph.optimize.Always.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Always.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.Any">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">Any</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">substrategies</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Any" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.CompositeStrategy" title="taskgraph.optimize.CompositeStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.CompositeStrategy</span></code></a></p>
<p>Given one or more optimization strategies, remove or replace a task if any of them
says to.</p>
<p>Replacement will use the value returned by the first strategy that says to replace.</p>
<dl class="py method">
<dt id="taskgraph.optimize.Any.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#taskgraph.optimize.Any.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A textual description of the combined substrategies.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.Any.reduce">
<em class="property">classmethod </em><code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Any.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Given all substrategy results as a generator, return the overall
result.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.CompositeStrategy">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">CompositeStrategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">substrategies</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.CompositeStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.OptimizationStrategy" title="taskgraph.optimize.OptimizationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.OptimizationStrategy</span></code></a></p>
<dl class="py method">
<dt id="taskgraph.optimize.CompositeStrategy.description">
<em class="property">abstract property </em><code class="sig-name descname">description</code><a class="headerlink" href="#taskgraph.optimize.CompositeStrategy.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A textual description of the combined substrategies.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.CompositeStrategy.reduce">
<em class="property">abstract </em><code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.CompositeStrategy.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Given all substrategy results as a generator, return the overall
result.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.CompositeStrategy.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.CompositeStrategy.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.CompositeStrategy.should_replace_task">
<code class="sig-name descname">should_replace_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.CompositeStrategy.should_replace_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by replacing it.  Returns a
taskId to replace this task, True to replace with nothing, or False to
keep the task.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.ExperimentalOverride">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">ExperimentalOverride</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base</span></em>, <em class="sig-param"><span class="n">overrides</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.ExperimentalOverride" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Overrides dictionaries that are stored in a container with new values.</p>
<p>This can be used to modify all strategies in a collection the same way,
presumably with strategies affecting kinds of tasks tangential to the
current context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> (<em>object</em>) – A container class supporting attribute access.</p></li>
<li><p><strong>overrides</strong> (<em>dict</em>) – Values to update any accessed dictionaries with.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.Not">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">Not</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">strategy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Not" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#taskgraph.optimize.CompositeStrategy" title="taskgraph.optimize.CompositeStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">taskgraph.optimize.CompositeStrategy</span></code></a></p>
<p>Given a strategy, returns the opposite.</p>
<dl class="py method">
<dt id="taskgraph.optimize.Not.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#taskgraph.optimize.Not.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A textual description of the combined substrategies.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.Not.reduce">
<code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.Not.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Given all substrategy results as a generator, return the overall
result.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.OptimizationStrategy">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">OptimizationStrategy</code><a class="headerlink" href="#taskgraph.optimize.OptimizationStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="taskgraph.optimize.OptimizationStrategy.should_remove_task">
<code class="sig-name descname">should_remove_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.OptimizationStrategy.should_remove_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by removing it.  Returns
True to remove.</p>
</dd></dl>

<dl class="py method">
<dt id="taskgraph.optimize.OptimizationStrategy.should_replace_task">
<code class="sig-name descname">should_replace_task</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">task</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.OptimizationStrategy.should_replace_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether to optimize this task by replacing it.  Returns a
taskId to replace this task, True to replace with nothing, or False to
keep the task.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.experimental">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">experimental</code><a class="headerlink" href="#taskgraph.optimize.experimental" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Experimental strategies either under development or used as benchmarks.</p>
<p>These run as “shadow-schedulers” on each autoland push (tier 3) and/or can be used
with <cite>./mach try auto</cite>.  E.g:</p>
<blockquote>
<div><p>./mach try auto –strategy relevant_tests</p>
</div></blockquote>
<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_debug_disperse">
<code class="sig-name descname">bugbug_debug_disperse</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_debug_disperse" title="Permalink to this definition">¶</a></dt>
<dd><p>Restricts tests to debug platforms.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_disperse_high">
<code class="sig-name descname">bugbug_disperse_high</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_disperse_high" title="Permalink to this definition">¶</a></dt>
<dd><p>Disperse tests across platforms, high confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_disperse_low">
<code class="sig-name descname">bugbug_disperse_low</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_disperse_low" title="Permalink to this definition">¶</a></dt>
<dd><p>Disperse tests across platforms, low confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_disperse_medium">
<code class="sig-name descname">bugbug_disperse_medium</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_disperse_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Disperse tests across platforms, medium confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_disperse_medium_no_unseen">
<code class="sig-name descname">bugbug_disperse_medium_no_unseen</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_disperse_medium_no_unseen" title="Permalink to this definition">¶</a></dt>
<dd><p>Disperse tests across platforms (no modified for unseen configurations), medium confidence
threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_disperse_medium_only_one">
<code class="sig-name descname">bugbug_disperse_medium_only_one</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_disperse_medium_only_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Disperse tests across platforms (one platform per group), medium confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_disperse_reduced_medium">
<code class="sig-name descname">bugbug_disperse_reduced_medium</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_disperse_reduced_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Disperse tests across platforms, medium confidence threshold with reduced tasks.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_reduced">
<code class="sig-name descname">bugbug_reduced</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_reduced" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the reduced set of tasks (and no groups) chosen by bugbug.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_reduced_high">
<code class="sig-name descname">bugbug_reduced_high</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_reduced_high" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the reduced set of tasks (and no groups) chosen by bugbug, high
confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_reduced_manifests_config_selection_medium">
<code class="sig-name descname">bugbug_reduced_manifests_config_selection_medium</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_reduced_manifests_config_selection_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose configs selected by bugbug, medium confidence threshold with reduced tasks.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_tasks_high">
<code class="sig-name descname">bugbug_tasks_high</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_tasks_high" title="Permalink to this definition">¶</a></dt>
<dd><p>Doesn’t limit platforms, high confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.bugbug_tasks_medium">
<code class="sig-name descname">bugbug_tasks_medium</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.bugbug_tasks_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Doesn’t limit platforms, medium confidence threshold.</p>
</dd></dl>

<dl class="py attribute">
<dt id="taskgraph.optimize.experimental.relevant_tests">
<code class="sig-name descname">relevant_tests</code><em class="property"> = {'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.experimental.relevant_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs task containing tests in the same directories as modified files.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.get_subgraph">
<code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">get_subgraph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_task_graph</span></em>, <em class="sig-param"><span class="n">removed_tasks</span></em>, <em class="sig-param"><span class="n">replaced_tasks</span></em>, <em class="sig-param"><span class="n">label_to_taskid</span></em>, <em class="sig-param"><span class="n">decision_task_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.get_subgraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subgraph of target_task_graph consisting only of
non-optimized tasks and edges between them.</p>
<p>To avoid losing track of taskIds for tasks optimized away, this method
simultaneously substitutes real taskIds for task labels in the graph, and
populates each task definition’s <cite>dependencies</cite> key with the appropriate
taskIds.  Task references are resolved in the process.</p>
</dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.optimize_task_graph">
<code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">optimize_task_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_task_graph</span></em>, <em class="sig-param"><span class="n">requested_tasks</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">do_not_optimize</span></em>, <em class="sig-param"><span class="n">decision_task_id</span></em>, <em class="sig-param"><span class="n">existing_tasks</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">strategy_override</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.optimize_task_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform task optimization, returning a taskgraph and a map from label to
assigned taskId, including replacement tasks.</p>
</dd></dl>

<dl class="py class">
<dt id="taskgraph.optimize.project">
<em class="property">class </em><code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">project</code><a class="headerlink" href="#taskgraph.optimize.project" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Strategies that should be applied per-project.</p>
<dl class="py attribute">
<dt id="taskgraph.optimize.project.autoland">
<code class="sig-name descname">autoland</code><em class="property"> = {'build': &lt;taskgraph.optimize.All object&gt;, 'test': &lt;taskgraph.optimize.Any object&gt;}</em><a class="headerlink" href="#taskgraph.optimize.project.autoland" title="Permalink to this definition">¶</a></dt>
<dd><p>Strategy overrides that apply to autoland.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.register_strategy">
<code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">register_strategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">()</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.register_strategy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.remove_tasks">
<code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">remove_tasks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_task_graph</span></em>, <em class="sig-param"><span class="n">requested_tasks</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">optimizations</span></em>, <em class="sig-param"><span class="n">do_not_optimize</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.remove_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the “Removing Tasks” phase, returning a set of task labels of all removed tasks.</p>
</dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.replace_tasks">
<code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">replace_tasks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_task_graph</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">optimizations</span></em>, <em class="sig-param"><span class="n">do_not_optimize</span></em>, <em class="sig-param"><span class="n">label_to_taskid</span></em>, <em class="sig-param"><span class="n">removed_tasks</span></em>, <em class="sig-param"><span class="n">existing_tasks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.replace_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the “Replacing Tasks” phase, returning a set of task labels of
all replaced tasks. The replacement taskIds are added to label_to_taskid as
a side-effect.</p>
</dd></dl>

<dl class="py function">
<dt id="taskgraph.optimize.split_bugbug_arg">
<code class="sig-prename descclassname">taskgraph.optimize.</code><code class="sig-name descname">split_bugbug_arg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em>, <em class="sig-param"><span class="n">substrategies</span></em><span class="sig-paren">)</span><a class="headerlink" href="#taskgraph.optimize.split_bugbug_arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Split args for bugbug based strategies.</p>
<p>Many bugbug based optimizations require passing an empty dict by reference
to communicate to downstream strategies. This function passes the provided
arg to the first (non bugbug) strategies and a shared empty dict to the
bugbug strategy and all substrategies after it.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>