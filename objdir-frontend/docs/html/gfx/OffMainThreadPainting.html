

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Off Main Thread Painting &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Asynchronous Panning and Zooming" href="AsyncPanZoom.html" />
    <link rel="prev" title="Layers History" href="LayersHistory.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Graphics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="GraphicsOverview.html">Graphics Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="LayersHistory.html">Layers History</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Off Main Thread Painting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="#high-level">High level</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tiling-and-parallel-painting">Tiling and parallel painting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#main-thread-rasterization">Main thread rasterization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#out-of-memory-issues">Out of memory issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#synchronization">Synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#browser-process">Browser process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#important-bugs">Important bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-links">Code links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="AsyncPanZoom.html">Asynchronous Panning and Zooming</a></li>
<li class="toctree-l2"><a class="reference internal" href="AdvancedLayers.html">Advanced Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Silk.html">Silk Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Graphics</a> &raquo;</li>
        
      <li>Off Main Thread Painting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/gfx/OffMainThreadPainting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="off-main-thread-painting">
<h1>Off Main Thread Painting<a class="headerlink" href="#off-main-thread-painting" title="Permalink to this headline">¶</a></h1>
<p>OMTP, or ‘off main thread painting’, is the component of Gecko that
allows us to perform painting of web content off of the main thread.
This gives us more time on the main thread for javascript, layout,
display list building, and other tasks which allows us to increase our
responsiveness.</p>
<p>Take a look at this <a class="reference external" href="https://mozillagfx.wordpress.com/2017/12/05/off-main-thread-painting/">blog
post</a>
for an introduction.</p>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>Painting (or rasterization) is the last operation that happens in a
layer transaction before we forward it to the compositor. At this point,
all display items have been assigned to a layer and invalid regions have
been calculated and assigned to each layer.</p>
<p>The painted layer uses a content client to acquire a buffer for
painting. The main purpose of the content client is to allow us to
retain already painted content when we are scrolling a layer. We have
two main strategies for this, rotated buffer and tiling.</p>
<p>This is implemented with two class hierarchies. <code class="docutils literal notranslate"><span class="pre">ContentClient</span></code> for
rotated buffer and <code class="docutils literal notranslate"><span class="pre">TiledContentClient</span></code> for tiling. Additionally we
have two different painted layer implementations, <code class="docutils literal notranslate"><span class="pre">ClientPaintedLayer</span></code>
and <code class="docutils literal notranslate"><span class="pre">ClientTiledPaintedLayer</span></code>.</p>
<p>The main distinction between rotated buffer and tiling is the amount of
graphics surfaces required. Rotated buffer utilizes just a single buffer
for a frame but potentially requires painting into it multiple times.
Tiling uses multiple buffers but doesn’t require painting into the
buffers multiple times.</p>
<p>Once the painted layer has a surface (or surfaces with tiling) to paint
into, they are wrapped in a <code class="docutils literal notranslate"><span class="pre">DrawTarget</span></code> of some form and a callback
to <code class="docutils literal notranslate"><span class="pre">FrameLayerBuilder</span></code> is called. This callback uses the assigned
display items and invalid regions to trigger rasterization. Each
<code class="docutils literal notranslate"><span class="pre">nsDisplayItem</span></code> has their <code class="docutils literal notranslate"><span class="pre">Paint</span></code> method called with the provided
<code class="docutils literal notranslate"><span class="pre">DrawTarget</span></code> that represents the surface, and they paint into it.</p>
</div>
<div class="section" id="high-level">
<h2>High level<a class="headerlink" href="#high-level" title="Permalink to this headline">¶</a></h2>
<p>The key abstraction that allows us to paint off of the main thread is
<code class="docutils literal notranslate"><span class="pre">DrawTargetCapture</span></code> <a class="footnote-reference brackets" href="#id13" id="id1">1</a>. <code class="docutils literal notranslate"><span class="pre">DrawTargetCapture</span></code> is a special
<code class="docutils literal notranslate"><span class="pre">DrawTarget</span></code> which records all draw commands for replaying to another
draw target in the local process. This is similar to
<code class="docutils literal notranslate"><span class="pre">DrawTargetRecording</span></code>, but only holds a reference to resources instead
of copying them into the command stream. This allows the command stream
to be much more lightweight than <code class="docutils literal notranslate"><span class="pre">DrawTargetRecording</span></code>.</p>
<p>OMTP works by instrumenting the content clients to use a capture target
for all painting <a class="footnote-reference brackets" href="#id14" id="id2">2</a> <a class="footnote-reference brackets" href="#id15" id="id3">3</a> <a class="footnote-reference brackets" href="#id16" id="id4">4</a> <a class="footnote-reference brackets" href="#id17" id="id5">5</a>. This capture draw target records all
the operations that would normally be performed directly on the
surface’s draw target. Once we have all of the commands, we send the
capture and surface draw target to the <code class="docutils literal notranslate"><span class="pre">PaintThread</span></code> <a class="footnote-reference brackets" href="#id18" id="id6">6</a> where the
commands are replayed onto the surface. Once the rasterization is done,
we forward the layer transaction to the compositor.</p>
</div>
<div class="section" id="tiling-and-parallel-painting">
<h2>Tiling and parallel painting<a class="headerlink" href="#tiling-and-parallel-painting" title="Permalink to this headline">¶</a></h2>
<p>We can make one additional improvement if we are using tiling as our
content client backend.</p>
<p>When we are tiling, the screen is subdivided into a grid of equally
sized surfaces and draw commands are performed on the tiles they affect.
Each tile is independent of the others, so we’re able to parallelize
painting by using a worker thread pool and dispatching a task for each
tile individually.</p>
<p>This is commonly referred to as P-OMTP or parallel painting.</p>
</div>
<div class="section" id="main-thread-rasterization">
<h2>Main thread rasterization<a class="headerlink" href="#main-thread-rasterization" title="Permalink to this headline">¶</a></h2>
<p>Even with OMTP it’s still possible for the main thread to perform
rasterization. A common pattern for painting code is to create a
temporary draw target, perform drawing with it, take a snapshot, and
then draw the snapshot onto the main draw target. This is done for
blurs, box shadows, text shadows, and with the basic layer manager
fallback.</p>
<p>If the temporary draw target is not a draw target capture, then this
will perform rasterization on the main thread. This can be bad as it
lowers our parallelism and can cause contention with content backends,
like Direct2D, that use locking around shared resources.</p>
<p>To work around this, we changed the main thread painting code to use a
draw target capture for these operations and added a source surface
capture <a class="footnote-reference brackets" href="#id19" id="id7">7</a> which only resolves the painting of the draw commands when
needed on the paint thread.</p>
<p>There are still possible cases we can perform main thread rasterization,
but we try and address them when they come up.</p>
</div>
<div class="section" id="out-of-memory-issues">
<h2>Out of memory issues<a class="headerlink" href="#out-of-memory-issues" title="Permalink to this headline">¶</a></h2>
<p>The web is very complex, and so we can sometimes have a large amount of
draw commands for a content paint. We’ve observed OOM errors for capture
command lists that have grown to be 200MiB large.</p>
<p>We initially tried to mitigate this by lowering the overhead of capture
command lists. We do this by filtering commands that don’t actually
change the draw target state and folding consecutive transform changes,
but that was not always enough. So we added the ability for our draw
target capture’s to flush their command lists to the surface draw target
while we are capturing on the main thread <a class="footnote-reference brackets" href="#id20" id="id8">8</a>.</p>
<p>This is triggered by a configurable memory limit. Because this
introduces a new source of main thread rasterization we try to balance
setting this too low and suffering poor performance, or setting this too
high and suffering crashes.</p>
</div>
<div class="section" id="synchronization">
<h2>Synchronization<a class="headerlink" href="#synchronization" title="Permalink to this headline">¶</a></h2>
<p>OMTP is conceptually simple, but in practice it relies on subtle code to
ensure thread safety. This was the most arguably the most difficult part
of the project.</p>
<p>There are roughly four areas that are critical.</p>
<ol class="arabic">
<li><p>Compositor message ordering</p>
<p>Immediately after we queue the async paints to be asynchronously
completed, we have a problem. We need to forward the layer
transaction at some point, but the compositor cannot process the
transaction until all async paints have finished. If it did, it could
access unfinished painted content.</p>
<p>We obviously can’t block on the async paints completing as that would
beat the whole point of OMTP. We also can’t hold off on sending the
layer transaction to <code class="docutils literal notranslate"><span class="pre">IPDL</span></code>, as we’d trigger race conditions for
messages sent after the layer transaction is built but before it is
forwarded. Reftest and other code assumes that messages sent after a
layer transaction to the compositor are processed after that layer
transaction is processed.</p>
<p>The solution is to forward the layer transaction to the compositor
over <code class="docutils literal notranslate"><span class="pre">IPDL</span></code>, but flag the message channel to start postponing
messages <a class="footnote-reference brackets" href="#id21" id="id9">9</a>. Then once all async paints have completed, we unflag
the message channel and all postponed messages are sent <a class="footnote-reference brackets" href="#id22" id="id10">10</a>. This
allows us to keep our message ordering guarantees and not have to
worry about scheduling a runnable in the future.</p>
</li>
<li><p>Texture clients</p>
<p>The backing store for content surfaces is managed by texture client.
While async paints are executing, it’s possible for shutdown or any
number of things to happen that could cause layer manager, all
layers, all content clients, and therefore all texture clients to be
destroyed. Therefore it’s important that we keep these texture
clients alive throughout async painting. Texture clients also manage
IPC resources and must be destroyed on the main thread, so we are
careful to do that <a class="footnote-reference brackets" href="#id23" id="id11">11</a>.</p>
</li>
<li><p>Double buffering</p>
<p>We currently double buffer our content painting - our content clients
only ever have zero or one texture that is available to be painted
into at any moment.</p>
<p>This implies that we cannot start async painting a layer tree while
previous async paints are still active as this would lead to awful
races. We also don’t support multiple nested sets of postponed IPC
messages to allow sending the first layer transaction to the
compositor, but not the second.</p>
<p>To prevent issues with this, we flush all active async paints before
we begin to paint a new layer transaction <a class="footnote-reference brackets" href="#id24" id="id12">12</a>.</p>
<p>There was some initial debate about implementing triple buffering for
content painting, but we have not seen evidence it would help us
significantly.</p>
</li>
<li><p>Moz2D thread safety</p>
<p>Finally, most Moz2D objects were not thread safe. We had to insert
special locking into draw target and source surface as they have a
special copy on write relationship that must be consistent even if
they are on different threads.</p>
<p>Some platform specific resources like fonts needed locking added in
order to be thread safe. We also did some work to make filter nodes
work with multiple threads executing them at the same time.</p>
</li>
</ol>
</div>
<div class="section" id="browser-process">
<h2>Browser process<a class="headerlink" href="#browser-process" title="Permalink to this headline">¶</a></h2>
<p>Currently only content processes are able to use OMTP.</p>
<p>This restriction was added because of concern about message ordering
between <code class="docutils literal notranslate"><span class="pre">APZ</span></code> and OMTP. It might be able to lifted in the future.</p>
</div>
<div class="section" id="important-bugs">
<h2>Important bugs<a class="headerlink" href="#important-bugs" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=omtp">OMTP Meta</a></p></li>
<li><p><a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1403935">Enable on
Windows</a></p></li>
<li><p><a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1422392">Enable on
OSX</a></p></li>
<li><p><a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1432531">Enable on
Linux</a></p></li>
<li><p><a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1425056">Parallel
painting</a></p></li>
</ol>
</div>
<div class="section" id="code-links">
<h2>Code links<a class="headerlink" href="#code-links" title="Permalink to this headline">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/2d/DrawTargetCapture.h#22">DrawTargetCapture</a></p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/client/ContentClient.cpp#185">Creating DrawTargetCapture for rotated
buffer</a></p>
</dd>
<dt class="label" id="id15"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/client/ClientPaintedLayer.cpp#99">Dispatch DrawTargetCapture for rotated
buffer</a></p>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/client/TiledContentClient.cpp#714">Creating DrawTargetCapture for
tiling</a></p>
</dd>
<dt class="label" id="id17"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/client/MultiTiledContentClient.cpp#288">Dispatch DrawTargetCapture for
tiling</a></p>
</dd>
<dt class="label" id="id18"><span class="brackets"><a class="fn-backref" href="#id6">6</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/PaintThread.h#53">PaintThread</a></p>
</dd>
<dt class="label" id="id19"><span class="brackets"><a class="fn-backref" href="#id7">7</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/2d/SourceSurfaceCapture.h#19">SourceSurfaceCapture</a></p>
</dd>
<dt class="label" id="id20"><span class="brackets"><a class="fn-backref" href="#id8">8</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/2d/DrawTargetCapture.h#165">Sync flushing draw
commands</a></p>
</dd>
<dt class="label" id="id21"><span class="brackets"><a class="fn-backref" href="#id9">9</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/ipc/CompositorBridgeChild.cpp#1319">Postponing messages for
PCompositorBridge</a></p>
</dd>
<dt class="label" id="id22"><span class="brackets"><a class="fn-backref" href="#id10">10</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/ipc/CompositorBridgeChild.cpp#1303">Releasing messages for
PCompositorBridge</a></p>
</dd>
<dt class="label" id="id23"><span class="brackets"><a class="fn-backref" href="#id11">11</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/ipc/CompositorBridgeChild.cpp#1170">Releasing texture clients on main
thread</a></p>
</dd>
<dt class="label" id="id24"><span class="brackets"><a class="fn-backref" href="#id12">12</a></span></dt>
<dd><p><a class="reference external" href="https://searchfox.org/mozilla-central/rev/dd965445ec47fbf3cee566eff93b301666bda0e1/gfx/layers/client/ClientLayerManager.cpp#289">Flushing async
paints</a></p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="AsyncPanZoom.html" class="btn btn-neutral float-right" title="Asynchronous Panning and Zooming" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="LayersHistory.html" class="btn btn-neutral float-left" title="Layers History" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>