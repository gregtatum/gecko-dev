

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fluent for Firefox Developers &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Guidelines for Fluent Reviewers" href="review.html" />
    <link rel="prev" title="Fluent" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Localization</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Localization</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Fluent</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Fluent for Firefox Developers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-fluent-in-gecko">Using Fluent in Gecko</a></li>
<li class="toctree-l4"><a class="reference internal" href="#major-benefits">Major Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fluent-translation-list-ftl">Fluent Translation List - FTL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#social-contract">Social Contract</a></li>
<li class="toctree-l4"><a class="reference internal" href="#markup-localization">Markup Localization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#runtime-localization">Runtime Localization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#internationalization">Internationalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#registering-new-l10n-files">Registering New L10n Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-localizations">Custom Localizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#designing-localizable-apis">Designing Localizable APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pseudolocalization">Pseudolocalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inner-structure-of-fluent">Inner Structure of Fluent</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="review.html">Guidelines for Fluent Reviewers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../migrations/index.html">Migrating Strings From Legacy or Fluent Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crosschannel/index.html">Cross-channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">L10N Glossary</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Localization</a> &raquo;</li>
        
          <li><a href="index.html">Fluent</a> &raquo;</li>
        
      <li>Fluent for Firefox Developers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/l10n/fluent/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fluent-for-firefox-developers">
<h1>Fluent for Firefox Developers<a class="headerlink" href="#fluent-for-firefox-developers" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is intended for Firefox engineers already familiar with the previous
localization systems offered by Gecko - <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Tutorial/Localization">DTD</a> and  <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Tutorial/Property_Files">StringBundle</a> - and assumes
prior experience with those systems.</p>
<div class="section" id="using-fluent-in-gecko">
<h2>Using Fluent in Gecko<a class="headerlink" href="#using-fluent-in-gecko" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://projectfluent.org/">Fluent</a> is a modern localization system introduced into
the Gecko platform with a focus on quality, performance, maintenance and completeness.</p>
<p>The legacy DTD system is deprecated, and Fluent should be used where possible.</p>
<div class="section" id="getting-a-review">
<h3>Getting a Review<a class="headerlink" href="#getting-a-review" title="Permalink to this headline">¶</a></h3>
<p>If you work on any patch that touches FTL files, you’ll need to get a review
from <a class="reference external" href="https://phabricator.services.mozilla.com/tag/fluent-reviewers/">fluent-reviewers</a>. There’s a Herald hook that automatically sets
that group as a blocking reviewer.</p>
<p>Guidelines for the review process are available <a class="reference external" href="./fluent_review.html">here</a>.</p>
</div>
</div>
<div class="section" id="major-benefits">
<h2>Major Benefits<a class="headerlink" href="#major-benefits" title="Permalink to this headline">¶</a></h2>
<p>Fluent <a class="reference external" href="https://github.com/projectfluent/fluent/wiki/Fluent-and-Standards">ties tightly</a> into the domain of internationalization
through <a class="reference external" href="https://www.unicode.org/">Unicode</a>, <a class="reference external" href="http://cldr.unicode.org/">CLDR</a> and <a class="reference external" href="http://site.icu-project.org/">ICU</a>.</p>
<p>More specifically, the most observable benefits for each group of consumers are</p>
<div class="section" id="developers">
<h3>Developers<a class="headerlink" href="#developers" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Support for XUL, XHTML, HTML, Web Components, React, JS, Python and Rust</p></li>
<li><p>Strings are available in a single, unified localization context available for both DOM and runtime code</p></li>
<li><p>Full internationalization (i18n) support: date and time formatting, number formatting, plurals, genders etc.</p></li>
<li><p>Strong focus on <a class="reference external" href="https://github.com/projectfluent/fluent/wiki/Get-Started">declarative API via DOM attributes</a></p></li>
<li><p>Extensible with custom formatters, Mozilla-specific APIs etc.</p></li>
<li><p><a class="reference external" href="https://github.com/projectfluent/fluent/wiki/Design-Principles">Separation of concerns</a>: localization details, and the added complexity of some languages, don’t leak onto the source code and are no concern for developers</p></li>
<li><p>Compound messages link a single translation unit to a single UI element</p></li>
<li><p><a class="reference external" href="https://github.com/projectfluent/fluent.js/wiki/DOM-Overlays">DOM Overlays</a> allow for localization of DOM fragments</p></li>
<li><p>Simplified build system model</p></li>
<li><p>No need for pre-processing instructions</p></li>
<li><p>Support for pseudolocalization</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="product-quality">
<h3>Product Quality<a class="headerlink" href="#product-quality" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>A robust, multilevel, <a class="reference external" href="https://github.com/projectfluent/fluent/wiki/Error-Handling">error fallback system</a> prevents XML errors and runtime errors</p></li>
<li><p>Simplified l10n API reduces the amount of l10n specific code and resulting bugs</p></li>
<li><p>Runtime localization allows for dynamic language changes and updates over-the-air</p></li>
<li><p>DOM Overlays increase localization security</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="fluent-translation-list-ftl">
<h2>Fluent Translation List - FTL<a class="headerlink" href="#fluent-translation-list-ftl" title="Permalink to this headline">¶</a></h2>
<p>Fluent introduces a file format designed specifically for easy readability
and the localization features offered by the system.</p>
<p>At first glance the format is a simple key-value store. It may look like this:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>home-page-header = Home Page

# The label of a button opening a new tab
new-tab-open = Open New Tab
</pre></div>
</div>
<p>But the FTL file format is significantly more powerful and the additional features
quickly add up. In order to familiarize yourself with the basic features,
consider reading through the <a class="reference external" href="https://projectfluent.org/fluent/guide/">Fluent Syntax Guide</a> to understand
a more complex example like:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>### These messages correspond to security and privacy user interface.
###
### Please choose simple and non-threatening language when localizing
### to help user feel in control when interacting with the UI.

## General Section

-brand-short-name = Firefox
    .gender = masculine

pref-pane =
    .title =
        { PLATFORM() -&gt;
            [windows] Options
           *[other] Preferences
        }
    .accesskey = C

# Variables:
#   $tabCount (Number) - number of container tabs to be closed
containers-disable-alert-ok-button =
    { $tabCount -&gt;
        [one] Close { $tabCount } Container Tab
       *[other] Close { $tabCount } Container Tabs
    }

update-application-info =
    You are using { -brand-short-name } Version: { $version }.
    Please read the &lt;a&gt;privacy policy&lt;/a&gt;.
</pre></div>
</div>
<p>The above, of course, is a particular selection of complex strings intended to exemplify
the new features and concepts introduced by Fluent.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>While in Fluent it’s possible to use both lowercase and uppercase characters in message
identifiers, the naming convention in Gecko is to use lowercase and hyphens, avoiding
CamelCase and underscores. For example, <cite>allow-button</cite> should be preferred to
<cite>allow_button</cite> or <cite>allowButton</cite>, unless there are technically constraints – like
identifiers generated at run-time from external sources – that make this impractical.</p>
</div>
<p>In order to ensure the quality of the output, a lot of checks and tooling
is part of the build system.
<a class="reference external" href="https://pontoon.mozilla.org/">Pontoon</a>, the main localization tool used to translate Firefox, also supports
Fluent and its features to help localizers in their work.</p>
</div>
<div class="section" id="social-contract">
<span id="fluent-tutorial-social-contract"></span><h2>Social Contract<a class="headerlink" href="#social-contract" title="Permalink to this headline">¶</a></h2>
<p>Fluent uses the concept of a <cite>social contract</cite> between developer and localizers.
This contract is established by the selection of a unique identifier, called <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">l10n</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">id</span></span></code>,
which carries a promise of being used in a particular place to carry a particular meaning.</p>
<p>The use of unique identifiers is shared with legacy localization systems in
Firefox.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>An important part of the contract is that the developer commits to treat the
localization output as <cite>opaque</cite>. That means that no concatenations, replacements
or splitting should happen after the translation is completed to generate the
desired output.</p>
</div>
<p>In return, localizers enter the social contract by promising to provide an accurate
and clean translation of the messages that match the request.</p>
<p>In Fluent, the developer is not to be bothered with inner logic and complexity that the
localization will use to construct the response. Whether <a class="reference external" href="https://en.wikipedia.org/wiki/Declension">declensions</a> or other
variant selection techniques are used is up to a localizer and their particular translation.
From the developer perspective, Fluent returns a final string to be presented to
the user, with no l10n logic required in the running code.</p>
</div>
<div class="section" id="markup-localization">
<h2>Markup Localization<a class="headerlink" href="#markup-localization" title="Permalink to this headline">¶</a></h2>
<p>To localize an element in Fluent, the developer adds a new message to
an FTL file and then has to associate an <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">l10n</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">id</span></span></code> with the element
by defining a <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">data</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">l10n</span></span><span class="operator"><span class="pre">-</span></span><span class="name other"><span class="pre">id</span></span></code> attribute:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">data-l10n-id</span><span class="o">=</span><span class="s">&quot;home-page-header&quot;</span> <span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-l10n-id</span><span class="o">=</span><span class="s">&quot;pref-pane&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<p>Fluent will take care of the rest, populating the element with the message value
in its content and all localizable attributes if defined.</p>
<p>The developer provides only a single message to localize the whole element,
including the value and selected attributes.</p>
<p>The value can be a whole fragment of DOM:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">data-l10n-id</span><span class="o">=</span><span class="s">&quot;update-application-info&quot;</span> <span class="na">data-l10n-args</span><span class="o">=</span><span class="s">&#39;{&quot;version&quot;: &quot;60.0&quot;}&#39;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">data-l10n-name</span><span class="o">=</span><span class="s">&quot;privacy-url&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://www.mozilla.org/privacy&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>-brand-short-name = Firefox
update-application-info =
    You are using { -brand-short-name } Version: { $version }.
    Please read the &lt;a data-l10n-name=&quot;privacy-url&quot;&gt;privacy policy&lt;/a&gt;.
</pre></div>
</div>
<p>Fluent will overlay the translation onto the source fragment preserving attributes like
<code class="code docutils literal notranslate"><span class="pre">class</span></code> and <code class="code docutils literal notranslate"><span class="pre">href</span></code> from the source and adding translations for the elements
inside. The resulting localized content will look like this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>&lt;p data-l10n-id=&quot;update-application-info&quot; data-l10n-args=&#39;{&quot;version&quot;: &quot;60.0&quot;}&#39;&quot;&gt;
  You are using Firefox Version: 60.0.
  Please read the &lt;a href=&quot;http://www.mozilla.org/privacy&quot;&gt;privacy policy&lt;/a&gt;.
&lt;/p&gt;
</pre></div>
</div>
<p>This operation is sanitized, and Fluent takes care of selecting which elements and
attributes can be safely provided by the localization.
The list of allowed elements and attributes is <a class="reference external" href="https://www.w3.org/TR/2011/WD-html5-20110525/text-level-semantics.html">maintained by the W3C</a>, and if
the developer needs to allow for localization of additional attributes, they can
allow them using <code class="code docutils literal notranslate"><span class="pre">data-l10n-attrs</span></code> list:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">label</span> <span class="na">data-l10n-id</span><span class="o">=</span><span class="s">&quot;search-input&quot;</span> <span class="na">data-l10n-attrs</span><span class="o">=</span><span class="s">&quot;style&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<p>The above example adds an attribute <code class="code docutils literal notranslate"><span class="pre">style</span></code> to be allowed on this
particular <code class="code docutils literal notranslate"><span class="pre">label</span></code> element.</p>
<div class="section" id="external-arguments">
<h3>External Arguments<a class="headerlink" href="#external-arguments" title="Permalink to this headline">¶</a></h3>
<p>Notice in the previous example the attribute <code class="code docutils literal notranslate"><span class="pre">data-l10n-args</span></code>, which is
a JSON object storing variables exposed by the developer to the localizer.</p>
<p>This is the main channel for the developer to provide additional variables
to be used in the localization.</p>
<p>Arguments are rarely needed for situations where it’s currently possible to use
DTD, since such variables would need to be computed from the code at runtime.
It’s worth noting that, when the <code class="code docutils literal notranslate"><span class="pre">l10n-args</span></code> are set in
the runtime code, they are in fact encoded as JSON and stored together with
<code class="code docutils literal notranslate"><span class="pre">l10n-id</span></code> as an attribute of the element.</p>
</div>
</div>
<div class="section" id="runtime-localization">
<h2>Runtime Localization<a class="headerlink" href="#runtime-localization" title="Permalink to this headline">¶</a></h2>
<p>In almost every case the JS runtime code will operate on a particular document, either
XUL, XHTML or HTML.</p>
<p>If the document has its markup already localized, then Fluent exposes a new
attribute on the <code class="code js javascript docutils literal notranslate"><span class="name builtin"><span class="pre">document</span></span></code> element - <code class="code js javascript docutils literal notranslate"><span class="name builtin"><span class="pre">document</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name other"><span class="pre">l10n</span></span></code>.</p>
<p>This property is an object of type <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">DOMLocalization</span></span></code> which maintains the main
localization context for this document and exposes it to runtime code as well.</p>
<p>With a focus on <a class="reference external" href="https://github.com/projectfluent/fluent/wiki/Good-Practices-for-Developers">declarative localization</a>, the primary method of localization is
to alter the localization attributes in the DOM. Fluent provides a method to facilitate this:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">setAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;new-panel-header&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>This will set the <code class="code docutils literal notranslate"><span class="pre">data-l10n-id</span></code> on the element and translate it before the next
animation frame.</p>
<p>The reason to use this API over manually setting the attribute is that it also
facilitates encoding l10n arguments as JSON:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">setAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;containers-disable-alert-ok-button&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">tabCount</span><span class="o">:</span> <span class="mf">5</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="section" id="non-markup-localization">
<h3>Non-Markup Localization<a class="headerlink" href="#non-markup-localization" title="Permalink to this headline">¶</a></h3>
<p>In rare cases, when the runtime code needs to retrieve the translation and not
apply it onto the DOM, Fluent provides an API to retrieve it:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="p">[</span> <span class="nx">msg</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">await</span> <span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">formatValues</span><span class="p">([</span>
  <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;remove-containers-description&quot;</span><span class="p">}</span>
<span class="p">]);</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
</pre></div>
</div>
<p>This model is heavily discouraged and should be used only in cases where the
DOM annotation is not possible.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is available as asynchronous. In case of Firefox,
the only non-DOM localizable calls are used where the output goes to
a third-party like Bluetooth, Notifications etc.
All those cases should already be asynchronous. If you can’t avoid synchronous
access, you can use <code class="docutils literal notranslate"><span class="pre">mozILocalization.formatMessagesSync</span></code> with synchronous IO.</p>
</div>
</div>
</div>
<div class="section" id="internationalization">
<h2>Internationalization<a class="headerlink" href="#internationalization" title="Permalink to this headline">¶</a></h2>
<p>The majority of internationalization issues are implicitly handled by Fluent without
any additional requirement. Full Unicode support, <a class="reference external" href="https://github.com/projectfluent/fluent/wiki/BiDi-in-Fluent">bidirectionality</a>, and
correct number formatting work without any action required from either
developer or localizer.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">setAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;welcome-message&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">userName</span><span class="o">:</span> <span class="s2">&quot;اليسع&quot;</span><span class="p">,</span>
  <span class="nx">count</span><span class="o">:</span> <span class="mf">5</span>
<span class="p">});</span>
</pre></div>
</div>
<p>A message like this localized to American English will correctly wrap the user
name in directionality marks, allowing the layout engine to determine how to
display the bidirectional text.</p>
<p>On the other hand, the same message localized to Arabic will use the Eastern Arabic
numeral for number “5”.</p>
<div class="section" id="plural-rules">
<h3>Plural Rules<a class="headerlink" href="#plural-rules" title="Permalink to this headline">¶</a></h3>
<p>The most common localization feature is the ability to provide different variants
of the same string depending on plural categories. Fluent ties into the Unicode CLDR
standard called <a class="reference external" href="http://cldr.unicode.org/index/cldr-spec/plural-rules">Plural Rules</a>.</p>
<p>In order to allow localizers to use it, all the developer has to do is to pass
an external argument number:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">setAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;unread-warning&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">unreadCount</span><span class="o">:</span> <span class="mf">5</span> <span class="p">});</span>
</pre></div>
</div>
<p>Localizers can use the argument to build a multi variant message if their
language requires that:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>unread-warning =
    { $unreadCount -&gt;
        [one] You have { $unreadCount } unread message
       *[other] You have { $unreadCount } unread messages
    }
</pre></div>
</div>
<p>If the variant selection is performed based on a number, Fluent matches that
number against literal numbers as well as its <a class="reference external" href="https://unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html">plural category</a>.</p>
<p>If the given translation doesn’t need pluralization for the string (for example
Japanese often will not), the localizer can replace it with:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>unread-warning = You have { $unreadCount } unread messages
</pre></div>
</div>
<p>and the message will preserve the social contract.</p>
<p>One additional feature is that the localizer can further improve the message by
specifying variants for particular values:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>unread-warning =
    { $unreadCount -&gt;
        [0] You have no unread messages
        [1] You have one unread message
       *[other] You have { $unreadCount } unread messages
    }
</pre></div>
</div>
<p>The advantage here is that per-locale choices don’t leak onto the source code
and the developer is not affected.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is an important distinction between a variant keyed on plural category
<cite>one</cite> and digit <cite>1</cite>. Although in English the two are synonymous, in other
languages category <cite>one</cite> may be used for other numbers.
For example in <a class="reference external" href="https://unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html#bs">Bosnian</a>, category <cite>one</cite> is used for numbers like <cite>1</cite>, <cite>21</cite>, <cite>31</cite>
and so on, and also for fractional numbers like <cite>0.1</cite>.</p>
</div>
</div>
<div class="section" id="partially-formatted-variables">
<h3>Partially-formatted variables<a class="headerlink" href="#partially-formatted-variables" title="Permalink to this headline">¶</a></h3>
<p>When it comes to formatting data, Fluent allows the developer to provide
a set of parameters for the formatter, and the localizer can fine tune some of them.
This technique is called <a class="reference external" href="https://projectfluent.org/fluent/guide/functions.html#partially-formatted-variables">partially-formatted variables</a>.</p>
<p>For example, when formatting a date, the developer can just pass a JS <code class="code js javascript docutils literal notranslate"><span class="name builtin"><span class="pre">Date</span></span></code> object,
but its default formatting will be pretty expressive. In most cases, the developer
may want to use some of the <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">Intl</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name other"><span class="pre">DateTimeFormat</span></span></code> options to select the default
representation of the date in string:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">formatValue</span><span class="p">(</span><span class="s2">&quot;welcome-message&quot;</span><span class="p">,</span> <span class="p">{</span>
<span class="nx">startDate</span><span class="o">:</span> <span class="nx">FluentDateTime</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="p">{</span>
    <span class="nx">year</span><span class="o">:</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span>
    <span class="nx">month</span><span class="o">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="nx">day</span><span class="o">:</span> <span class="s2">&quot;numeric&quot;</span>
  <span class="p">})</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>welcome-message = Your session will start date: { $startDate }
</pre></div>
</div>
<p>In most cases, that will be enough and the date would get formatted in the current
Firefox as <cite>February 28, 2018</cite>.</p>
<p>But if in some other locale the string would get too long, the localizer can fine
tune the options as well:</p>
<div class="highlight-fluent notranslate"><div class="highlight"><pre><span></span>welcome-message = Początek Twojej sesji: { DATETIME($startDate, month: &quot;short&quot;) }
</pre></div>
</div>
<p>This will adjust the length of the month token in the message to short and get formatted
in Polish as <cite>28 lut 2018</cite>.</p>
<p>At the moment Fluent supports two formatters that match JS Intl API counterparts:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>NUMBER</strong>: <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat">Intl.NumberFormat</a></p></li>
<li><p><strong>DATETIME</strong>: <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat">Intl.DateTimeFormat</a></p></li>
</ul>
</div></blockquote>
<p>With time more formatters will be added. Also, this feature is not exposed
to <code class="docutils literal notranslate"><span class="pre">setAttributes</span></code> at this point, as that serializes to JSON.</p>
</div>
</div>
<div class="section" id="registering-new-l10n-files">
<h2>Registering New L10n Files<a class="headerlink" href="#registering-new-l10n-files" title="Permalink to this headline">¶</a></h2>
<p>Fluent uses a wildcard statement, packaging all localization resources into
their component’s <cite>/localization/</cite> directory.</p>
<p>That means that, if a new file is added to a component of Firefox already
covered by Fluent like <cite>browser</cite>, it’s enough to add the new file to the
repository in a path like <cite>browser/locales/en-US/browser/component/file.ftl</cite>, and
the toolchain will package it into <cite>browser/localization/browser/component/file.ftl</cite>.</p>
<p>At runtime Firefox uses a special registry for all localization data. It will
register the browser’s <cite>/localization/</cite> directory and make all files inside it
available to be referenced.</p>
<p>To make the document localized using Fluent, all the developer has to do is add
localizable resources for Fluent API to use:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;localization&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;branding/brand.ftl&quot;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;localization&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;browser/preferences/preferences.ftl&quot;</span><span class="p">/&gt;</span>
</pre></div>
</div>
<p>The URI provided to the <code class="code html docutils literal notranslate"><span class="punctuation"><span class="pre">&lt;</span></span><span class="name tag"><span class="pre">link</span></span><span class="punctuation"><span class="pre">/&gt;</span></span></code> element are relative paths within the localization
system.</p>
</div>
<div class="section" id="custom-localizations">
<h2>Custom Localizations<a class="headerlink" href="#custom-localizations" title="Permalink to this headline">¶</a></h2>
<p>The above method creates a single localization context per document.
In almost all scenarios that’s sufficient.</p>
<p>In rare edge cases where the developer needs to fetch additional resources, or
the same resources in another language, it is possible to create additional
Localization object manually using the <cite>Localization</cite> class:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">Localization</span> <span class="p">}</span> <span class="o">=</span>
  <span class="nx">ChromeUtils</span><span class="p">.</span><span class="kr">import</span><span class="p">(</span><span class="s2">&quot;resource://gre/modules/Localization.jsm&quot;</span><span class="p">,</span> <span class="p">{});</span>


<span class="kr">const</span> <span class="nx">myL10n</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Localization</span><span class="p">([</span>
  <span class="s2">&quot;branding/brand.ftl&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser/preferences/preferences.ftl&quot;</span>
<span class="p">]);</span>


<span class="kd">let</span> <span class="p">[</span><span class="nx">isDefaultMsg</span><span class="p">,</span> <span class="nx">isNotDefaultMsg</span><span class="p">]</span> <span class="o">=</span>
  <span class="nx">await</span> <span class="nx">myL10n</span><span class="p">.</span><span class="nx">formatValues</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;is-default&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;is-not-default&quot;</span><span class="p">});</span>
</pre></div>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p>An example of a use case is the Preferences UI in Firefox, which uses the
main context to localize the UI but also to build a search index.</p>
<p>It is common to build such search index both in a current language and additionally
in English, since a lot of documentation and online help exist only in English.</p>
<p>A developer may create manually a new context with the same resources as the main one,
but hardcode it to <cite>en-US</cite> and then build the search index using both contexts.</p>
</div>
<p>By default, all <cite>Localization</cite> contexts are asynchronous. It is possible to create a synchronous
one by passing an <cite>sync = false</cite> argument to the constructor, or calling the <cite>SetIsSync(bool)</cite> method
on the class.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">Localization</span> <span class="p">}</span> <span class="o">=</span>
  <span class="nx">ChromeUtils</span><span class="p">.</span><span class="kr">import</span><span class="p">(</span><span class="s2">&quot;resource://gre/modules/Localization.jsm&quot;</span><span class="p">,</span> <span class="p">{});</span>


<span class="kr">const</span> <span class="nx">myL10n</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Localization</span><span class="p">([</span>
  <span class="s2">&quot;branding/brand.ftl&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser/preferences/preferences.ftl&quot;</span>
<span class="p">],</span> <span class="kc">false</span><span class="p">);</span>


<span class="kd">let</span> <span class="p">[</span><span class="nx">isDefaultMsg</span><span class="p">,</span> <span class="nx">isNotDefaultMsg</span><span class="p">]</span> <span class="o">=</span>
  <span class="nx">myL10n</span><span class="p">.</span><span class="nx">formatValuesSync</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;is-default&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;is-not-default&quot;</span><span class="p">});</span>
</pre></div>
</div>
<p>Synchronous contexts should be always avoided as they require synchronous I/O. If you think your use case
requires a synchronous localization context, please consult Gecko, Performance and L10n Drivers teams.</p>
</div>
<div class="section" id="designing-localizable-apis">
<h2>Designing Localizable APIs<a class="headerlink" href="#designing-localizable-apis" title="Permalink to this headline">¶</a></h2>
<p>When designing localizable APIs, the most important rule is to resolve localization as
late as possible. That means that instead of resolving strings somewhere deep in the
codebase and then passing them on, or even caching, it is highly recommended to pass
around <code class="code docutils literal notranslate"><span class="pre">l10n-id</span></code> or <code class="code docutils literal notranslate"><span class="pre">[l10n-id,</span> <span class="pre">l10n-args]</span></code> pairs until the top-most code
resolves them or applies them onto the DOM element.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>When writing tests that involve both I18n and L10n, the general rule is that
result strings are opaque. That means that the developer should not assume any particular
value and should never test against it.</p>
<p>In case of raw i18n the <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">resolvedOptions</span></span></code> method on all <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">Intl</span></span><span class="punctuation"><span class="pre">.</span></span><span class="operator"><span class="pre">*</span></span></code> formatters
makes it relatively easy. In case of localization, the recommended way is to test that
the code sets the right <code class="code docutils literal notranslate"><span class="pre">l10n-id</span></code>/<code class="code docutils literal notranslate"><span class="pre">l10n-args</span></code> attributes like this:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">testedFunction</span><span class="p">();</span>

<span class="kr">const</span> <span class="nx">l10nAttrs</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">l10n</span><span class="p">.</span><span class="nx">getAttributes</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>

<span class="nx">deepEquals</span><span class="p">(</span><span class="nx">l10nAttrs</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;my-expected-id&quot;</span><span class="p">,</span>
  <span class="nx">args</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">unreadCount</span><span class="o">:</span> <span class="mf">5</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>If the code really has to test for particular values in the localized UI, it is
always better to scan for a variable:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">testedFunction</span><span class="p">();</span>

<span class="nx">equals</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;John&quot;</span><span class="p">));</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Testing against whole values is brittle and will break when we insert Unicode
bidirectionality marks into the result string or adapt the output in other ways.</p>
</div>
</div>
<div class="section" id="pseudolocalization">
<h2>Pseudolocalization<a class="headerlink" href="#pseudolocalization" title="Permalink to this headline">¶</a></h2>
<p>When working with a Fluent-backed UI, the developer gets a new tool to test their UI
against several classes of problems.</p>
<p>Pseudolocalization is a mechanism which transforms messages on the fly, using
specific logic to help emulate how the UI will look once it gets localized.</p>
<p>The three classes of potential problems that this can help with are:</p>
<blockquote>
<div><ul>
<li><p>Hardcoded strings.</p>
<p>Turning on pseudolocalization should expose any strings that were left
hardcoded in the source, since they won’t get transformed.</p>
</li>
<li><p>UI space not adapting to longer text.</p>
<p>Many languages use longer strings than English. For example, German strings
may be 30% longer (or more). Turning on pseudolocalization is a quick way to
test how the layout handles such locales.</p>
</li>
<li><p>Bidi adaptation.</p>
<p>For many developers, testing the UI in right-to-left mode is hard. Mozilla
offers a pref <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">intl</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name other"><span class="pre">uidirection</span></span></code> which switches the direction of the layout,
but that doesn’t expose problems related to right-to-left text.
Pseudolocalization shows how a right-to-left locale will look like.</p>
</li>
</ul>
</div></blockquote>
<p>To turn on pseudolocalization, add a new string pref <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">intl</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name other"><span class="pre">l10n</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name other"><span class="pre">pseudo</span></span></code> and
select the strategy to be used:</p>
<blockquote>
<div><ul>
<li><p><code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">accented</span></span></code> - Ȧȧƈƈḗḗƞŧḗḗḓ Ḗḗƞɠŀīīşħ</p>
<p>This strategy replaces all Latin characters with their accented equivalents,
and duplicates some vowels to create roughly 30% longer strings.</p>
</li>
<li><p><code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">bidi</span></span></code> - ɥsıʅƃuƎ ıpıԐ</p>
<p>This strategy replaces all Latin characters with their 180 degree rotated versions
and enforces right to left text flow using Unicode UAX#9 <a class="reference external" href="https://www.unicode.org/reports/tr9/#Explicit_Directional_Embeddings">Explicit Directional Embeddings</a>.
In this mode, the UI directionality will also be set to right-to-left.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="inner-structure-of-fluent">
<h2>Inner Structure of Fluent<a class="headerlink" href="#inner-structure-of-fluent" title="Permalink to this headline">¶</a></h2>
<p>The inner structure of Fluent in Gecko is out of scope of this tutorial, but
since the class and file names may show up during debugging or profiling,
below is a list of major components, each with a corresponding file in <cite>/intl/l10n</cite>
modules in Gecko.</p>
<div class="section" id="fluentbundle">
<h3>FluentBundle<a class="headerlink" href="#fluentbundle" title="Permalink to this headline">¶</a></h3>
<p>FluentBundle is the lowest level API. It’s fully synchronous, contains a parser for the
FTL file format and a resolver for the logic. It is not meant to be used by
consumers directly.</p>
<p>In the future we intend to offer this layer for standardization and it may become
part of the <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">mozIntl</span></span><span class="punctuation"><span class="pre">.</span></span><span class="operator"><span class="pre">*</span></span></code> or even <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">Intl</span></span><span class="punctuation"><span class="pre">.</span></span><span class="operator"><span class="pre">*</span></span></code> API sets.</p>
<p>That part of the codebase is also the first that we’ll be looking to port to Rust.</p>
</div>
<div class="section" id="localization">
<h3>Localization<a class="headerlink" href="#localization" title="Permalink to this headline">¶</a></h3>
<p>Localization is a higher level API which uses <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">FluentBundle</span></span></code> internally but
provides a full layer of compound message formatting and robust error fall-backing.</p>
<p>It is intended for use in runtime code and contains all fundamental localization
methods.</p>
</div>
<div class="section" id="domlocalization">
<h3>DOMLocalization<a class="headerlink" href="#domlocalization" title="Permalink to this headline">¶</a></h3>
<p>DOMLocalization extends <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">Localization</span></span></code> with functionality to operate on HTML, XUL
and the DOM directly including DOM Overlays and Mutation Observers.</p>
</div>
<div class="section" id="documentl10n">
<h3>DocumentL10n<a class="headerlink" href="#documentl10n" title="Permalink to this headline">¶</a></h3>
<p>DocumentL10n implements the DocumentL10n WebIDL API and allows Document to
communicate with DOMLocalization.</p>
</div>
<div class="section" id="l10nregistry">
<h3>L10nRegistry<a class="headerlink" href="#l10nregistry" title="Permalink to this headline">¶</a></h3>
<p>L10nRegistry is our resource management service. It
maintains the state of resources packaged into the build and language packs,
providing an asynchronous iterator of <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">FluentBundle</span></span></code> objects for a given locale set
and resources that the <code class="code js javascript docutils literal notranslate"><span class="name other"><span class="pre">Localization</span></span></code> class uses.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="review.html" class="btn btn-neutral float-right" title="Guidelines for Fluent Reviewers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Fluent" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>