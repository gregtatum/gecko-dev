

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Metrics we collect &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script src="../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Custom geo, locale, and update channels" href="geo_locale.html" />
    <link rel="prev" title="Activity Stream Pings" href="data_dictionary.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Firefox</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../urlbar/index.html">Address Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../BrowserUsageTelemetry.html">Browser Usage Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../enterprisepolicies/docs/index.html">Enterprise Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extensions/formautofill/docs/index.html">Form Autofill</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Firefox Home (New Tab)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#for-jsm-files">For .jsm files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#for-js-jsx-sass-or-css-files">For .js, .jsx, .sass, or .css files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#building-assets-and-running-firefox">Building assets and running Firefox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#continuous-development-debugging">Continuous development / debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#code-coverage">Code Coverage</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#detailed-docs">Detailed Docs</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="about_home_startup_cache.html">The <code class="docutils literal notranslate"><span class="pre">about:home</span></code> startup cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_dictionary.html">Activity Stream Pings</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Metrics we collect</a></li>
<li class="toctree-l4"><a class="reference internal" href="geo_locale.html">Custom <code class="docutils literal notranslate"><span class="pre">geo</span></code>, <code class="docutils literal notranslate"><span class="pre">locale</span></code>, and update channels</a></li>
<li class="toctree-l4"><a class="reference internal" href="mochitests.html">Mochitests</a></li>
<li class="toctree-l4"><a class="reference internal" href="preferences.html">Preferences</a></li>
<li class="toctree-l4"><a class="reference internal" href="remote_cfr.html">Remote CFR Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="sections.html">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="telemetry.html">Telemetry checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="tippytop.html">TippyTop in Activity Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="unit_testing_guide.html">Unit testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installer/windows/installer/index.html">Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../toolkit/mozapps/defaultagent/default-browser-agent/index.html">Default Browser Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../content-src/asrouter/docs/index.html">Messaging System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../base/tabbrowser/index.html">tabbrowser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../touchbar/index.html">Touch Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../uitour/docs/index.html">UITour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../payments/docs/index.html">WebPayments UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Firefox</a> &raquo;</li>
        
          <li><a href="../index.html">Firefox Home (New Tab)</a> &raquo;</li>
        
      <li>Metrics we collect</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/browser/components/newtab/docs/v2-system-addon/data_events.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metrics-we-collect">
<h1>Metrics we collect<a class="headerlink" href="#metrics-we-collect" title="Permalink to this headline">¶</a></h1>
<p>By default, the about:newtab, about:welcome and about:home pages in Firefox (the pages you see when you open a new tab and when you start the browser), will send data back to Mozilla servers about usage of these pages.  The intent is to collect data in order to improve the user’s experience while using Activity Stream.  Data about your specific browsing behaior or the sites you visit is <strong>never transmitted to any Mozilla server</strong>.  At any time, it is easy to <strong>turn off</strong> this data collection by <a class="reference external" href="https://support.mozilla.org/kb/share-telemetry-data-mozilla-help-improve-firefox">opting out of Firefox telemetry</a>.</p>
<p>Data is sent to our servers in the form of discreet HTTPS ‘pings’ or messages whenever you do some action on the Activity Stream about:home, about:newtab or about:welcome pages.  We try to minimize the amount and frequency of pings by batching them together.  Pings are sent in <a class="reference external" href="http://www.json.org/">JSON serialized format</a>.</p>
<p>At Mozilla, <a class="reference external" href="https://www.mozilla.org/privacy/">we take your privacy very seriously</a>.  The Activity Stream page will never send any data that could personally identify you.  We do not transmit what you are browsing, searches you perform or any private settings.  Activity Stream does not set or send cookies, and uses <a class="reference external" href="https://en.wikipedia.org/wiki/Transport_Layer_Security">Transport Layer Security</a> to securely transmit data to Mozilla servers.</p>
<p>Data collected from Activity Stream is retained on Mozilla secured servers for a period of 30 days before being rolled up into an anonymous aggregated format.  After this period the raw data is deleted permanently.  Mozilla <strong>never shares data with any third party</strong>.</p>
<p>The following is a detailed overview of the different kinds of data we collect in the Activity Stream. See <a class="reference internal" href="data_dictionary.html"><span class="doc">data_dictionary.md</span></a> for more details for each field.</p>
<div class="section" id="health-ping">
<h2>Health ping<a class="headerlink" href="#health-ping" title="Permalink to this headline">¶</a></h2>
<p>This is a heartbeat ping indicating whether Activity Stream is currently being used or not, it’s submitted once upon the browser initialization.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;374dc4d8-0cb2-4ac5-a3cf-c5a9bc3c602e&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;62.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="o">:</span> <span class="s2">&quot;nightly&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;AS_ENABLED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">10</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where the “value” is encoded as:</p>
<ul class="simple">
<li><p>Value 0: default</p></li>
<li><p>Value 1: about:blank</p></li>
<li><p>Value 2: web extension</p></li>
<li><p>Value 3: other custom URL(s)
Two encoded integers for about:newtab and about:home are combined in a bitwise fashion. For instance, if both about:home and about:newtab were set to about:blank, then <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">=</span> <span class="pre">5</span> <span class="pre">=</span> <span class="pre">(1</span> <span class="pre">|</span> <span class="pre">(1</span> <span class="pre">&lt;&lt;</span> <span class="pre">2))</span></code>, i.e <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">=</span> <span class="pre">(bitfield</span> <span class="pre">of</span> <span class="pre">about:newtab)</span> <span class="pre">|</span> <span class="pre">(bitfield</span> <span class="pre">of</span> <span class="pre">about:newhome</span> <span class="pre">&lt;&lt;</span> <span class="pre">2)</span></code>.</p></li>
</ul>
</div>
<div class="section" id="page-takeover-ping">
<h2>Page takeover ping<a class="headerlink" href="#page-takeover-ping" title="Permalink to this headline">¶</a></h2>
<p>This ping is submitted once upon Activity Stream initialization if either about:home or about:newtab are set to a custom URL. It sends the category of the custom URL. It also includes the web extension id of the extension controlling the home and/or newtab page.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PAGE_TAKEOVER_DATA&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;home_url_category&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;search-engine&quot;</span> <span class="o">|</span> <span class="s2">&quot;search-engine-mozilla-tag&quot;</span> <span class="o">|</span> <span class="s2">&quot;search-engine-other-tag&quot;</span> <span class="o">|</span> <span class="s2">&quot;news-portal&quot;</span> <span class="o">|</span> <span class="s2">&quot;ecommerce&quot;</span> <span class="o">|</span> <span class="s2">&quot;social-media&quot;</span> <span class="o">|</span> <span class="s2">&quot;known-hijacker&quot;</span> <span class="o">|</span> <span class="s2">&quot;other&quot;</span><span class="p">],</span>
    <span class="s2">&quot;home_extension_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
    <span class="s2">&quot;newtab_url_category&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;search-engine&quot;</span> <span class="o">|</span> <span class="s2">&quot;search-engine-mozilla-tag&quot;</span> <span class="o">|</span> <span class="s2">&quot;search-engine-other-tag&quot;</span> <span class="o">|</span> <span class="s2">&quot;news-portal&quot;</span> <span class="o">|</span> <span class="s2">&quot;ecommerce&quot;</span> <span class="o">|</span> <span class="s2">&quot;social-media&quot;</span> <span class="o">|</span> <span class="s2">&quot;known-hijacker&quot;</span> <span class="o">|</span> <span class="s2">&quot;other&quot;</span><span class="p">],</span>
    <span class="s2">&quot;newtab_extension_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="user-event-pings">
<h2>User event pings<a class="headerlink" href="#user-event-pings" title="Permalink to this headline">¶</a></h2>
<p>These pings are captured when a user <strong>performs some kind of interaction</strong> in the add-on.</p>
<div class="section" id="basic-shape">
<h3>Basic shape<a class="headerlink" href="#basic-shape" title="Permalink to this headline">¶</a></h3>
<p>A user event ping includes some basic metadata (tab id, addon version, etc.) as well as variable fields which indicate the location and action of the event.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="c1">// This indicates the type of interaction</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;CLICK&quot;</span><span class="p">,</span> <span class="s2">&quot;SEARCH&quot;</span><span class="p">,</span> <span class="s2">&quot;BLOCK&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span> <span class="s2">&quot;OPEN_NEW_WINDOW&quot;</span><span class="p">,</span> <span class="s2">&quot;OPEN_PRIVATE_WINDOW&quot;</span><span class="p">,</span> <span class="s2">&quot;BOOKMARK_DELETE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOOKMARK_ADD&quot;</span><span class="p">,</span> <span class="s2">&quot;OPEN_NEWTAB_PREFS&quot;</span><span class="p">,</span> <span class="s2">&quot;CLOSE_NEWTAB_PREFS&quot;</span><span class="p">,</span> <span class="s2">&quot;SEARCH_HANDOFF&quot;</span><span class="p">],</span>

  <span class="c1">// Optional field indicating the UI component type</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>

  <span class="c1">// Optional field if there is more than one of a component type on a page.</span>
  <span class="c1">// It is zero-indexed.</span>
  <span class="c1">// For example, clicking the second Highlight would result in an action_position of 1</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span> <span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="types-of-user-interactions">
<h3>Types of user interactions<a class="headerlink" href="#types-of-user-interactions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="performing-a-search">
<h4>Performing a search<a class="headerlink" href="#performing-a-search" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SEARCH&quot;</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="performing-a-search-handoff">
<h4>Performing a search handoff<a class="headerlink" href="#performing-a-search-handoff" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SEARCH_HANDOFF&quot;</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="clicking-a-top-site-item">
<h4>Clicking a top site item<a class="headerlink" href="#clicking-a-top-site-item" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;CLICK&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;pinned&quot;</span> <span class="o">|</span> <span class="s2">&quot;search&quot;</span> <span class="o">|</span> <span class="s2">&quot;spoc&quot;</span><span class="p">],</span>
    <span class="s2">&quot;icon_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;screenshot_with_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;screenshot&quot;</span> <span class="o">|</span> <span class="s2">&quot;tippytop&quot;</span> <span class="o">|</span> <span class="s2">&quot;rich_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;no_image&quot;</span> <span class="o">|</span> <span class="s2">&quot;custom_screenshot&quot;</span><span class="p">],</span>
    <span class="c1">// only exists if its card_type = &quot;search&quot;</span>
    <span class="s2">&quot;search_vendor&quot;</span><span class="o">:</span> <span class="s2">&quot;google&quot;</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="clicking-a-top-story-item">
<h4>Clicking a top story item<a class="headerlink" href="#clicking-a-top-story-item" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;CLICK&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;CARDGRID&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// &quot;spoc&quot; for sponsored stories, &quot;organic&quot; for regular stories.</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;organic&quot;</span> <span class="o">|</span> <span class="s2">&quot;spoc&quot;</span><span class="p">],</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="clicking-a-popular-topic-link">
<h4>Clicking a popular topic link<a class="headerlink" href="#clicking-a-popular-topic-link" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;CLICK&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;POPULAR_TOPICS&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;topic&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;must-reads&quot;</span> <span class="o">|</span> <span class="s2">&quot;productivity&quot;</span> <span class="o">|</span> <span class="s2">&quot;health&quot;</span> <span class="o">|</span> <span class="s2">&quot;finance&quot;</span> <span class="o">|</span> <span class="s2">&quot;technology&quot;</span> <span class="o">|</span> <span class="s2">&quot;more-recommendations&quot;</span><span class="p">]</span>
  <span class="p">}</span>
  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-a-search-shortcut">
<h4>Adding a search shortcut<a class="headerlink" href="#adding-a-search-shortcut" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SEARCH_EDIT_ADD&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;search_vendor&quot;</span><span class="o">:</span> <span class="s2">&quot;google&quot;</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="showing-privacy-information">
<h4>Showing privacy information<a class="headerlink" href="#showing-privacy-information" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SHOW_PRIVACY_INFO&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="clicking-on-privacy-information-link">
<h4>Clicking on privacy information link<a class="headerlink" href="#clicking-on-privacy-information-link" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;CLICK_PRIVACY_INFO&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;DS_PRIVACY_MODAL&quot;</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-search-shortcut">
<h4>Deleting a search shortcut<a class="headerlink" href="#deleting-a-search-shortcut" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SEARCH_EDIT_DELETE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;search_vendor&quot;</span><span class="o">:</span> <span class="s2">&quot;google&quot;</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-an-item-from-history">
<h4>Deleting an item from history<a class="headerlink" href="#deleting-an-item-from-history" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="s2">&quot;pinned&quot;</span><span class="p">,</span>
    <span class="s2">&quot;icon_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;screenshot_with_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;screenshot&quot;</span> <span class="o">|</span> <span class="s2">&quot;tippytop&quot;</span> <span class="o">|</span> <span class="s2">&quot;rich_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;no_image&quot;</span> <span class="o">|</span> <span class="s2">&quot;custom_screenshot&quot;</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="blocking-a-site">
<h4>Blocking a site<a class="headerlink" href="#blocking-a-site" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;BLOCK&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;pinned&quot;</span> <span class="o">|</span> <span class="s2">&quot;search&quot;</span> <span class="o">|</span> <span class="s2">&quot;spoc&quot;</span><span class="p">],</span>
    <span class="s2">&quot;icon_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;screenshot_with_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;screenshot&quot;</span> <span class="o">|</span> <span class="s2">&quot;tippytop&quot;</span> <span class="o">|</span> <span class="s2">&quot;rich_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;no_image&quot;</span> <span class="o">|</span> <span class="s2">&quot;custom_screenshot&quot;</span><span class="p">],</span>
    <span class="c1">// only exists if its card_type = &quot;search&quot;</span>
    <span class="s2">&quot;search_vendor&quot;</span><span class="o">:</span> <span class="s2">&quot;google&quot;</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="bookmarking-a-link">
<h4>Bookmarking a link<a class="headerlink" href="#bookmarking-a-link" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;BOOKMARK_ADD&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;HIGHLIGHTS&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="s2">&quot;trending&quot;</span>
  <span class="p">}</span>
  
  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-a-bookmark-from-a-link">
<h4>Removing a bookmark from a link<a class="headerlink" href="#removing-a-bookmark-from-a-link" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;BOOKMARK_DELETE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;HIGHLIGHTS&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="s2">&quot;bookmark&quot;</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="opening-a-link-in-a-new-window">
<h4>Opening a link in a new window<a class="headerlink" href="#opening-a-link-in-a-new-window" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;OPEN_NEW_WINDOW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="s2">&quot;pinned&quot;</span><span class="p">,</span>
    <span class="s2">&quot;icon_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;screenshot_with_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;screenshot&quot;</span> <span class="o">|</span> <span class="s2">&quot;tippytop&quot;</span> <span class="o">|</span> <span class="s2">&quot;rich_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;no_image&quot;</span> <span class="o">|</span> <span class="s2">&quot;custom_screenshot&quot;</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="opening-a-link-in-a-new-private-window">
<h4>Opening a link in a new private window<a class="headerlink" href="#opening-a-link-in-a-new-private-window" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;OPEN_PRIVATE_WINDOW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;card_type&quot;</span><span class="o">:</span> <span class="s2">&quot;pinned&quot;</span><span class="p">,</span>
    <span class="s2">&quot;icon_type&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;screenshot_with_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;screenshot&quot;</span> <span class="o">|</span> <span class="s2">&quot;tippytop&quot;</span> <span class="o">|</span> <span class="s2">&quot;rich_icon&quot;</span> <span class="o">|</span> <span class="s2">&quot;no_image&quot;</span> <span class="o">|</span> <span class="s2">&quot;custom_screenshot&quot;</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="opening-the-new-tab-preferences-pane">
<h4>Opening the new tab preferences pane<a class="headerlink" href="#opening-the-new-tab-preferences-pane" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;OPEN_NEWTAB_PREFS&quot;</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="closing-the-new-tab-preferences-pane">
<h4>Closing the new tab preferences pane<a class="headerlink" href="#closing-the-new-tab-preferences-pane" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;CLOSE_NEWTAB_PREFS&quot;</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="pinning-a-tab">
<h4>Pinning a tab<a class="headerlink" href="#pinning-a-tab" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;TABPINNED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TAB_CONTEXT_MENU&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;{\&quot;total_pinned_tabs\&quot;:2}&quot;</span><span class="p">,</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;aabaace5-35f4-7345-a28e-5502147dc93c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;67.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20190218094427&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">59</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-or-editing-a-new-topsite">
<h4>Adding or editing a new TopSite<a class="headerlink" href="#adding-or-editing-a-new-topsite" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES_EDIT&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES_SOURCE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="c1">// &quot;-1&quot; Is used for prepending a new TopSite at the front of the list, while</span>
  <span class="c1">// any other possible value is used for editing an existing TopSite slot.</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">1</span> <span class="o">|</span> <span class="s2">&quot;0..TOP_SITES_LENGTH&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="requesting-a-custom-screenshot-preview">
<h4>Requesting a custom screenshot preview<a class="headerlink" href="#requesting-a-custom-screenshot-preview" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PREVIEW_REQUEST&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_SITES&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="onboarding-user-events-on-about-welcome">
<h3>Onboarding user events on about:welcome<a class="headerlink" href="#onboarding-user-events-on-about-welcome" title="Permalink to this headline">¶</a></h3>
<div class="section" id="form-submit-events">
<h4>Form Submit Events<a class="headerlink" href="#form-submit-events" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;SUBMIT_EMAIL&quot;</span> <span class="o">|</span> <span class="s2">&quot;SUBMIT_SIGNIN&quot;</span> <span class="o">|</span> <span class="s2">&quot;SKIPPED_SIGNIN&quot;</span><span class="p">],</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;has_flow_params&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;about:welcome&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="firefox-accounts-metrics-flow-errors">
<h4>Firefox Accounts Metrics flow errors<a class="headerlink" href="#firefox-accounts-metrics-flow-errors" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;FXA_METRICS_FETCH_ERROR&quot;</span> <span class="o">|</span> <span class="s2">&quot;FXA_METRICS_ERROR&quot;</span><span class="p">],</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">500</span><span class="p">,</span> <span class="c1">// Only FXA_METRICS_FETCH_ERROR provides this value, this value is any valid HTTP status code except 200.</span>

  <span class="c1">// Basic metadata</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;about:welcome&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="session-end-pings">
<h2>Session end pings<a class="headerlink" href="#session-end-pings" title="Permalink to this headline">¶</a></h2>
<p>When a session ends, the browser will send a <code class="docutils literal notranslate"><span class="pre">&quot;activity_stream_session&quot;</span></code> ping to our metrics servers. This ping contains the length of the session, a unique reason for why the session ended, and some additional metadata.</p>
<div class="section" id="basic-event">
<h3>Basic event<a class="headerlink" href="#basic-event" title="Permalink to this headline">¶</a></h3>
<p>All <code class="docutils literal notranslate"><span class="pre">&quot;activity_stream_session&quot;</span></code> pings have the following basic shape. Some fields are variable.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_session&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;005deed0-e3e4-4c02-a041-17405fd703f6&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;session_duration&quot;</span><span class="o">:</span> <span class="mf">4199</span><span class="p">,</span>
  <span class="s2">&quot;profile_creation_date&quot;</span><span class="o">:</span> <span class="mf">14786</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="what-causes-a-session-end">
<h3>What causes a session end?<a class="headerlink" href="#what-causes-a-session-end" title="Permalink to this headline">¶</a></h3>
<p>Here are different scenarios that cause a session end event to be sent:</p>
<ol class="simple">
<li><p>After a search</p></li>
<li><p>Clicking on something that causes navigation (top site, highlight, etc.)</p></li>
<li><p>Closing the browser</p></li>
<li><p>Refreshing</p></li>
<li><p>Navigating to a new URL via the url bar or file menu</p></li>
</ol>
</div>
<div class="section" id="session-performance-data">
<h3>Session performance data<a class="headerlink" href="#session-performance-data" title="Permalink to this headline">¶</a></h3>
<p>This data is held in a child object of the <code class="docutils literal notranslate"><span class="pre">activity_stream_session</span></code> event called <code class="docutils literal notranslate"><span class="pre">perf</span></code>.  All fields suffixed by <code class="docutils literal notranslate"><span class="pre">_ts</span></code> are type <code class="docutils literal notranslate"><span class="pre">DOMHighResTimeStamp</span></code> (aka a double of milliseconds, with a 5 microsecond precision) with 0 being the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#The_time_origin">timeOrigin</a> of the browser’s hidden chrome window.</p>
<p>An example might look like this:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">perf</span><span class="o">:</span> <span class="p">{</span>
  <span class="c1">// Timestamp of the action perceived by the user to trigger the load</span>
  <span class="c1">// of this page.</span>
  <span class="c1">//</span>
  <span class="c1">// Not required at least for error cases where the</span>
  <span class="c1">// observer event doesn&#39;t fire</span>
  <span class="s2">&quot;load_trigger_ts&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>

  <span class="c1">// What was the perceived trigger of the load action:</span>
  <span class="s2">&quot;load_trigger_type&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;first_window_opened&quot;</span> <span class="o">|</span> <span class="c1">// home only</span>
    <span class="s2">&quot;menu_plus_or_keyboard&quot;</span> <span class="o">|</span> <span class="c1">// newtab only</span>
    <span class="s2">&quot;unexpected&quot;</span> <span class="c1">// sessions lacking actual start times</span>
  <span class="p">],</span>

  <span class="c1">// when the page itself receives an event that document.visibilityStat=visible</span>
  <span class="s2">&quot;visibility_event_rcvd_ts&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>

  <span class="c1">// When did the topsites element finish painting?  Note that, at least for</span>
  <span class="c1">// the first tab to be loaded, and maybe some others, this will be before</span>
  <span class="c1">// topsites has yet to receive screenshots updates from the add-on code,</span>
  <span class="c1">// and is therefore just showing placeholder screenshots.</span>
  <span class="s2">&quot;topsites_first_painted_ts&quot;</span><span class="o">:</span> <span class="mf">5</span><span class="p">,</span>

  <span class="c1">// The 6 different types of TopSites icons and how many of each kind did the</span>
  <span class="c1">// user see.</span>
  <span class="s2">&quot;topsites_icon_stats&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;custom_screenshot&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
    <span class="s2">&quot;screenshot_with_icon&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
    <span class="s2">&quot;screenshot&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
    <span class="s2">&quot;tippytop&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
    <span class="s2">&quot;rich_icon&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
    <span class="s2">&quot;no_image&quot;</span><span class="o">:</span> <span class="mf">0</span>
  <span class="p">},</span>

  <span class="c1">// The number of Top Sites that are pinned.</span>
  <span class="s2">&quot;topsites_pinned&quot;</span><span class="o">:</span> <span class="mf">3</span><span class="p">,</span>

  <span class="c1">// The number of search shortcut Top Sites.</span>
  <span class="s2">&quot;topsites_search_shortcuts&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>

  <span class="c1">// How much longer the data took, in milliseconds, to be ready for display</span>
  <span class="c1">// than it would have been in the ideal case. The user currently sees placeholder</span>
  <span class="c1">// cards instead of real cards for approximately this length of time. This is</span>
  <span class="c1">// sent when the first call of the component&#39;s `render()` method happens with</span>
  <span class="c1">// `this.props.initialized` set to `false`, and the value is the amount of</span>
  <span class="c1">// time in ms until `render()` is called with `this.props.initialized` set to `true`.</span>
  <span class="s2">&quot;highlights_data_late_by_ms&quot;</span><span class="o">:</span> <span class="mf">67</span><span class="p">,</span>
  <span class="s2">&quot;topsites_data_late_by_ms&quot;</span><span class="o">:</span> <span class="mf">35</span><span class="p">,</span>

  <span class="c1">// Whether the page is preloaded or not.</span>
  <span class="s2">&quot;is_preloaded&quot;</span><span class="o">:</span> <span class="p">[</span><span class="kc">true</span><span class="o">|</span><span class="kc">false</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="top-story-pings">
<h2>Top Story pings<a class="headerlink" href="#top-story-pings" title="Permalink to this headline">¶</a></h2>
<p>When Top Story (currently powered by Pocket) is enabled in Activity Stream, the browser will send following <code class="docutils literal notranslate"><span class="pre">activity_stream_impression_stats</span></code> to our metrics servers.</p>
<div class="section" id="impression-stats">
<h3>Impression stats<a class="headerlink" href="#impression-stats" title="Permalink to this headline">¶</a></h3>
<p>This reports all the Pocket recommended articles (a list of <code class="docutils literal notranslate"><span class="pre">id</span></code>s) when the user opens a newtab.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_impression_stats&quot;</span><span class="p">,</span>

  <span class="c1">// both &quot;client_id&quot; and &quot;session_id&quot; are set to &quot;n/a&quot; in this ping.</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;pocket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;tiles&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10001</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10002</span><span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="click-block-save-to-pocket-ping">
<h3>Click/block/save_to_pocket ping<a class="headerlink" href="#click-block-save-to-pocket-ping" title="Permalink to this headline">¶</a></h3>
<p>This reports the user’s interaction with those Pocket tiles.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_impression_stats&quot;</span><span class="p">,</span>

  <span class="c1">// both &quot;client_id&quot; and &quot;session_id&quot; are set to &quot;n/a&quot; in this ping.</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;pocket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>

  <span class="c1">// &quot;pos&quot; is the 0-based index to record the tile&#39;s position in the Pocket section.</span>
  <span class="c1">// &quot;shim&quot; is a base64 encoded shim attached to spocs, unique to the impression from the Ad server.</span>
  <span class="s2">&quot;tiles&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="s2">&quot;shim&quot;</span><span class="o">:</span> <span class="s2">&quot;enuYa1j73z3RzxgTexHNxYPC/b,9JT6w5KB0CRKYEU+&quot;</span><span class="p">}],</span>

  <span class="c1">// A 0-based index to record which tile in the &quot;tiles&quot; list that the user just interacted with.</span>
  <span class="s2">&quot;click|block|pocket&quot;</span><span class="o">:</span> <span class="mf">0</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="performance-pings">
<h2>Performance pings<a class="headerlink" href="#performance-pings" title="Permalink to this headline">¶</a></h2>
<p>These pings are captured to record performance related events i.e. how long certain operations take to execute.</p>
<div class="section" id="domain-affinity-calculation-v1">
<h3>Domain affinity calculation v1<a class="headerlink" href="#domain-affinity-calculation-v1" title="Permalink to this headline">¶</a></h3>
<p>This reports the duration of the domain affinity calculation in milliseconds.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;topstories.domain.affinity.calculation.ms&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="domain-affinity-calculation-v2">
<h3>Domain affinity calculation v2<a class="headerlink" href="#domain-affinity-calculation-v2" title="Permalink to this headline">¶</a></h3>
<p>These report the duration of the domain affinity v2 calculations in milliseconds.</p>
<div class="section" id="total-calculation-in-ms">
<h4>Total calculation in ms<a class="headerlink" href="#total-calculation-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_TOTAL_DURATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="getrecipe-calculation-in-ms">
<h4>getRecipe calculation in ms<a class="headerlink" href="#getrecipe-calculation-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_GET_RECIPE_DURATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="recipeexecutor-calculation-in-ms">
<h4>RecipeExecutor calculation in ms<a class="headerlink" href="#recipeexecutor-calculation-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_RECIPE_EXECUTOR_DURATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="taggers-calculation-in-ms">
<h4>taggers calculation in ms<a class="headerlink" href="#taggers-calculation-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_TAGGERS_DURATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="createinterestvector-calculation-in-ms">
<h4>createInterestVector calculation in ms<a class="headerlink" href="#createinterestvector-calculation-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_CREATE_INTEREST_VECTOR_DURATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="calculateitemrelevancescore-calculation-in-ms">
<h4>calculateItemRelevanceScore calculation in ms<a class="headerlink" href="#calculateitemrelevancescore-calculation-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_ITEM_RELEVANCE_SCORE_DURATION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="history-size-used-for-v2-calculation">
<h3>History size used for v2 calculation<a class="headerlink" href="#history-size-used-for-v2-calculation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_HISTORY_SIZE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">43</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="error-events-for-v2-calculation">
<h3>Error events for v2 calculation<a class="headerlink" href="#error-events-for-v2-calculation" title="Permalink to this headline">¶</a></h3>
<p>These report any failures during domain affinity v2 calculations, and where it failed.</p>
<div class="section" id="getrecipe-error">
<h4>getRecipe error<a class="headerlink" href="#getrecipe-error" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_GET_RECIPE_ERROR&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="generaterecipeexecutor-error">
<h4>generateRecipeExecutor error<a class="headerlink" href="#generaterecipeexecutor-error" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_GENERATE_RECIPE_EXECUTOR_ERROR&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="createinterestvector-error">
<h4>createInterestVector error<a class="headerlink" href="#createinterestvector-error" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;PERSONALIZATION_V2_CREATE_INTEREST_VECTOR_ERROR&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="discovery-stream-loaded-content">
<h3>Discovery Stream loaded content<a class="headerlink" href="#discovery-stream-loaded-content" title="Permalink to this headline">¶</a></h3>
<p>This reports all the loaded content (a list of <code class="docutils literal notranslate"><span class="pre">id</span></code>s and positions) when the user opens a newtab page and the page becomes visible. Note that this ping is a superset of the Discovery Stream impression ping, as impression pings are also subject to the individual visibility.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_impression_stats&quot;</span><span class="p">,</span>

  <span class="c1">// Both &quot;client_id&quot; and &quot;session_id&quot; are set to &quot;n/a&quot; in this ping.</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;HERO&quot;</span> <span class="o">|</span> <span class="s2">&quot;CARDGRID&quot;</span> <span class="o">|</span> <span class="s2">&quot;LIST&quot;</span><span class="p">],</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>

  <span class="c1">// Indicating this is a `loaded content` ping (as opposed to impression) as well as the size of `tiles`</span>
  <span class="s2">&quot;loaded&quot;</span><span class="o">:</span> <span class="mf">3</span><span class="p">,</span>
  <span class="s2">&quot;tiles&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10001</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10002</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="o">:</span> <span class="mf">2</span><span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="discovery-stream-performance-pings">
<h3>Discovery Stream performance pings<a class="headerlink" href="#discovery-stream-performance-pings" title="Permalink to this headline">¶</a></h3>
<div class="section" id="request-time-of-layout-feed-in-ms">
<h4>Request time of layout feed in ms<a class="headerlink" href="#request-time-of-layout-feed-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;LAYOUT_REQUEST_TIME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">42</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="request-time-of-spocs-feed-in-ms">
<h4>Request time of SPOCS feed in ms<a class="headerlink" href="#request-time-of-spocs-feed-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SPOCS_REQUEST_TIME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">42</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="request-time-of-component-feed-feed-in-ms">
<h4>Request time of component feed feed in ms<a class="headerlink" href="#request-time-of-component-feed-feed-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;COMPONENT_FEED_REQUEST_TIME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">42</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="request-time-of-total-discovery-stream-feed-in-ms">
<h4>Request time of total Discovery Stream feed in ms<a class="headerlink" href="#request-time-of-total-discovery-stream-feed-in-ms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;DS_FEED_TOTAL_REQUEST_TIME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">136</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cache-age-of-discovery-stream-feed-in-second">
<h4>Cache age of Discovery Stream feed in second<a class="headerlink" href="#cache-age-of-discovery-stream-feed-in-second" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;DS_CACHE_AGE_IN_SEC&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">1800</span> <span class="c1">// 30 minutes</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="discovery-stream-spocs-fill-ping">
<h3>Discovery Stream SPOCS Fill ping<a class="headerlink" href="#discovery-stream-spocs-fill-ping" title="Permalink to this headline">¶</a></h3>
<p>This reports the internal status of Pocket SPOCS (Sponsored Contents).</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="c1">// both &quot;client_id&quot; and &quot;session_id&quot; are set to &quot;n/a&quot; in this ping.</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;68&quot;</span><span class="p">,</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="o">:</span> <span class="s2">&quot;release&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;spoc_fills&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;frequency_cap&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10001</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;blocked_by_user&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10002</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;below_min_score&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10003</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;campaign_duplicate&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10004</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;probability_selection&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10004</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;out_of_position&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10005</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">0</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="undesired-event-pings">
<h2>Undesired event pings<a class="headerlink" href="#undesired-event-pings" title="Permalink to this headline">¶</a></h2>
<p>These pings record the undesired events happen in the addon for further investigation.</p>
<div class="section" id="addon-initialization-failure">
<h3>Addon initialization failure<a class="headerlink" href="#addon-initialization-failure" title="Permalink to this headline">¶</a></h3>
<p>This reports when the addon fails to initialize</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_undesired_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;ADDON_INIT_FAILED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mf">1</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="activity-stream-router-pings">
<h2>Activity Stream Router pings<a class="headerlink" href="#activity-stream-router-pings" title="Permalink to this headline">¶</a></h2>
<p>These pings record the impression and user interactions within Activity Stream Router.</p>
<div class="section" id="impression-ping">
<h3>Impression ping<a class="headerlink" href="#impression-ping" title="Permalink to this headline">¶</a></h3>
<p>This reports the impression of Activity Stream Router.</p>
<div class="section" id="snippets-impression">
<h4>Snippets impression<a class="headerlink" href="#snippets-impression" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;snippets_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;SNIPPETS&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;NEWTAB_FOOTER_BAR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;some_snippet_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;IMPRESSION&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>CFR impression ping has two forms, in which the message_id could be of different meanings.</p>
</div>
<div class="section" id="cfr-impression-for-all-the-prerelease-channels-and-shield-experiment">
<h4>CFR impression for all the prerelease channels and shield experiment<a class="headerlink" href="#cfr-impression-for-all-the-prerelease-channels-and-shield-experiment" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;cfr_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="c1">// message_id could be the ID of the recommendation, such as &quot;wikipedia_addon&quot;</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;wikipedia_addon&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;IMPRESSION&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cfr-impression-for-the-release-channel">
<h4>CFR impression for the release channel<a class="headerlink" href="#cfr-impression-for-the-release-channel" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;cfr_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="c1">// message_id should be a bucket ID in the release channel, we may not use the</span>
  <span class="c1">// individual ID, such as addon ID, per legal&#39;s request</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;bucket_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;IMPRESSION&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="onboarding-impression">
<h4>Onboarding impression<a class="headerlink" href="#onboarding-impression" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;onboarding_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;FIRST_RUN&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;EXTENDED_TRIPLETS_1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;IMPRESSION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:newtab&quot;</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="onboarding-simplified-welcome-impression">
<h4>Onboarding Simplified Welcome impression<a class="headerlink" href="#onboarding-simplified-welcome-impression" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;76.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20200330194034&quot;</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;ABOUT_WELCOME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;IMPRESSION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="onboarding-simplified-welcome-session-end-ping">
<h4>Onboarding Simplified Welcome Session End ping<a class="headerlink" href="#onboarding-simplified-welcome-session-end-ping" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;76.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{},</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20200330194034&quot;</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;ABOUT_WELCOME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;ABOUT_WELCOME&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;SESSION_END&quot;</span><span class="p">,</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;about:welcome&quot;</span><span class="p">,</span> <span class="s2">&quot;reason&quot;</span><span class="o">:</span>
    <span class="p">[</span><span class="s2">&quot;welcome-window-closed&quot;</span> <span class="o">|</span> <span class="s2">&quot;welcome-tab-closed&quot;</span> <span class="o">|</span> <span class="s2">&quot;app-shut-down&quot;</span> <span class="o">|</span> <span class="s2">&quot;address-bar-navigated&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">]}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="user-interaction-pings">
<h3>User interaction pings<a class="headerlink" href="#user-interaction-pings" title="Permalink to this headline">¶</a></h3>
<p>This reports the user’s interaction with Activity Stream Router.</p>
<div class="section" id="snippets-interaction-pings">
<h4>Snippets interaction pings<a class="headerlink" href="#snippets-interaction-pings" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;snippets_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;NEWTAB_FOOTER_BAR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;some_snippet_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;CLICK_BUTTION&quot;</span> <span class="o">|</span> <span class="s2">&quot;BLOCK&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="onboarding-interaction-pings">
<h4>Onboarding interaction pings<a class="headerlink" href="#onboarding-interaction-pings" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;onboarding_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;ONBOARDING&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;onboarding_message_1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;IMPRESSION&quot;</span> <span class="o">|</span> <span class="s2">&quot;CLICK_BUTTION&quot;</span> <span class="o">|</span> <span class="s2">&quot;INSTALL&quot;</span> <span class="o">|</span> <span class="s2">&quot;BLOCK&quot;</span><span class="p">],</span>
  <span class="s2">&quot;browser_session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;e7e52665-7db3-f348-9918-e93160eb2ef3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:newtab&quot;</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cfr-interaction-pings-for-all-the-prerelease-channels-and-shield-experiment">
<h4>CFR interaction pings for all the prerelease channels and shield experiment<a class="headerlink" href="#cfr-interaction-pings-for-all-the-prerelease-channels-and-shield-experiment" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;cfr_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="c1">// message_id could be the ID of the recommendation, such as &quot;wikipedia_addon&quot;</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;wikipedia_addon&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;[IMPRESSION | INSTALL | PIN | BLOCK | DISMISS | RATIONALE | LEARN_MORE | CLICK | CLICK_DOORHANGER | MANAGE]&quot;</span><span class="p">,</span>
  <span class="c1">// &quot;modelVersion&quot; records the model identifier for the CFR machine learning experiment, see more detail in Bug 1594422.</span>
  <span class="c1">// Non-experiment users will not report this field.</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="s2">&quot;{ \&quot;modelVersion\&quot;: \&quot;some_model_version_id\&quot; }&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cfr-interaction-pings-for-release-channel">
<h4>CFR interaction pings for release channel<a class="headerlink" href="#cfr-interaction-pings-for-release-channel" title="Permalink to this headline">¶</a></h4>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;cfr_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="c1">// message_id should be a bucket ID in the release channel, we may not use the</span>
  <span class="c1">// individual ID, such as addon ID, per legal&#39;s request</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;bucket_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;[IMPRESSION | INSTALL | PIN | BLOCK | DISMISS | RATIONALE | LEARN_MORE | CLICK | CLICK_DOORHANGER | MANAGE]&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="targeting-error-pings">
<h3>Targeting error pings<a class="headerlink" href="#targeting-error-pings" title="Permalink to this headline">¶</a></h3>
<p>This reports when an error has occurred when parsing/evaluating a JEXL targeting string in a message.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;asrouter_undesired_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;some_message_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;TARGETING_EXPRESSION_ERROR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;MALFORMED_EXPRESSION&quot;</span> <span class="o">|</span> <span class="s2">&quot;OTHER_ERROR&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="remote-settings-error-pings">
<h3>Remote Settings error pings<a class="headerlink" href="#remote-settings-error-pings" title="Permalink to this headline">¶</a></h3>
<p>This reports a failure in the Remote Settings loader to load messages for Activity Stream Router.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;asrouter_undesired_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="o">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;ASR_RS_NO_MESSAGES&quot;</span> <span class="o">|</span> <span class="s2">&quot;ASR_RS_ERROR&quot;</span><span class="p">],</span>
  <span class="c1">// The value is set to the ID of the message provider. For example: remote-cfr, remote-onboarding, etc.</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="s2">&quot;REMOTE_PROVIDER_ID&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="feature-callouts-interaction-pings">
<h2>Feature Callouts interaction pings<a class="headerlink" href="#feature-callouts-interaction-pings" title="Permalink to this headline">¶</a></h2>
<p>This reports when a user has seen or clicked a badge/notification in the browser toolbar in a non-PBM window</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;locale&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;9da773d8-4356-f54f-b7cf-6134726bcf3d&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;70.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="p">:</span> <span class="s2">&quot;20190712095934&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;cfr_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="s2">&quot;FXA_ACCOUNTS_BADGE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CLICK&quot;</span> <span class="o">|</span> <span class="s2">&quot;IMPRESSION&quot;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="panel-interaction-pings">
<h2>Panel interaction pings<a class="headerlink" href="#panel-interaction-pings" title="Permalink to this headline">¶</a></h2>
<p>This reports when a user opens the panel, views messages and clicks on a message.
For message impressions we concatenate the ids of all messages in the panel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;locale&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;9da773d8-4356-f54f-b7cf-6134726bcf3d&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;70.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="p">:</span> <span class="s2">&quot;20190712095934&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;cfr_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="s2">&quot;WHATS_NEW_70&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CLICK&quot;</span> <span class="o">|</span> <span class="s2">&quot;IMPRESSION&quot;</span><span class="p">],</span>
  <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application_menu&quot;</span> <span class="o">|</span> <span class="s2">&quot;toolbar_dropdown&quot;</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="moments-page-pings">
<h2>Moments page pings<a class="headerlink" href="#moments-page-pings" title="Permalink to this headline">¶</a></h2>
<p>This reports when a moments page message has set the user preference for
<code class="docutils literal notranslate"><span class="pre">browser.startup.homepage_override.once</span></code>. It goes through the same policy
as other CFR messages.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Release</span> <span class="n">ping</span>
<span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;cfr_user_event&quot;</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="p">:</span> <span class="s2">&quot;20200225022813&quot;</span>
  <span class="s2">&quot;bucket_id&quot;</span><span class="p">:</span> <span class="s2">&quot;WNP_THANK_YOU&quot;</span>
  <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;MOMENTS_PAGE_SET&quot;</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="p">:</span> <span class="s2">&quot;{d85d2268-b751-9543-b6d7-aad523bf2b26}&quot;</span>
  <span class="s2">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;locale&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
  <span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="s2">&quot;n/a&quot;</span>
  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;CFR&quot;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">Beta</span> <span class="ow">and</span> <span class="n">Nightly</span> <span class="n">channels</span>
<span class="p">{</span>
  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;CFR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="p">:</span> <span class="s2">&quot;WNP_THANK_YOU&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bucket_id&quot;</span><span class="p">:</span> <span class="s2">&quot;WNP_THANK_YOU&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;MOMENTS_PAGE_SET&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="p">:</span> <span class="s2">&quot;20200225022813&quot;</span><span class="p">,</span>
  <span class="s2">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;experiment_1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;control&quot;</span><span class="p">},</span>
    <span class="s2">&quot;experiment_2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;treatment&quot;</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;locale&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;21dc1375-b24e-984b-83e9-c8a9660ae4ff&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="messaging-experiments-pings">
<h2>Messaging-experiments pings<a class="headerlink" href="#messaging-experiments-pings" title="Permalink to this headline">¶</a></h2>
<p>As the new experiment platform, the Messaging experiment manager is now managing &amp; operating all the experiments of Firefox Messaging System, including the first-run experience (about:welcome), CFR, Whats-new-panel, Moments Page, and Snippets.</p>
<div class="section" id="enrollment-unenrollment-pings">
<h3>Enrollment &amp; Unenrollment pings<a class="headerlink" href="#enrollment-unenrollment-pings" title="Permalink to this headline">¶</a></h3>
<p>Under the hood, the experiment manager makes use of Normandy API for experiment management (enrollment &amp; unenrollment as well as the corresponding telemetry). Therefore, the enrollment &amp; unenrollment pings are collected through the Normandy counterparts. See <a class="reference external" href="https://searchfox.org/mozilla-central/source/toolkit/components/telemetry/Events.yaml#441"><code class="docutils literal notranslate"><span class="pre">normandy</span></code> category</a> for more details.</p>
</div>
<div class="section" id="experiment-reach-ping">
<h3>Experiment reach ping<a class="headerlink" href="#experiment-reach-ping" title="Permalink to this headline">¶</a></h3>
<p>This records whether a branch’s targeting is satisfied for Messaging System experiments. All qualified branch ID(s) will be recorded in the <code class="docutils literal notranslate"><span class="pre">extra_keys</span></code> for each active experiment, and the event <code class="docutils literal notranslate"><span class="pre">value</span></code> will be the experiment ID (i.e. slug).</p>
<p>Unlike other Activity Stream pings, this is a Firefox Events telemetry event, and it is sent only for users enrolled in a Messaging System experiment.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="s2">&quot;messaging_experiments&quot;</span><span class="p">,</span>
  <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;reach&quot;</span><span class="p">,</span>
  <span class="c1">// any of [&quot;cfr&quot;, &quot;whats_new_panel&quot;, &quot;moments_page&quot;, &quot;snippets&quot;, &quot;cfr_fxa&quot;]</span>
  <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;cfr&quot;</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;experiment_message_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;extra_keys&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// A semicolon separated string with all the qualified branch IDs</span>
    <span class="s2">&quot;branches&quot;</span><span class="o">:</span> <span class="s2">&quot;control;variant_1;variant_2&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="experiment-attribute-errors">
<h3>Experiment attribute errors<a class="headerlink" href="#experiment-attribute-errors" title="Permalink to this headline">¶</a></h3>
<p>This records whether issues were encountered with any of the targeting attributes used in the experiment enrollment or message targeting.
Two different types of events are sent: <code class="docutils literal notranslate"><span class="pre">attribute_error</span></code> and <code class="docutils literal notranslate"><span class="pre">attribute_timeout</span></code> along with the attribute that caused it.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;messaging_experiments&quot;</span><span class="p">,</span>
  <span class="s2">&quot;targeting&quot;</span><span class="p">,</span>
  <span class="s2">&quot;attribute_error&quot;</span><span class="p">,</span> <span class="c1">// event</span>
  <span class="s2">&quot;foo&quot;</span> <span class="c1">// attribute</span>
<span class="p">],</span>
<span class="p">[</span>
  <span class="s2">&quot;messaging_experiments&quot;</span><span class="p">,</span>
  <span class="s2">&quot;targeting&quot;</span><span class="p">,</span>
  <span class="s2">&quot;attribute_timeout&quot;</span><span class="p">,</span> <span class="c1">// event</span>
  <span class="s2">&quot;bar&quot;</span> <span class="c1">// attribute</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geo_locale.html" class="btn btn-neutral float-right" title="Custom geo, locale, and update channels" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="data_dictionary.html" class="btn btn-neutral float-left" title="Activity Stream Pings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>