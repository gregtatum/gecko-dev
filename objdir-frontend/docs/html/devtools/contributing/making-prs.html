

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sending your code for review (also known as “sending patches”) &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Sending your code for review (also known as “sending patches”)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/devtools/contributing/making-prs.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sending-your-code-for-review-also-known-as-sending-patches">
<h1>Sending your code for review (also known as “sending patches”)<a class="headerlink" href="#sending-your-code-for-review-also-known-as-sending-patches" title="Permalink to this headline">¶</a></h1>
<p>First, commit your changes. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hg add /path/to/file/changed
hg commit -m <span class="s2">&quot;Bug 1234567 - Implement feature XYZ. r=name,name2!&quot;</span>
</pre></div>
</div>
<p>The commit message explained in detail:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Bug</span> <span class="pre">1234567</span></code> - The number of the bug in bugzilla.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">Implement</span> <span class="pre">feature</span> <span class="pre">XYZ.</span></code> - The commit message.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">r=name</span></code> - The short form to request a review. Enter the name you found using the
instructions in the <a class="reference internal" href="code-reviews-find-reviewer.html"><span class="doc">previous step</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">,name2!</span></code> - You can have more than one reviewer. The <code class="docutils literal notranslate"><span class="pre">!</span></code> makes the review a <em>blocking</em> review (Patch can not land without accepted review).</p></li>
</ul>
<p>Then create a revision in Phabricator using <code class="docutils literal notranslate"><span class="pre">moz-phab</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>moz-phab submit
</pre></div>
</div>
<p>A revision will be created including that information and the difference in code between your changes and the point in the repository where you based your work (this difference is sometimes called “a patch”, as it’s what you’d need to apply on the repository to get to the final state).</p>
<p>If you click on the provided URL for the revision, it’ll bring you to Phabricator’s interface, which the reviewer will visit as well in order to review the code. They will look at your changes and decide if they need any additional work, based on whether the changes do fix what the bug describes or not. To get a better idea of the types of things they will look at and verify, read the <a class="reference internal" href="code-reviews-checklist.html"><span class="doc">code reviews checklist</span></a>.</p>
<p>For more information on using moz-phab, you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>moz-phab -h
</pre></div>
</div>
<p>or to get information on a specific command (here <code class="docutils literal notranslate"><span class="pre">submit</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>moz-phab submit -h
</pre></div>
</div>
<p>The reviewer might suggest you do additional changes. For example, they might recommend using a helper that already exists (but you were not aware of), or they might recommend renaming things to make things clearer. Or they might recommend you do <em>less</em> things (e.g. if you changed other things that are out of scope for the bug). Or they might simply ask questions if things aren’t clear. You can also ask questions if the comments are unclear or if you’re unsure about parts of the code you’re interacting with. Something that looks very obvious to one person might confuse others.</p>
<p>Hence, you might need to go back to the code and do some edits to address the issues and recommendations. Once you have done this, you must update the existing commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hg commit --amend
</pre></div>
</div>
<p>And submit the change again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>moz-phab submit
</pre></div>
</div>
<p>You might have to go through this cycle of submitting changes and getting it reviewed several times, depending on the complexity of the bug.</p>
<p>Once your code fixes the bug, and there are no more blocking issues, the reviewer will approve the changes, and the code can be landed in the repository now.</p>
</div>
<div class="section" id="squashing-commits">
<h1>Squashing commits<a class="headerlink" href="#squashing-commits" title="Permalink to this headline">¶</a></h1>
<p>Sometimes you may be asked to squash your commits. Squashing means merging multiple commits into one in case you created multiple commits while working on a bug. Squashing bugs is easy!</p>
<p>We will use the histedit extension for squashing commits in Mercurial. You can check if this extension is enabled in your Mercurial installation following these steps:</p>
<ul class="simple">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">.hgrc</span></code> (Linux/OSX) or <code class="docutils literal notranslate"><span class="pre">Mercurial.ini</span></code> (Windows) –this is the default configuration file of Mercurial– located in your home directory, using your favourite editor.</p></li>
<li><p>Then add <code class="docutils literal notranslate"><span class="pre">histedit=</span> </code> under the <code class="docutils literal notranslate"><span class="pre">[extensions]</span></code> list present in file, if not present already.</p></li>
</ul>
<p>Then, run the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">hg</span> <span class="pre">histedit</span></code></p>
<p>You will see something like this on your terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pick</span> <span class="mi">3</span><span class="n">bd22d1cc59a</span> <span class="mi">0</span> <span class="s2">&quot;First-Commit-Message&quot;</span>
<span class="n">pick</span> <span class="mi">81</span><span class="n">c4d40e57d3</span> <span class="mi">1</span> <span class="s2">&quot;Second-Commit-Message&quot;</span>
</pre></div>
</div>
<p>These lines represent your commits. Suppose we want to merge <code class="docutils literal notranslate"><span class="pre">81c4d40e57d3</span></code> to <code class="docutils literal notranslate"><span class="pre">3bd22d1cc59a</span></code>. Then replace <strong>pick</strong> in front of <code class="docutils literal notranslate"><span class="pre">81c4d40e57d3</span></code> with <strong>fold</strong> (or simply ‘f’). Save the changes.</p>
<p>You will see that <code class="docutils literal notranslate"><span class="pre">81c4d40e57d3</span></code> has been combined with <code class="docutils literal notranslate"><span class="pre">3bd22d1cc59a</span></code>. You can verify this using the <code class="docutils literal notranslate"><span class="pre">hg</span> <span class="pre">log</span></code> command.</p>
<p>You can fold as many commits you want, and they will be combined with the first commit above them which does not use fold.</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>