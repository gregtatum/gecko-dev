

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Style guide &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Selenium atoms" href="SeleniumAtoms.html" />
    <link rel="prev" title="Testing with one-click loaners" href="Taskcluster.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoViewâ€™s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Marionette</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Intro.html">Introduction to Marionette</a></li>
<li class="toctree-l2"><a class="reference internal" href="Building.html">Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="PythonTests.html">Mn Python tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="Protocol.html">Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="NewContributors.html">New contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Patches.html">Submitting patches</a></li>
<li class="toctree-l2"><a class="reference internal" href="Debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="Testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="Taskcluster.html">Testing with one-click loaners</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Style guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#javascript">JavaScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linting">Linting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SeleniumAtoms.html">Selenium atoms</a></li>
<li class="toctree-l2"><a class="reference internal" href="Prefs.html">Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals/index.html">Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#bugs">Bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#communication">Communication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Marionette</a> &raquo;</li>
        
      <li>Style guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/testing/marionette/CodeStyle.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="style-guide">
<h1>Style guide<a class="headerlink" href="#style-guide" title="Permalink to this headline">Â¶</a></h1>
<p>Like other projects, we also have some guidelines to keep to the code.
For the overall Marionette project, a few rough rules are:</p>
<ul class="simple">
<li><p>Make your code readable and sensible, and donâ€™t try to be
clever.  Prefer simple and easy solutions over more convoluted
and foreign syntax.</p></li>
<li><p>Fixing style violations whilst working on a real change as a
preparatory clean-up step is good, but otherwise avoid useless
code churn for the sake of conforming to the style guide.</p></li>
<li><p>Code is mutable and not written in stone.  Nothing that
is checked in is sacred and we encourage change to make
testing/marionette a pleasant ecosystem to work in.</p></li>
</ul>
<div class="section" id="javascript">
<h2>JavaScript<a class="headerlink" href="#javascript" title="Permalink to this headline">Â¶</a></h2>
<p>Marionette is written in <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM">XPCOM</a> flavoured JavaScript and ships
as part of Firefox.  We have access to all the latest ECMAScript
features currently in development, usually before it ships in the
wild and we try to make use of new features when appropriate,
especially when they move us off legacy internal replacements
(such as Promise.jsm and Task.jsm).</p>
<p>One of the peculiarities of working on JavaScript code that ships as
part of a runtime platform is, that unlike in a regular web document,
we share a single global state with the rest of Firefox.  This means
we have to be responsible and not leak resources unnecessarily.</p>
<p>JS code in Gecko is organised into <em>modules</em> carrying <em>.js</em> or <em>.jsm</em>
file extensions.  Depending on the area of Gecko youâ€™re working on,
you may find they have different techniques for exporting symbols,
varying indentation and code style, as well as varying linting
requirements.</p>
<p>To export symbols to other Marionette modules, remember to assign
your exported symbols to the shared global <code class="docutils literal notranslate"><span class="pre">this</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">EXPORTED_SYMBOLS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;PollPromise&quot;</span><span class="p">,</span> <span class="s2">&quot;TimedPromise&quot;</span><span class="p">];</span>
</pre></div>
</div>
<p>When importing symbols in Marionette code, try to be specific about
what you need:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="p">{</span><span class="n">TimedPromise</span><span class="p">}</span> <span class="o">=</span> <span class="n">Cu</span><span class="o">.</span><span class="n">import</span><span class="p">(</span><span class="s2">&quot;chrome://marionette/content/sync.js&quot;</span><span class="p">,</span> <span class="p">{});</span>
</pre></div>
</div>
<p>The <a class="reference external" href="#linting">linter</a> will complain if you import a named symbol that is
not in use.  If however you <em>need</em> to import every symbol, you can:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>const wait = {};
Cu.import(&quot;chrome://marionette/content/sync.js&quot;, wait);

wait.sleep(42);
await wait.TimedPromise(â€¦);
</pre></div>
</div>
<p>We prefer object assignment shorthands when redefining names,
for example when you use functionality from the <code class="docutils literal notranslate"><span class="pre">Components</span></code> global:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="p">{</span><span class="n">classes</span><span class="p">:</span> <span class="n">Cc</span><span class="p">,</span> <span class="n">interfaces</span><span class="p">:</span> <span class="n">Ci</span><span class="p">,</span> <span class="n">utils</span><span class="p">:</span> <span class="n">Cu</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Cr</span><span class="p">}</span> <span class="o">=</span> <span class="n">Components</span><span class="p">;</span>
</pre></div>
</div>
<p>When using symbols by their own name, the assignment name can be
omitted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="p">{</span><span class="n">TYPE_ONE_SHOT</span><span class="p">,</span> <span class="n">TYPE_REPEATING_SLACK</span><span class="p">}</span> <span class="o">=</span> <span class="n">Ci</span><span class="o">.</span><span class="n">nsITimer</span><span class="p">;</span>
</pre></div>
</div>
<p>In addition to the default <a class="reference external" href="https://searchfox.org/mozilla-central/source/.eslintrc.js">Mozilla eslint rules</a>, we have <a class="reference external" href="https://searchfox.org/mozilla-central/source/testing/marionette/.eslintrc.js">our
own specialisations</a> that are stricter and enforce more security.
A few notable examples are that we disallow fallthrough <code class="docutils literal notranslate"><span class="pre">case</span></code>
statements unless they are explicitly grouped together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>switch (x) {
  case &quot;foo&quot;:
    doSomething();

  case &quot;bar&quot;:  // &lt;-- disallowed!
    doSomethingElse();
    break;

  case &quot;baz&quot;:
  case &quot;bah&quot;:  // &lt;-- allowed (-:
    doCrazyThings();
}
</pre></div>
</div>
<p>We disallow the use of <code class="docutils literal notranslate"><span class="pre">var</span></code>, for which we always prefer <code class="docutils literal notranslate"><span class="pre">let</span></code> and
<code class="docutils literal notranslate"><span class="pre">const</span></code> as replacements.  Do be aware that <code class="docutils literal notranslate"><span class="pre">const</span></code> does not mean
that the variable is immutable: just that it cannot be reassigned.
We require all lines to end with semicolons, disallow construction
of plain <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Object()</span></code>, require variable names to be camel-cased,
and complain about unused variables.</p>
<p>For purely aesthetic reasons we indent our code with two spaces,
which includes switch-statement <code class="docutils literal notranslate"><span class="pre">case</span></code>s, and limit the maximum
line length to 78 columns.  When you need to wrap a statement to
the next line, the second line is indented with four spaces, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>throw new TypeError(
    &quot;Expected an element or WindowProxy, &quot; +
    pprint`got: ${el}`);
</pre></div>
</div>
<p>This is not normally something you have to think to deeply about as
it is enforced by the <a class="reference external" href="#linting">linter</a>.  The linter also has an automatic
mode that fixes and formats certain classes of style violations.</p>
<p>If you find yourself struggling to fit a long statement on one line,
this is usually an indication that it is too long and should be
split into multiple lines.  This is also a helpful tip to make the
code easier to read.  Assigning transitive values to descriptive
variable names can serve as self-documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>let location = event.target.documentURI || event.target.location.href;
log.debug(`Received DOM event ${event.type} for ${location}`);
</pre></div>
</div>
<p>On the topic of variable naming the opinions are as many as programmers
writing code, but it is often helpful to keep the input and output
arguments to functions descriptive (longer), and let transitive
internal values to be described more succinctly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span> <span class="n">Prettifies</span> <span class="n">instance</span> <span class="n">of</span> <span class="n">Error</span> <span class="ow">and</span> <span class="n">its</span> <span class="n">stacktrace</span> <span class="n">to</span> <span class="n">a</span> <span class="n">string</span><span class="o">.</span> <span class="o">*/</span>
<span class="n">function</span> <span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">let</span> <span class="n">s</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;stack&quot;</span> <span class="ow">in</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="n">stack</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;&lt;unprintable error&gt;&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When we can, we try to extract the relevant object properties in
the arguments to an event handler or a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>const responseListener = ({name, target, json, data}) =&gt; { â€¦ };
</pre></div>
</div>
<p>Instead of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>const responseListener = msg =&gt; {
  let name = msg.name;
  let target = msg.target;
  let json = msg.json;
  let data = msg.data;
  â€¦
};
</pre></div>
</div>
<p>All source files should have <code class="docutils literal notranslate"><span class="pre">&quot;use</span> <span class="pre">strict&quot;;</span></code> as the first directive
so that the file is parsed in <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">strict mode</a>.</p>
<p>Every source code file that ships as part of the Firefox bundle
must also have a <a class="reference external" href="https://www.mozilla.org/en-US/MPL/headers/">copying header</a>, such as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="n">This</span> <span class="n">Source</span> <span class="n">Code</span> <span class="n">Form</span> <span class="ow">is</span> <span class="n">subject</span> <span class="n">to</span> <span class="n">the</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Mozilla</span> <span class="n">Public</span>
 <span class="o">*</span> <span class="n">License</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span> <span class="mf">2.0</span><span class="o">.</span> <span class="n">If</span> <span class="n">a</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">MPL</span> <span class="n">was</span> <span class="ow">not</span> <span class="n">distributed</span> <span class="k">with</span> <span class="n">this</span> <span class="n">file</span><span class="p">,</span>
 <span class="o">*</span> <span class="n">You</span> <span class="n">can</span> <span class="n">obtain</span> <span class="n">one</span> <span class="n">at</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mozilla</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">MPL</span><span class="o">/</span><span class="mf">2.0</span><span class="o">/.</span> <span class="o">*/</span>
</pre></div>
</div>
<p>New xpcshell test files <em>should not</em> have a license header as all
new Mozilla tests should be in the <a class="reference external" href="https://creativecommons.org/publicdomain/zero/1.0/">public domain</a> so that they can
easily be shared with other browser vendors.  We want to re-license
existing tests covered by the <a class="reference external" href="https://www.mozilla.org/en-US/MPL/2.0/">MPL</a> so that they can be shared.
We very much welcome your help in doing version control archeology
to make this happen!</p>
<p>The practical details of working on the Marionette code is outlined
in <a class="reference external" href="../CONTRIBUTING">CONTRIBUTING.md</a>, but generally you do not have to re-build
Firefox when changing code.  Any change to testing/marionette/*.js
will be picked up on restarting Firefox.  The only notable exception
is testing/marionette/components/marionette.js, which does require
a re-build.</p>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">Â¶</a></h2>
<p>TODO</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">Â¶</a></h2>
<p>We keep our documentation in-tree under <a class="reference external" href="https://searchfox.org/mozilla-central/source/testing/marionette/doc">testing/marionette/doc</a>
and <a class="reference external" href="https://searchfox.org/mozilla-central/source/testing/geckodriver/doc">testing/geckodriver/doc</a>.  Updates and minor changes to
documentation should ideally not be scrutinised to the same degree
as code changes to encourage frequent updates so that the documentation
does not go stale.  To that end, documentation changes with <code class="docutils literal notranslate"><span class="pre">r=me</span></code>
from module peers are permitted.</p>
<p>Use fmt(1) or an equivalent editor specific mechanism (such as Meta-Q
in Emacs) to format paragraphs at a maximum width of 75 columns
with a goal of roughly 65.  This is equivalent to <code class="docutils literal notranslate"><span class="pre">fmt</span> <span class="pre">-w</span> <span class="pre">75</span> <span class="pre">-g</span> <span class="pre">65</span></code>,
which happens to be the default on BSD and macOS.</p>
<p>We endeavour to document all <em>public APIs</em> of the Marionette component.
These include public functionsâ€”or command implementationsâ€”on
the <code class="docutils literal notranslate"><span class="pre">GeckoDriver</span></code> class, as well as all exported symbols from
other modules.  Documentation for non-exported symbols is not required.</p>
<p>The API documentation can be regenerated to [testing/marionette/doc/api]
so:</p>
<p>The API documentation uses <a class="reference external" href="http://usejsdoc.org/">jsdoc</a> and is generated to <a class="reference external" href="https://firefox-source-docs.mozilla.org/testing/marionette/marionette/internals">https://firefox-source-docs.mozilla.org/testing/marionette/marionette/internals</a> on Taskcluster.  You may also build the documentation locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="o">./</span><span class="n">mach</span> <span class="n">doc</span>
</pre></div>
</div>
</div>
<div class="section" id="linting">
<h2>Linting<a class="headerlink" href="#linting" title="Permalink to this headline">Â¶</a></h2>
<p>Marionette consists mostly of JavaScript (server) and Python (client,
harness, test runner) code.  We lint our code with <a class="reference external" href="https://firefox-source-docs.mozilla.org/tools/lint/usage.html">mozlint</a>,
which harmonises the output from <a class="reference external" href="https://eslint.org/">eslint</a> and <a class="reference external" href="http://flake8.pycqa.org/en/latest/">flake8</a>.</p>
<p>To run the linter with a sensible output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">-</span><span class="n">funix</span> <span class="n">testing</span><span class="o">/</span><span class="n">marionette</span>
</pre></div>
</div>
<p>For certain classes of style violations the eslint linter has
an automatic mode for fixing and formatting your code.  This is
particularly useful to keep to whitespace and indentation rules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="o">./</span><span class="n">mach</span> <span class="n">eslint</span> <span class="o">--</span><span class="n">fix</span> <span class="n">testing</span><span class="o">/</span><span class="n">marionette</span>
</pre></div>
</div>
<p>The linter is also run as a try job (shorthand <code class="docutils literal notranslate"><span class="pre">ES</span></code>) which means
any style violations will automatically block a patch from landing
(if using Autoland) or cause your changeset to be backed out (if
landing directly on mozilla-inbound).</p>
<p>If you use git(1) you can <a class="reference external" href="https://firefox-source-docs.mozilla.org/tools/lint/usage.html#using-a-vcs-hook">enable automatic linting</a> before you push
to a remote through a pre-push (or pre-commit) hook.  This will
run the linters on the changed files before a push and abort if
there are any problems.  This is convenient for avoiding a try run
failing due to a stupid linting issue.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SeleniumAtoms.html" class="btn btn-neutral float-right" title="Selenium atoms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Taskcluster.html" class="btn btn-neutral float-left" title="Testing with one-click loaners" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>