

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Schemas &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Implementing a function" href="functions.html" />
    <link rel="prev" title="API Implementation Basics" href="basics.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Toolkit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../featuregates/featuregates/index.html">Feature Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../search/index.html">Search Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../normandy/normandy/index.html">Shield Recipe Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../messaging-system/docs/index.html">Messaging System Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pictureinpicture/pictureinpicture/index.html">Picture-in-Picture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../prompts/prompts/index.html">Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/subprocess/toolkit_modules/subprocess/index.html">Subprocess Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glean/index.html">Firefox on Glean (FOG)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/toolkit_modules/index.html">Toolkit Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../content/toolkit_widgets/index.html">Toolkit Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">WebExtensions API Development</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="basics.html">API Implementation Basics</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">API Schemas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#implementing-a-fixed-javascript-property">Implementing a fixed Javascript property</a></li>
<li class="toctree-l4"><a class="reference internal" href="#schema-items">Schema Items</a></li>
<li class="toctree-l4"><a class="reference internal" href="#describing-constrained-values">Describing constrained values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">Implementing a function</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">Implementing an event</a></li>
<li class="toctree-l3"><a class="reference internal" href="manifest.html">Implementing a manifest property</a></li>
<li class="toctree-l3"><a class="reference internal" href="lifecycle.html">Managing the Extension Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="incognito.html">Incognito Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="other.html">Utilities for implementing APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference.html">WebExtensions Javascript Component Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Toolkit</a> &raquo;</li>
        
          <li><a href="index.html">WebExtensions API Development</a> &raquo;</li>
        
      <li>API Schemas</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/toolkit/components/extensions/webextensions/schema.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-schemas">
<h1>API Schemas<a class="headerlink" href="#api-schemas" title="Permalink to this headline">¶</a></h1>
<p>Anything that a WebExtension API exposes to extensions via Javascript
is described by the API’s schema.  The format of API schemas uses some
of the same syntax as <a class="reference external" href="http://json-schema.org/">JSON Schema</a>.
JSON Schema provides a way to specify constraints on JSON documents and
the same method is used by WebExtensions to specify constraints on,
for example, parameters passed to an API function.  But the syntax for
describing functions, namespaces, etc. is all ad hoc.  This section
describes that syntax.</p>
<p>An individual API schema consists of structured descriptions of
items in one or more <em>namespaces</em> using a structure like this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;namespace&quot;</span><span class="o">:</span> <span class="s2">&quot;namespace1&quot;</span><span class="p">,</span>
    <span class="c1">// declarations for namespace 1...</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;namespace&quot;</span><span class="o">:</span> <span class="s2">&quot;namespace2&quot;</span><span class="p">,</span>
    <span class="c1">// declarations for namespace 2...</span>
  <span class="p">},</span>
  <span class="c1">// other namespaces...</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Most of the namespaces correspond to objects available to extensions
Javascript code under the <code class="docutils literal notranslate"><span class="pre">browser</span></code> global.  For example, entries in the
namespace <code class="docutils literal notranslate"><span class="pre">example</span></code> are accessible to extension Javascript code as
properties on <code class="docutils literal notranslate"><span class="pre">browser.example</span></code>.
The namespace <code class="docutils literal notranslate"><span class="pre">&quot;manifest&quot;</span></code> is handled specially, it describes the
structure of WebExtension manifests (i.e., <code class="docutils literal notranslate"><span class="pre">manifest.json</span></code> files).
Manifest schemas are explained in detail below.</p>
<p>Declarations within a namespace look like:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;namespace&quot;</span><span class="o">:</span> <span class="s2">&quot;namespace1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;types&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="cm">/* type definition */</span> <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">],</span>
  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;NAME&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="cm">/* property definition */</span> <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
  <span class="s2">&quot;functions&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="cm">/* function definition */</span> <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">],</span>
  <span class="s2">&quot;events&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="cm">/* event definition */</span> <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The four types of objects that can be defined inside a namespace are:</p>
<ul class="simple">
<li><p><strong>types</strong>: A type is a re-usable schema fragment.  A common use of types
is to define in one place an object with a particular set of typed fields
that is used in multiple places in an API.</p></li>
<li><p><strong>properties</strong>: A property is a fixed Javascript value available to
extensions via Javascript.  Note that the format for defining
properties in a schema is different from the format for types, functions,
and events.  The next subsection describes creating properties in detail.</p></li>
<li><p><strong>functions</strong> and <strong>events</strong>:
These entries create functions and events respectively, which are
usable from Javascript by extensions.  Details on how to implement
them are later in this section.</p></li>
</ul>
<div class="section" id="implementing-a-fixed-javascript-property">
<h2>Implementing a fixed Javascript property<a class="headerlink" href="#implementing-a-fixed-javascript-property" title="Permalink to this headline">¶</a></h2>
<p>A static property is made available to extensions via Javascript
entirely from the schema, using a fragment like this one:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;namespace&quot;</span><span class="o">:</span> <span class="s2">&quot;myapi&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;SOME_PROPERTY&quot;</span><span class="o">:</span> <span class="p">{</span>
     <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">24</span><span class="p">,</span>
     <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Description of my property here.&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If a WebExtension API with this fragment in its schema is loaded for
a particular extension context, that extension will be able to access
<code class="docutils literal notranslate"><span class="pre">browser.myapi.SOME_PROPERTY</span></code> and read the fixed value 24.
The contents of <code class="docutils literal notranslate"><span class="pre">value</span></code> can be any JSON serializable object.</p>
</div>
<div class="section" id="schema-items">
<h2>Schema Items<a class="headerlink" href="#schema-items" title="Permalink to this headline">¶</a></h2>
<p>Most definitions of individual items in a schema have a common format:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SOME TYPE&quot;</span><span class="p">,</span>
  <span class="cm">/* type-specific parameters... */</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Type-specific parameters will be described in subsequent sections,
but there are some optional properties that can appear in many
different types of items in an API schema:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: This string-valued property serves as documentation
for anybody reading or editing the schema.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">permissions</span></code>: This property is an array of strings.
If present, the item in which this property appears is only made
available to extensions that have all the permissions listed in the array.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unsupported</span></code>: This property must be a boolean.
If it is true, the item in which it appears is ignored.
By using this property, a schema can define how a particular API
is intended to work, before it is implemented.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deprecated</span></code>: This property must be a boolean.  If it is true,
any uses of the item in which it appears will cause a warning to
be logged to the browser console, to indicate to extension authors
that they are using a feature that is deprecated or otherwise
not fully supported.</p></li>
</ul>
</div>
<div class="section" id="describing-constrained-values">
<h2>Describing constrained values<a class="headerlink" href="#describing-constrained-values" title="Permalink to this headline">¶</a></h2>
<p>There are many places where API schemas specify constraints on the type
and possibly contents of some JSON value (e.g., the manifest property
<code class="docutils literal notranslate"><span class="pre">name</span></code> must be a string) or Javascript value (e.g., the first argument
to <code class="docutils literal notranslate"><span class="pre">browser.tabs.get()</span></code> must be a non-negative integer).
These items are defined using <a class="reference external" href="http://json-schema.org/">JSON Schema</a>.
Specifically, these items are specified by using one of the following
values for the <code class="docutils literal notranslate"><span class="pre">type</span></code> property: <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>,
<code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">array</span></code>, <code class="docutils literal notranslate"><span class="pre">object</span></code>, or <code class="docutils literal notranslate"><span class="pre">any</span></code>.
Refer to the documentation and examples at the
<a class="reference external" href="http://json-schema.org/">JSON Schema site</a> for details on how these
items are defined in a schema.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="functions.html" class="btn btn-neutral float-right" title="Implementing a function" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="basics.html" class="btn btn-neutral float-left" title="API Implementation Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>