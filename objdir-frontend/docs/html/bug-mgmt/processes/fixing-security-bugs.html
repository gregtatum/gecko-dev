

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fixing Security Bugs &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="GitHub Metadata Recommendations" href="labels.html" />
    <link rel="prev" title="User documentation requests" href="doc-requests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Bug Handling</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#guides">Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#policies">Policies</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#processes">Processes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="doc-requests.html">User documentation requests</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Fixing Security Bugs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#keeping-private-information-private">Keeping private information private</a></li>
<li class="toctree-l4"><a class="reference internal" href="#during-development">During Development</a></li>
<li class="toctree-l4"><a class="reference internal" href="#essentials">Essentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation-contacts">Documentation &amp; Contacts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="labels.html">GitHub Metadata Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="regressions.html">How to Mark Regressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="security-approval.html">Security Bug Approval Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="shared-bug-queues.html">Shared Bug Queues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#related-documentation">Related documentation</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Bug Handling</a> &raquo;</li>
        
      <li>Fixing Security Bugs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/bug-mgmt/processes/fixing-security-bugs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fixing-security-bugs">
<h1>Fixing Security Bugs<a class="headerlink" href="#fixing-security-bugs" title="Permalink to this headline">¶</a></h1>
<p>A bug has been reported as security-sensitive in Bugzilla and received a
security rating.</p>
<p>If this bug is private - which is most likely for a reported security
bug - <strong>the process for patching is slightly different than the usual
process for fixing a bug</strong>.</p>
<p>Here are security guidelines to follow if you’re involved in reviewing,
testing and landing a security patch. See
<a class="reference internal" href="security-approval.html#security-bug-approval-process"><span class="std std-ref">Security Bug Approval Process</span></a>
for more details about how to request sec-approval and land the patch.</p>
<div class="section" id="keeping-private-information-private">
<h2>Keeping private information private<a class="headerlink" href="#keeping-private-information-private" title="Permalink to this headline">¶</a></h2>
<p>A security-sensitive bug in Bugzilla means that all information about
the bug except its ID number are hidden. This includes the title,
comments, reporter, assignee and CC’d people.</p>
<p>A security-sensitive bug usually remains private until a fix is shipped
in a new release, <strong>and after a certain amount of time to ensure that a
maximum number of users updated their version of Firefox</strong>. Bugs are
usually made public after 6 months and a couple of releases.</p>
<p>From the moment a security bug has been privately reported to the moment
a fix is shipped and the bug is set public, all information about that
bug need to be handled carefully in order to avoid an unmitigated
vulnerability to be known and exploited out there before we release a
fix (0-day).</p>
<p>During a normal process, information about the nature of bug can be
accessed through:</p>
<ul class="simple">
<li><p>Bug comments (Bugzilla, GitHub issue)</p></li>
<li><p>Commit message (visible on Bugzilla, tree check-ins and test servers)</p></li>
<li><p>Code comments</p></li>
<li><p>Test cases</p></li>
<li><p>Bug content can potentially be discussed on public IRC/Slack channels
and mailing list emails.</p></li>
</ul>
<p>When patching for a security bug, you’ll need to be mindful about what
type of information you share and where.</p>
<div class="section" id="in-commit-messages">
<h3>In commit messages<a class="headerlink" href="#in-commit-messages" title="Permalink to this headline">¶</a></h3>
<p>People are watching code check-ins, so we want to avoid sharing
information which would disclose or help finding a vulnerability too
easily before we shipped the fix to our users. This includes:</p>
<ul class="simple">
<li><p>The <strong>nature of the vulnerability</strong> (overflow, use-after-free, XSS,
CSP bypass…)</p></li>
<li><p><strong>Ways to trigger and exploit that vulnerability</strong>
- In commit messages, code comments and test cases.</p></li>
<li><p>The fact that a bug / commit is security-related:</p>
<ul>
<li><p><strong>Trigger words</strong> in the commit message or code comments such as “security”, “exploitable” or the nature of a security vulnerability (overflow, use-after-free…)</p></li>
<li><p><strong>Security approver’s name</strong> in a commit message.</p></li>
</ul>
</li>
<li><p>The Firefox versions and components affected by the vulnerability.</p></li>
<li><p>Patches with an obvious fix.</p></li>
</ul>
</div>
<div class="section" id="in-bugzilla-and-other-public-channels">
<h3>In Bugzilla and other public channels<a class="headerlink" href="#in-bugzilla-and-other-public-channels" title="Permalink to this headline">¶</a></h3>
<p>In addition to commits, you’ll need to be mindful of not disclosing
sensitive information about the bug in public places, such as Bugzilla:</p>
<ul class="simple">
<li><p><strong>Do not add public bugs in the “duplicate”, “depends on”, “blocks”
or “see also” section if these bugs could give hints about the nature
of the security issue.</strong></p>
<ul>
<li><p>Mention the bugs in comment of the private bug instead.</p></li>
</ul>
</li>
<li><p>Do not comment sensitive information in public related bugs.</p></li>
<li><p>Also be careful about who you give bug access to: <strong>double check
before CC’ing the wrong person or alias</strong>.</p></li>
</ul>
<p>On IRC, Slack channels, GitHub issues, mailing lists: If you need to
discuss about a security bug, use a private channel (protected with a
password or with proper right access management)</p>
</div>
</div>
<div class="section" id="during-development">
<h2>During Development<a class="headerlink" href="#during-development" title="Permalink to this headline">¶</a></h2>
<div class="section" id="testing-sec-high-and-sec-critical-bugs">
<h3>Testing sec-high and sec-critical bugs<a class="headerlink" href="#testing-sec-high-and-sec-critical-bugs" title="Permalink to this headline">¶</a></h3>
<p>Pushing to Try servers requires Level 1 Commit access but <strong>content
viewing is publicly accessible</strong>.</p>
<p>As much as possible, <strong>do not push to Try servers</strong>. Testing should be
done locally before checkin in order to prevent public disclosing of the
bug.</p>
<p>If you need to push to Try servers, make sure your tests don’t disclose
what the vulnerability is about or how to trigger it. Do not mention
anywhere it is security related.</p>
</div>
<div class="section" id="obfuscating-a-security-patch">
<h3>Obfuscating a security patch<a class="headerlink" href="#obfuscating-a-security-patch" title="Permalink to this headline">¶</a></h3>
<p>If your security patch looks obvious because of the code it contains
(e.g. a one-line fix), or if you really need to push to Try servers,
<strong>consider integrating your security-related patch to non-security work
in the same area</strong>. And/or pretend it is related to something else, like
some performance improvement or a correctness fix. <strong>Definitely don’t
include the bug number in the commit message.</strong> This will help making
the security issue less easily identifiable. (The absolute ban against
“Security through Obscurity” is in relation to cryptographic systems. In
other situations you still can’t <em>rely</em> on obscurity but it can
sometimes buy you a little time. In this context we need to get the
fixes into the hands of our users faster than attackers can weaponize
and deploy attacks and a little extra time can help.)</p>
</div>
<div class="section" id="requesting-sec-approval">
<h3>Requesting sec-approval<a class="headerlink" href="#requesting-sec-approval" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="security-approval.html#security-bug-approval-process"><span class="std std-ref">Security Bug Approval Process</span></a>
for more details</p>
</div>
<div class="section" id="landing-tests">
<h3>Landing tests<a class="headerlink" href="#landing-tests" title="Permalink to this headline">¶</a></h3>
<p>Tests can be landed <strong>after the release has gone live</strong> and <strong>not before
at least 4 weeks following that release</strong>.</p>
<p>The exception is if a security issue has never been shipped in a release
build and has been fixed in all development branches.</p>
</div>
<div class="section" id="making-a-security-bug-public">
<h3>Making a security bug public<a class="headerlink" href="#making-a-security-bug-public" title="Permalink to this headline">¶</a></h3>
<p>This is the responsibility of the security management team.</p>
</div>
</div>
<div class="section" id="essentials">
<h2>Essentials<a class="headerlink" href="#essentials" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Do not disclose any information about the vulnerability before a
release with a fix has gone live for enough time for users to update
their software</strong>.</p>
<ul>
<li><p>This includes code comments, commit messages, tests, public
communication channels.</p></li>
</ul>
</li>
<li><p>If any doubt: ‘’’request sec-approval? ‘’’</p></li>
<li><p>If any doubt: <strong>needinfo security folks</strong>.</p></li>
<li><p><strong>If there’s no rating, assume the worst and treat the bug as
sec-critical</strong>.</p></li>
</ul>
</div>
<div class="section" id="documentation-contacts">
<h2>Documentation &amp; Contacts<a class="headerlink" href="#documentation-contacts" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../contributing/how_to_submit_a_patch.html#how-to-submit-a-patch"><span class="std std-ref">Normal process for submitting a patch</span></a></p></li>
<li><p><a class="reference external" href="https://wiki.mozilla.org/Security/Fileabug">How to file a security bug</a></p></li>
<li><p><a class="reference external" href="https://www.mozilla.org/en-US/about/governance/policies/security-group/bugs/">Handling Mozilla security bugs (policy)</a></p></li>
<li><p><a class="reference external" href="security-approval">Security Bug Approval Process</a></p></li>
<li><p><a class="reference external" href="https://wiki.mozilla.org/Security">Contacting the Security team(s) at Mozilla:</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="labels.html" class="btn btn-neutral float-right" title="GitHub Metadata Recommendations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="doc-requests.html" class="btn btn-neutral float-left" title="User documentation requests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>