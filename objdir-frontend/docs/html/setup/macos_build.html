

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building Firefox On MacOS &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building Firefox On Linux" href="linux_build.html" />
    <link rel="prev" title="Building Firefox On Windows" href="windows_build.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Set Up To Work On The Firefox Codebase</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_set_up.html">Welcome to the Firefox codebase!</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_set_up.html#what-skills-do-i-need">What skills do I need?</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows_build.html">Building Firefox On Windows</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building Firefox On MacOS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build-steps-details">Build steps (details)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install-xcode-and-xcode-command-line-tools">1.1 Install Xcode and Xcode command line tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-the-local-macos-sdk">1.2 Get the local macOS SDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-supplementary-build-tools">2. Install supplementary build tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-mercurial">2.2 Install Mercurial</a></li>
<li class="toctree-l4"><a class="reference internal" href="#obtain-a-copy-of-the-mozilla-source-code">3. Obtain a copy of the Mozilla source code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-the-build-options">4. Configure the build options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build">5. Build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hardware-requirements">Hardware requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-requirements">Software requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="linux_build.html">Building Firefox On Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing_code.html">How To Contribute Code To Firefox</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Getting Set Up To Work On The Firefox Codebase</a> &raquo;</li>
        
      <li>Building Firefox On MacOS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/setup/macos_build.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-firefox-on-macos">
<h1>Building Firefox On MacOS<a class="headerlink" href="#building-firefox-on-macos" title="Permalink to this headline">¶</a></h1>
<p>This document will help you get set up to build Firefox on your own
computer. Getting set up won’t be difficult, but it can take a while -
we need to download a lot of bytes! Even on a fast connection, this can
take ten to fifteen minutes of work, spread out over an hour or two.</p>
<p>The details are further down this page, but this quick-start guide
should get you up and running:</p>
<p class="rubric" id="quick-start-try-this-first">Quick start (Try this first!)</p>
<p class="rubric" id="prerequisites">Prerequisites</p>
<p>You will need:</p>
<ul class="simple">
<li><p>an Apple ID to download and install Apple-distributed developer tools
mentioned below</p></li>
<li><p>from 5 minutes to 1 hour to download and install Xcode, which is
large</p></li>
<li><p>download and install a local copy of specific macOS SDK version</p></li>
</ul>
<p>You will need administrator permissions on your machine to install these
prerequisites. (You can verify that you have these permissions in System
Preferences -&gt; Users &amp; Groups.)</p>
<p>See <a class="reference internal" href="#xcode"><span class="std std-ref">1.1 Install Xcode and Xcode command line tools</span></a> and <a class="reference internal" href="#macossdk"><span class="std std-ref">1.2
Get the local macOS SDK</span></a> for more information on how to
install these prerequisites.</p>
<p class="heading-tertiary rubric" id="getting-the-source">Getting the source</p>
<p>Firstly you need to prepare a directory and get the bootstrap script
that will do the rest:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># the bootstrap script needs this directory, but you can choose a different target directory for the Mozilla code later</span>
<span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> mkdir -p src <span class="o">&amp;&amp;</span> <span class="nb">cd</span> src

<span class="c1"># download the bootstrap script</span>
curl https://hg.mozilla.org/mozilla-central/raw-file/default/python/mozboot/bin/bootstrap.py -o bootstrap.py
</pre></div>
</div>
<p>If you don’t have Python 3.6 or later or Mercurial installed, see <span class="xref std std-ref">2.1a Install
dependencies via Homebrew</span> for more information on how
to do so. Then in your terminal from above start the bootstrapper like this:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python3 bootstrap.py
</pre></div>
</div>
<p>… and follow the prompts. This will use mercurial to checkout the
source code. If you prefer to work with git, use this command instead:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python3 bootstrap.py --vcs<span class="o">=</span>git
</pre></div>
</div>
<p>If you don’t have <a class="reference external" href="https://brew.sh/">Homebrew</a> or
<a class="reference external" href="https://www.macports.org/">Ports</a> installed - software package
managers that will let us install some programs we’ll need - you’ll be
asked to pick one. Either will work, but most Mozilla developers use
Homebrew.</p>
<p>If you don’t let the <code class="docutils literal notranslate"><span class="pre">bootstrap.py</span></code> script clone the source for you
make sure you do it manually afterward before moving onto the next step.</p>
<p class="heading-tertiary highlight-spanned rubric" id="build-firefox">Build Firefox!</p>
<p>Now we tie it all together.</p>
<p>In your terminal window, <code class="docutils literal notranslate"><span class="pre">cd</span></code> to your Mozilla source directory chosen
before (<code class="docutils literal notranslate"><span class="pre">mozilla-unified</span></code>) and type:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a minimal build options file</span>
<span class="nb">echo</span> <span class="s2">&quot;ac_add_options --with-macos-sdk=</span><span class="nv">$HOME</span><span class="s2">/SDK-archive/MacOSX10.11.sdk&quot;</span> &gt;&gt; mozconfig

./mach bootstrap

./mach build
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">./mach</span> <span class="pre">bootstrap</span></code> step is a catch-all for any dependencies not
covered in this documentation. If you are working on Firefox frontends
or building Firefox without any changes, select <a class="reference internal" href="../contributing/build/artifact_builds.html#understanding-artifact-builds"><span class="std std-ref">Artifact Builds</span></a> in
the first question in <code class="docutils literal notranslate"><span class="pre">./mach</span> <span class="pre">bootstrap</span></code>.  Artifact builds will
complete more quickly!  Artifact builds are unsuitable for those working
on C++ code.</p>
<p>You’re on your way. Don’t be discouraged if this takes a while; it takes
some time even on the fastest modern machines and as much as two hours
or more on older hardware. Firefox is pretty big, because the Web is
big.</p>
<p class="heading-tertiary rubric" id="now-the-fun-starts">Now the Fun Starts</p>
<p>You have the code, you’ve compiled Firefox. Fire it up with
<code class="docutils literal notranslate"><span class="pre">./mach</span> <span class="pre">run</span></code> and you’re ready to start hacking.</p>
<div class="section" id="build-steps-details">
<h2>Build steps (details)<a class="headerlink" href="#build-steps-details" title="Permalink to this headline">¶</a></h2>
<p>Building on macOS is divided into the following steps:</p>
<ol class="arabic simple">
<li><p>Install Apple-distributed developer tools - Xcode, Xcode cli tools
and macOS SDK locally</p></li>
<li><p>Install supplementary build tools</p></li>
<li><p>Obtain a copy of the Mozilla source code</p></li>
<li><p>Configure the Mozilla source tree to suit your needs</p></li>
<li><p>Build Firefox</p></li>
</ol>
<div class="section" id="install-xcode-and-xcode-command-line-tools">
<span id="xcode"></span><h3>1.1 Install Xcode and Xcode command line tools<a class="headerlink" href="#install-xcode-and-xcode-command-line-tools" title="Permalink to this headline">¶</a></h3>
<p>You first need to install Xcode, for which you have two options but both
require you to sign in with an Apple ID:</p>
<ul class="simple">
<li><p>From Apple Developer Download page - <a class="reference external" href="https://developer.apple.com/download/release/">direct
link</a>. Install the
latest <strong>release</strong> (non-beta) version of Xcode, open <code class="docutils literal notranslate"><span class="pre">Xcode.xip</span></code>,
and then <strong>before</strong> <strong>running the extracted Xcode.app, move it from
the download folder to /Applications</strong>. (Running it from another
location may screw up various build paths, homebrew builds, etc. Fix
by running <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xcode-select</span> <span class="pre">-switch</span> <span class="pre">/Applications/Xcode.app</span></code> )</p></li>
<li><p>From the Mac App Store - <a class="reference external" href="https://apps.apple.com/us/app/xcode">direct
link</a>.</p></li>
</ul>
<p>Open /Applications/Xcode.app and let it do its initial first run and
setup stuff.</p>
<p>Install the Xcode command line tools by
running <code class="docutils literal notranslate"><span class="pre">xcode-select</span> <span class="pre">--install</span></code> in your terminal.</p>
</div>
<div class="section" id="get-the-local-macos-sdk">
<span id="macossdk"></span><h3>1.2 Get the local macOS SDK<a class="headerlink" href="#get-the-local-macos-sdk" title="Permalink to this headline">¶</a></h3>
<p>Firefox currently requires a local copy of macOS 10.11 SDK to build (all
your other apps will still use your more recent version of this SDK,
most probably matching your macOS version).</p>
<p>There are various issues when building the Mozilla source code with
other SDKs and that’s why we recommend this specific version.</p>
<p>To get the 10.11 SDK, first download Xcode 7.3.1 from the <a class="reference external" href="https://developer.apple.com/download/more/">More
Downloads for Apple
Developers</a> page. Once
downloaded, mount the .dmg file. Then in the Terminal run the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir -p <span class="nv">$HOME</span>/SDK-archive
cp -a /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk <span class="nv">$HOME</span>/SDK-archive/MacOSX10.11.sdk
</pre></div>
</div>
</div>
<div class="section" id="install-supplementary-build-tools">
<h3>2. Install supplementary build tools<a class="headerlink" href="#install-supplementary-build-tools" title="Permalink to this headline">¶</a></h3>
<p>Mozilla’s source tree requires a number of third-party tools and
applications to build it. You will need to install these before you can
build anything.</p>
<p>You have the choice of how to install all these components. You can use
a package manager like Homebrew or Ports. Or, you can obtain, compile,
and install them individually. For simplicity and to save your time,
using a package manager is recommended. The following sections describe
how to install the packages using existing package managers. Choose
whatever package manager you prefer.</p>
<div class="section" id="a-install-dependencies-via-homebrew">
<span id="install-via-homebrew"></span><h4>2.1a Install dependencies via Homebrew<a class="headerlink" href="#a-install-dependencies-via-homebrew" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://brew.sh/">Homebrew</a> is “the missing package manager for
macOS.” It provides a simple command-line interface to install packages,
typically by compiling them from source.</p>
<p>The first step is to install Homebrew. See <a class="reference external" href="https://brew.sh/">https://brew.sh/</a></p>
<p>Once you have Homebrew installed, you’ll need to run the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>brew install yasm mercurial gawk ccache python
</pre></div>
</div>
<p>Python 2 is never necessary solely to build Firefox, but it is still required
for some development tasks (including testing and pushing to <code class="docutils literal notranslate"><span class="pre">try</span></code>). If your
system does not already have a Python 2 installed, you can use <code class="docutils literal notranslate"><span class="pre">brew</span></code> to
install one:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>brew install https://raw.githubusercontent.com/Homebrew/homebrew-core/86a44a0a552c673a05f11018459c9f5faae3becc/Formula/python@2.rb
</pre></div>
</div>
</div>
<div class="section" id="b-install-dependencies-via-macports">
<h4>2.1b Install Dependencies via MacPorts<a class="headerlink" href="#b-install-dependencies-via-macports" title="Permalink to this headline">¶</a></h4>
<p>MacPorts is a package manager for macOS. If you are running Homebrew,
you can ignore this section.</p>
<p>To install MacPorts, go to their <a class="reference external" href="http://www.macports.org/install.php">install
page</a>, download the .dmg for
your platform, and install it. If you already have MacPorts installed,
ensure it is up to date by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">port</span> <span class="n">selfupdate</span>
<span class="n">sudo</span> <span class="n">port</span> <span class="n">sync</span>
</pre></div>
</div>
<p>The first of these commands will ask for your root password.</p>
<p>Common errors include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sudo</span></code> doesn’t accept a blank password: create a password for your
account in System Preferences.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">port</span></code> command not found: add it to your path (see the
troubleshooting section below).</p></li>
</ul>
<p>Use MacPorts to install the packages needed for building Firefox:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">libidl</span> <span class="n">yasm</span> <span class="n">python27</span> <span class="n">py27</span><span class="o">-</span><span class="n">gnureadline</span>
</pre></div>
</div>
<p>You’ll then see lots of output as MacPorts builds and installs these
packages and their dependencies – it takes a while, so go grab a cup of
coffee.</p>
<p><strong>Note:</strong> By default, this will install Python 2.7, which in turn will
pull in all of the X11 libraries, which may take a while to build. You
don’t need any of those to build Firefox; you may want to consider
adding +no_tkinter to the install line to build a python without
support for the X11 UI packages. This should result in a much faster
install.</p>
<p><strong>Note:</strong> With older versions of Xcode (eg 6.4) you may need to use
MacPorts to get the proper version of clang, such as clang-3.6 or later.
See bugs in Core, Build Config referring to clang.</p>
</div>
</div>
<div class="section" id="install-mercurial">
<h3>2.2 Install Mercurial<a class="headerlink" href="#install-mercurial" title="Permalink to this headline">¶</a></h3>
<p>Mozilla’s source code is hosted in Mercurial repositories. You use
Mercurial to interact with these repositories. There are many ways to
install Mercurial on macOS:</p>
<ol class="arabic simple">
<li><p>Install <a class="reference external" href="http://mercurial.selenic.com/">official builds from
Selenic</a></p></li>
<li><p>Install via MacPorts:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo port install mercurial
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Install via Homebrew:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>brew install mercurial
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Install via Pip:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>easy_install pip <span class="o">&amp;&amp;</span> pip install mercurial
</pre></div>
</div>
<p>Once you have installed Mercurial, test it by running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>hg version
</pre></div>
</div>
<p>If this works, congratulations! You’ll want to configure your Mercurial
settings to match other developers. See <a class="reference internal" href="../contributing/vcs/mercurial.html#mercurial-overview"><span class="std std-ref">Getting Mozilla Source Code
Using Mercurial</span></a>.</p>
<p>If this fails with the error “<code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">unknown</span> <span class="pre">locale:</span> <span class="pre">UTF-8</span></code>”,
then see the
<a class="reference external" href="http://www.selenic.com/mercurial/wiki/index.cgi/UnixInstall#head-1c10f216d5b9ccdcb2613ea37d407eb45f22a394">workarounds</a>
on the Mercurial wiki’s Unix Install page.</p>
<p>When trying to clone a repository you may get an HTTP 500 error
(internal server error). This seems to be due to something that Mac
Mercurial sends to the server (it’s been observed both with MacPort and
selenic.com Mercurial binaries). Try restarting your shell, your
computer, or reinstall Mercurial (in that order), then report back here
what worked, please.</p>
</div>
<div class="section" id="obtain-a-copy-of-the-mozilla-source-code">
<h3>3. Obtain a copy of the Mozilla source code<a class="headerlink" href="#obtain-a-copy-of-the-mozilla-source-code" title="Permalink to this headline">¶</a></h3>
<p>You may want to read <a class="reference internal" href="../contributing/vcs/mercurial.html#mercurial-overview"><span class="std std-ref">Getting Mozilla Source Code
Using Mercurial</span></a> for the
complete instructions.</p>
<p>If you are interested in Firefox development only then run the following
command, which will create a new directory, <code class="docutils literal notranslate"><span class="pre">mozilla-unified</span></code>, in the
current one with the contents of the remote repository.</p>
<p>Below command will take many minutes to run, as it will be copying a
couple hundred megabytes of data over the internet.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hg</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">hg</span><span class="o">.</span><span class="n">mozilla</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">mozilla</span><span class="o">-</span><span class="n">unified</span><span class="o">/</span>
<span class="n">cd</span> <span class="n">mozilla</span><span class="o">-</span><span class="n">unified</span>
</pre></div>
</div>
<p>(If you are building Firefox for Android, you should now return to the
<a class="reference external" href="https://wiki.mozilla.org/Mobile/Fennec/Android#Mac_OS_X">Android build instructions</a>.)</p>
</div>
<div class="section" id="configure-the-build-options">
<h3>4. Configure the build options<a class="headerlink" href="#configure-the-build-options" title="Permalink to this headline">¶</a></h3>
<p>In your checked out source tree create a new file, <code class="docutils literal notranslate"><span class="pre">mozconfig</span></code>, which
will contain your build options. For more on this file, see <a class="reference internal" href="configuring_build_options.html#configuring-build-options"><span class="std std-ref">Configuring Build Options</span></a>.</p>
<p>To get started quickly, create the file with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Define where build files should go. This places them in the directory
# &quot;obj-ff-dbg&quot; under the current source directory
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj-ff-dbg

# Enable debug builds
ac_add_options --enable-debug

# Use the local copy of specific version of macOS SDK compatible with Mozilla source code
ac_add_options --with-macos-sdk=$HOME/SDK-archive/MacOSX10.11.sdk
</pre></div>
</div>
<p>Firefox no longer builds with gcc 4.8 or earlier, but the build system
should automatically select clang if it is available in the PATH. If
that is not the case, you need to set CC and CXX. For instance, if you
installed Clang 9 via Homebrew, then you need to have this in your
<code class="docutils literal notranslate"><span class="pre">mozconfig</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CC</span><span class="o">=</span><span class="n">clang</span><span class="o">-</span><span class="mi">9</span>
<span class="n">CXX</span><span class="o">=</span><span class="n">clang</span><span class="o">++-</span><span class="mi">9</span>
</pre></div>
</div>
</div>
<div class="section" id="build">
<h3>5. Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h3>
<p>Once you have your <code class="docutils literal notranslate"><span class="pre">mozconfig</span></code> file in place, you should be able to
build!</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./mach build
</pre></div>
</div>
<p>If the build step works, you should be able to find the built
application inside <code class="docutils literal notranslate"><span class="pre">obj-ff-dbg/dist/</span></code>. If building the browser with
<code class="docutils literal notranslate"><span class="pre">--enable-debug</span></code>, the name of the application is <code class="docutils literal notranslate"><span class="pre">NightlyDebug.app</span></code>.
To launch the application, try running the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./mach run
</pre></div>
</div>
<p><strong>Note:</strong> The compiled application may also be named after the branch
you’re building; for example, if you changed these instructions to fetch
the <code class="docutils literal notranslate"><span class="pre">mozilla-1.9.2</span></code> branch, the application will be named
<code class="docutils literal notranslate"><span class="pre">Namoroka.app</span></code> or <code class="docutils literal notranslate"><span class="pre">NamorokaDebug.app</span></code>.</p>
</div>
</div>
<div class="section" id="hardware-requirements">
<h2>Hardware requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h2>
<p>There are no specific hardware requirements, provided that the hardware
accommodates all of the <a class="reference external" href="#Software_Requirements">software</a> required
to build Firefox. Firefox can take a long time to build, so more CPU,
more RAM and lots of fast disks are always recommended.</p>
<ul class="simple">
<li><p><strong>Processor:</strong> Intel CPUs are required. Building for PowerPC chips is
not supported.</p></li>
<li><p><strong>Memory:</strong> 2GB RAM minimum, 8GB recommended.</p></li>
<li><p><strong>Disk Space:</strong> At least 30GB of free disk space.</p></li>
</ul>
</div>
<div class="section" id="software-requirements">
<h2>Software requirements<a class="headerlink" href="#software-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Operating System:</strong> Mac OS X 10.9 or later. It is advisable to
upgrade to the latest “point” release by running Software Update,
found in the Apple menu. You will need administrative privileges to
set up your development environment</p></li>
<li><p><strong>Development Environment:</strong> Xcode. You can obtain from the App
Store.</p></li>
<li><p><strong>Package Management:</strong> Either
<em>`MacPorts &lt;http://www.macports.org/&gt;`__</em> or Homebrew.</p></li>
</ul>
<p>These options are specific to Mozilla builds for macOS. For a more
general overview of build options and the <code class="docutils literal notranslate"><span class="pre">mozconfig</span></code> file, see
<a class="reference internal" href="configuring_build_options.html#configuring-build-options"><span class="std std-ref">Configuring Build Options</span></a>. For
specific information on configuring to build a universal binary, see
<a class="reference external" href="https://developer.mozilla.org/en/Mac_OS_X_Universal_Binaries">Mac OS X Universal Binaries</a>.</p>
<ul class="simple">
<li><p><strong>Compiler:</strong> Firefox releases are no longer built with gcc-4.8 or
earlier. A recent copy of clang is needed.</p>
<ul>
<li><p>There are some options on where to get clang:</p>
<ul>
<li><p>Newer versions of Xcode. The one in Xcode 7.0 or newer and the
open source 3.6 release should work.
(Xcode 6.4 is based on pre-release of clang 3.6, that doesn’t
match to requirement.)</p></li>
<li><p>Following the instructions in the <a class="reference external" href="http://clang.llvm.org/get_started.html">clang
website</a> for
information on how to get it.</p></li>
<li><p>Using some of the package managers (see above).</p></li>
</ul>
</li>
<li><p>Once clang is installed, make sure it is on the PATH and configure
should use it.</p></li>
</ul>
</li>
</ul>
<p>The following options, specified with <code class="docutils literal notranslate"><span class="pre">ac_add_options</span></code>, are lines that
are intended to be added to your <code class="docutils literal notranslate"><span class="pre">mozconfig</span></code> file.</p>
<ul class="simple">
<li><p>macOS <strong>SDK:</strong> This selects the version of the system headers and
libraries to build against, ensuring that the product you build will
be able to run on older systems with less complete APIs available.
Selecting an SDK with this option overrides the default headers and
libraries in <code class="docutils literal notranslate"><span class="pre">/usr/include</span></code>, <code class="docutils literal notranslate"><span class="pre">/usr/lib</span></code>, and <code class="docutils literal notranslate"><span class="pre">/System/Library</span></code>.
Mac macOS SDKs are installed in <code class="docutils literal notranslate"><span class="pre">/Developer/SDKs</span></code> during the <cite>Xcode
installation &lt;#Software_Requirements&gt;</cite> by selecting the <strong>Cross
Development</strong> category in the installer’s <strong>Customize</strong> screen.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>    ac_add_options --with-macos-sdk<span class="o">=</span>/path/to/SDK

Official trunk builds use <span class="sb">`</span>/Developer/SDKs/MacOSX10.11.sdk<span class="sb">`</span>. Check
<span class="sb">`</span>build/macosx/universal/mozconfig.common &lt;https://searchfox.org/mozilla-central/source/build/macosx/cross-mozconfig.common&gt;<span class="sb">`</span>__
<span class="k">for</span> the SDK version used <span class="k">for</span> official builds of any particular <span class="nb">source</span>
release.

Applications built against a particular SDK will usually run on
earlier versions of Mac macOS as long as they are careful not to use
features or frameworks only available on later versions. Note that
some frameworks <span class="o">(</span>notably AppKit<span class="o">)</span> behave differently at runtime
depending on which SDK was used at build time. This may be the <span class="nb">source</span>
of bugs that only appear on certain platforms or in certain builds.
</pre></div>
</div>
<p>For macOS builds, defines are set up as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">XP_MACOSX</span></code> is defined</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XP_UNIX</span></code> is defined</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XP_MAC</span></code> is <strong>not</strong> defined. <code class="docutils literal notranslate"><span class="pre">XP_MAC</span></code> is obsolete and has been
removed from the source tree (see {{ Bug(281889) }}). It was used for
CFM (non-Mach-O) builds for the classic (pre-X) Mac OS.</p></li>
</ul>
<p>This requires care when writing code for Unix platforms that exclude
Mac:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#if defined(XP_UNIX) &amp;&amp; !defined(XP_MACOSX)</span>
</pre></div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>If configure (or generally building with clang) fails with
``fatal error: ‘stdio.h’ file not found``:</strong> Make sure the Xcode
command line tools are installed by running.
<code class="docutils literal notranslate"><span class="pre">xcode-select</span> <span class="pre">--install</span></code>. [jgilbert] found this necessary during an
install for 10.9.</p></li>
<li><p><strong>For inexplicable errors in the configure phase:</strong> Review all
modifications of your PATH in .bash_profile, .bash_rc or whatever
configuration file you’re using for your chosen shell. Removing all
modifications and then re-adding them one-by-one can narrow down
problems.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="linux_build.html" class="btn btn-neutral float-right" title="Building Firefox On Linux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="windows_build.html" class="btn btn-neutral float-left" title="Building Firefox On Windows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>