

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running Linters Locally &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Adding a New Linter to the Tree" href="create.html" />
    <link rel="prev" title="Linting" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Code quality</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../static-analysis.html">Static analysis</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Linting</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Running Linters Locally</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-the-command-line">Using the Command Line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-a-vcs-hook">Using a VCS Hook</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fixing-lint-errors">Fixing Lint Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="create.html">Adding a New Linter to the Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/black.html">Black</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/clang-format.html">clang-format</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/clippy.html">clippy</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/codespell.html">Codespell</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/cpp-virtual-final.html">cpp virtual final</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/eslint.html">ESLint</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/eslint-plugin-mozilla.html">Mozilla ESLint Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/eslint-plugin-spidermonkey-js.html">Mozilla ESLint SpiderMonkey JS</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/file-perm.html">File permission</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/file-whitespace.html">Trailing whitespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/flake8.html">Flake8</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/l10n.html">L10n</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/license.html">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/lintpref.html">Lintpref</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/mingw-capitalization.html">MinGW capitalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/perfdocs.html">PerfDocs</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/pylint.html">pylint</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/rejected-words.html">Rejected words</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/rstlinter.html">RST Linter</a></li>
<li class="toctree-l3"><a class="reference internal" href="linters/rustfmt.html">Rustfmt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../coding-style/index.html">Coding style</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Code quality</a> &raquo;</li>
        
          <li><a href="index.html">Linting</a> &raquo;</li>
        
      <li>Running Linters Locally</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/code-quality/lint/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-linters-locally">
<h1>Running Linters Locally<a class="headerlink" href="#running-linters-locally" title="Permalink to this headline">¶</a></h1>
<div class="section" id="using-the-command-line">
<h2>Using the Command Line<a class="headerlink" href="#using-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>You can run all the various linters in the tree using the <code class="docutils literal notranslate"><span class="pre">mach</span> <span class="pre">lint</span></code> command. Simply pass in the
directory or file you wish to lint (defaults to current working directory):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">files</span>
</pre></div>
</div>
<p>Multiple paths are allowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">foo</span><span class="o">.</span><span class="n">js</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">bar</span><span class="o">.</span><span class="n">py</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="nb">dir</span>
</pre></div>
</div>
<p>To force execution on a directory that would otherwise be excluded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">-</span><span class="n">n</span> <span class="n">path</span><span class="o">/</span><span class="ow">in</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">exclude</span><span class="o">/</span><span class="nb">list</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Mozlint</span></code> will automatically determine which types of files exist, and which linters need to be run
against them. For example, if the directory contains both JavaScript and Python files then mozlint
will automatically run both ESLint and Flake8 against those files respectively.</p>
<p>To restrict which linters are invoked manually, pass in <code class="docutils literal notranslate"><span class="pre">-l/--linter</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">-</span><span class="n">l</span> <span class="n">eslint</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">files</span>
</pre></div>
</div>
<p>You can see a list of the available linters by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="nb">list</span>
</pre></div>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">mozlint</span></code> can lint the files touched by outgoing revisions or the working directory using
the <code class="docutils literal notranslate"><span class="pre">-o/--outgoing</span></code> and <code class="docutils literal notranslate"><span class="pre">-w/--workdir</span></code> arguments respectively. These work both with mercurial and
git. In the case of <code class="docutils literal notranslate"><span class="pre">--outgoing</span></code>, the default remote repository the changes would be pushed to is
used as the comparison. If desired, a remote can be specified manually. In git, you may only want to
lint staged commits from the working directory, this can be accomplished with <code class="docutils literal notranslate"><span class="pre">--workdir=staged</span></code>.
Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">workdir</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">workdir</span><span class="o">=</span><span class="n">staged</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">outgoing</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">outgoing</span> <span class="n">origin</span><span class="o">/</span><span class="n">master</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">-</span><span class="n">wo</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-vcs-hook">
<h2>Using a VCS Hook<a class="headerlink" href="#using-a-vcs-hook" title="Permalink to this headline">¶</a></h2>
<p>There are also both pre-commit and pre-push version control hooks that work in
either hg or git. To enable a pre-push hg hook, add the following to hgrc:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">hooks</span><span class="p">]</span>
<span class="n">pre</span><span class="o">-</span><span class="n">push</span><span class="o">.</span><span class="n">lint</span> <span class="o">=</span> <span class="n">python</span><span class="p">:</span><span class="o">./</span><span class="n">tools</span><span class="o">/</span><span class="n">lint</span><span class="o">/</span><span class="n">hooks</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="n">hg</span>
</pre></div>
</div>
<p>To enable a pre-commit hg hook, add the following to hgrc:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">hooks</span><span class="p">]</span>
<span class="n">pretxncommit</span><span class="o">.</span><span class="n">lint</span> <span class="o">=</span> <span class="n">python</span><span class="p">:</span><span class="o">./</span><span class="n">tools</span><span class="o">/</span><span class="n">lint</span><span class="o">/</span><span class="n">hooks</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="n">hg</span>
</pre></div>
</div>
<p>To enable a pre-push git hook, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ln -s /path/to/gecko/tools/lint/hooks.py .git/hooks/pre-push
</pre></div>
</div>
<p>To enable a pre-commit git hook, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ln -s /path/to/gecko/tools/lint/hooks.py .git/hooks/pre-commit
</pre></div>
</div>
</div>
</div>
<div class="section" id="fixing-lint-errors">
<h1>Fixing Lint Errors<a class="headerlink" href="#fixing-lint-errors" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Mozlint</span></code> has a best-effort ability to fix lint errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./mach lint --fix
</pre></div>
</div>
<p>Not all linters support fixing, and even the ones that do can not usually fix
all types of errors. Any errors that cannot be automatically fixed, will be
printed to stdout like normal. In that case, you can also fix errors manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./mach lint --edit
</pre></div>
</div>
<p>This requires the $EDITOR environment variable be defined. For most editors,
this will simply open each file containing errors one at a time. For vim (or
neovim), this will populate the <a class="reference external" href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html">quickfix list</a> with the errors.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--fix</span></code> and <code class="docutils literal notranslate"><span class="pre">--edit</span></code> arguments can be combined, in which case any
errors that can be fixed automatically will be, and the rest will be opened
with your $EDITOR.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="create.html" class="btn btn-neutral float-right" title="Adding a New Linter to the Tree" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Linting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>