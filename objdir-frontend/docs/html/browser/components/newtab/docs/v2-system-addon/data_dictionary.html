

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Activity Stream Pings &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script src="../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Metrics we collect" href="data_events.html" />
    <link rel="prev" title="The about:home startup cache" href="about_home_startup_cache.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Firefox</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../urlbar/index.html">Address Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../BrowserUsageTelemetry.html">Browser Usage Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../enterprisepolicies/docs/index.html">Enterprise Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extensions/formautofill/docs/index.html">Form Autofill</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Firefox Home (New Tab)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#for-jsm-files">For .jsm files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#for-js-jsx-sass-or-css-files">For .js, .jsx, .sass, or .css files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#building-assets-and-running-firefox">Building assets and running Firefox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#continuous-development-debugging">Continuous development / debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#code-coverage">Code Coverage</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#detailed-docs">Detailed Docs</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="about_home_startup_cache.html">The <code class="docutils literal notranslate"><span class="pre">about:home</span></code> startup cache</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Activity Stream Pings</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_events.html">Metrics we collect</a></li>
<li class="toctree-l4"><a class="reference internal" href="geo_locale.html">Custom <code class="docutils literal notranslate"><span class="pre">geo</span></code>, <code class="docutils literal notranslate"><span class="pre">locale</span></code>, and update channels</a></li>
<li class="toctree-l4"><a class="reference internal" href="mochitests.html">Mochitests</a></li>
<li class="toctree-l4"><a class="reference internal" href="preferences.html">Preferences</a></li>
<li class="toctree-l4"><a class="reference internal" href="remote_cfr.html">Remote CFR Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="sections.html">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="telemetry.html">Telemetry checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="tippytop.html">TippyTop in Activity Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="unit_testing_guide.html">Unit testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installer/windows/installer/index.html">Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../toolkit/mozapps/defaultagent/default-browser-agent/index.html">Default Browser Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../content-src/asrouter/docs/index.html">Messaging System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../base/tabbrowser/index.html">tabbrowser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../touchbar/index.html">Touch Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../uitour/docs/index.html">UITour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../payments/docs/index.html">WebPayments UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Firefox</a> &raquo;</li>
        
          <li><a href="../index.html">Firefox Home (New Tab)</a> &raquo;</li>
        
      <li>Activity Stream Pings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/browser/components/newtab/docs/v2-system-addon/data_dictionary.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="activity-stream-pings">
<h1>Activity Stream Pings<a class="headerlink" href="#activity-stream-pings" title="Permalink to this headline">¶</a></h1>
<p>The Activity Stream system add-on sends various types of pings to the backend (HTTPS POST) <a class="reference external" href="https://github.com/mozilla/onyx">Onyx server</a> :</p>
<ul class="simple">
<li><p>a <code class="docutils literal notranslate"><span class="pre">health</span></code> ping that reports whether or not a user has a custom about:home or about:newtab page</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">session</span></code> ping that describes the ending of an Activity Stream session (a new tab is closed or refreshed), and</p></li>
<li><p>an <code class="docutils literal notranslate"><span class="pre">event</span></code> ping that records specific data about individual user interactions while interacting with Activity Stream</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">performance</span></code> ping that records specific performance related events</p></li>
<li><p>an <code class="docutils literal notranslate"><span class="pre">undesired</span></code> ping that records data about bad app states and missing data</p></li>
<li><p>an <code class="docutils literal notranslate"><span class="pre">impression_stats</span></code> ping that records data about Pocket impressions and user interactions</p></li>
</ul>
<p>Schema definitions/validations that can be used for tests can be found in <code class="docutils literal notranslate"><span class="pre">system-addon/test/schemas/pings.js</span></code>.</p>
<div class="section" id="example-activity-stream-health-log">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">health</span></code> log<a class="headerlink" href="#example-activity-stream-health-log" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;374dc4d8-0cb2-4ac5-a3cf-c5a9bc3c602e&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;62.0a1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="o">:</span> <span class="s2">&quot;nightly&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;AS_ENABLED&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">10</span><span class="p">,</span>

  <span class="c1">// These fields are generated on the server</span>
  <span class="s2">&quot;date&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-03-07&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;10.192.171.13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ua&quot;</span><span class="o">:</span> <span class="s2">&quot;python-requests/2.9.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;receive_at&quot;</span><span class="o">:</span> <span class="mf">1457396660000</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-activity-stream-session-log">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">session</span></code> Log<a class="headerlink" href="#example-activity-stream-session-log" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="c1">// These fields are sent from the client</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_session&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;374dc4d8-0cb2-4ac5-a3cf-c5a9bc3c602e&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;session_duration&quot;</span><span class="o">:</span> <span class="mf">1635</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{12dasd-213asda-213dkakj}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;profile_creation_date&quot;</span><span class="o">:</span> <span class="mf">14786</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>

  <span class="c1">// These fields are generated on the server</span>
  <span class="s2">&quot;date&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-03-07&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;10.192.171.13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ua&quot;</span><span class="o">:</span> <span class="s2">&quot;python-requests/2.9.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;receive_at&quot;</span><span class="o">:</span> <span class="mf">1457396660000</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-activity-stream-user-event-log">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">user_event</span></code> Log<a class="headerlink" href="#example-activity-stream-user-event-log" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_user_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action_position&quot;</span><span class="o">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;374dc4d8-0cb2-4ac5-a3cf-c5a9bc3c602e&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;click or scroll or search or delete&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">],</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;top sites, or bookmarks, or...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{12dasd-213asda-213dkakj}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;recommender_type&quot;</span><span class="o">:</span> <span class="s2">&quot;pocket-trending&quot;</span><span class="p">,</span>
  <span class="s2">&quot;metadata_source&quot;</span><span class="o">:</span> <span class="s2">&quot;MetadataService or Local or TippyTopProvider&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>

  <span class="c1">// These fields are generated on the server</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;10.192.171.13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ua&quot;</span><span class="o">:</span> <span class="s2">&quot;python-requests/2.9.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;receive_at&quot;</span><span class="o">:</span> <span class="mf">1457396660000</span><span class="p">,</span>
  <span class="s2">&quot;date&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-03-07&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-activity-stream-performance-log">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">performance</span></code> Log<a class="headerlink" href="#example-activity-stream-performance-log" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_performance_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;374dc4d8-0cb2-4ac5-a3cf-c5a9bc3c602e&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;previewCacheHit&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_id&quot;</span><span class="o">:</span> <span class="s2">&quot;45f1912165ca4dfdb5c1c2337dbdc58f&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="c1">// all session-specific perf events should be part of the session perf object</span>
  <span class="s2">&quot;receive_at&quot;</span><span class="o">:</span> <span class="mf">1457396660000</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;TOP_FRECENT_SITES&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>

  <span class="c1">// These fields are generated on the server</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;10.192.171.13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ua&quot;</span><span class="o">:</span> <span class="s2">&quot;python-requests/2.9.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;receive_at&quot;</span><span class="o">:</span> <span class="mf">1457396660000</span><span class="p">,</span>
  <span class="s2">&quot;date&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-03-07&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-activity-stream-undesired-event-log">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">undesired</span> <span class="pre">event</span></code> Log<a class="headerlink" href="#example-activity-stream-undesired-event-log" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_undesired_event&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;26288a14-5cc4-d14f-ae0a-bb01ef45be9c&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;MISSING_IMAGE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">]</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;HIGHLIGHTS&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>

  <span class="c1">// These fields are generated on the server</span>
  <span class="s2">&quot;ip&quot;</span><span class="o">:</span> <span class="s2">&quot;10.192.171.13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;ua&quot;</span><span class="o">:</span> <span class="s2">&quot;python-requests/2.9.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;receive_at&quot;</span><span class="o">:</span> <span class="mf">1457396660000</span><span class="p">,</span>
  <span class="s2">&quot;date&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-03-07&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-activity-stream-impression-stats-logs">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">impression_stats</span></code> Logs<a class="headerlink" href="#example-activity-stream-impression-stats-logs" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_impression_stats&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;pocket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;about:newtab&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:home&quot;</span> <span class="o">|</span> <span class="s2">&quot;about:welcome&quot;</span> <span class="o">|</span> <span class="s2">&quot;unknown&quot;</span><span class="p">]</span>
  <span class="s2">&quot;tiles&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10001</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10002</span><span class="p">}]</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="s2">&quot;activity_stream_impression_stats&quot;</span><span class="p">,</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;pocket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_prefs&quot;</span><span class="o">:</span> <span class="mf">7</span><span class="p">,</span>

  <span class="c1">// &quot;pos&quot; is the 0-based index to record the tile&#39;s position in the Pocket section.</span>
  <span class="c1">// &quot;shim&quot; is a base64 encoded shim attached to spocs, unique to the impression from the Ad server.</span>
  <span class="s2">&quot;tiles&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="s2">&quot;shim&quot;</span><span class="o">:</span> <span class="s2">&quot;enuYa1j73z3RzxgTexHNxYPC/b,9JT6w5KB0CRKYEU+&quot;</span><span class="p">}],</span>

  <span class="c1">// A 0-based index to record which tile in the &quot;tiles&quot; list that the user just interacted with.</span>
  <span class="s2">&quot;click|block|pocket&quot;</span><span class="o">:</span> <span class="mf">0</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-discovery-stream-spocs-fill-log">
<h2>Example Discovery Stream <code class="docutils literal notranslate"><span class="pre">SPOCS</span> <span class="pre">Fill</span></code> log<a class="headerlink" href="#example-discovery-stream-spocs-fill-log" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="c1">// both &quot;client_id&quot; and &quot;session_id&quot; are set to &quot;n/a&quot; in this ping.</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;session_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;68&quot;</span><span class="p">,</span>
  <span class="s2">&quot;release_channel&quot;</span><span class="o">:</span> <span class="s2">&quot;release&quot;</span><span class="p">,</span>
  <span class="s2">&quot;spoc_fills&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10000</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;frequency_cap&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10001</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;blocked_by_user&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10002</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;below_min_score&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10003</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;flight_duplicate&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10004</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;probability_selection&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10004</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;out_of_position&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mf">10005</span><span class="p">,</span> <span class="nx">displayed</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span> <span class="nx">reason</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span> <span class="nx">full_recalc</span><span class="o">:</span> <span class="mf">0</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-activity-stream-router-pings">
<h2>Example Activity Stream <code class="docutils literal notranslate"><span class="pre">Router</span></code> Pings<a class="headerlink" href="#example-activity-stream-router-pings" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;client_id&quot;</span><span class="o">:</span> <span class="s2">&quot;n/a&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;snippets_user_event&quot;</span> <span class="o">|</span> <span class="s2">&quot;onboarding_user_event&quot;</span><span class="p">],</span>
  <span class="s2">&quot;impression_id&quot;</span><span class="o">:</span> <span class="s2">&quot;{005deed0-e3e4-4c02-a041-17405fd703f6}&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;pocket&quot;</span><span class="p">,</span>
  <span class="s2">&quot;addon_version&quot;</span><span class="o">:</span> <span class="s2">&quot;20180710100040&quot;</span><span class="p">,</span>
  <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;NEWTAB_FOOTER_BAR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;some_snippet_id&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event&quot;</span><span class="o">:</span> <span class="s2">&quot;IMPRESSION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_context&quot;</span><span class="o">:</span> <span class="s2">&quot;{\&quot;view\&quot;:\&quot;application_menu\&quot;}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 77%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>KEY</p></th>
<th class="head"><p>DESCRIPTION</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">action_position</span></code></p></td>
<td><p>[Optional] The index of the element in the <code class="docutils literal notranslate"><span class="pre">source</span></code> that was clicked.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">action</span></code></p></td>
<td><p>[Required] Either <code class="docutils literal notranslate"><span class="pre">activity_stream_event</span></code>, <code class="docutils literal notranslate"><span class="pre">activity_stream_session</span></code>, or <code class="docutils literal notranslate"><span class="pre">activity_stream_performance</span></code>.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">addon_version</span></code></p></td>
<td><p>[Required] Firefox build ID, i.e. <code class="docutils literal notranslate"><span class="pre">Services.appinfo.appBuildID</span></code>.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">client_id</span></code></p></td>
<td><p>[Required] An identifier for this client.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">card_type</span></code></p></td>
<td><p>[Optional] (“bookmark”, “pocket”, “trending”, “pinned”, “search”, “spoc”, “organic”)</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">search_vendor</span></code></p></td>
<td><p>[Optional] the vendor of the search shortcut, one of (“google”, “amazon”, “wikipedia”, “duckduckgo”, “bing”, etc.). This field only exists when
<code class="docutils literal notranslate"><span class="pre">card_type</span> <span class="pre">=</span> <span class="pre">&quot;search&quot;</span></code></p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">date</span></code></p></td>
<td><p>[Auto populated by Onyx] The date in YYYY-MM-DD format.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">three</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">shield_id</span></code></p></td>
<td><p>[Optional] DEPRECATED: use <cite>experiments</cite> instead. The unique identifier for a specific experiment.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event_id</span></code></p></td>
<td><p>[Required] An identifier shared by multiple performance pings that describe an entire request flow.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">event</span></code></p></td>
<td><p>[Required] The type of event. Any user defined string (“click”, “share”, “delete”, “more_items”)</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">event_context</span></code></p></td>
<td><p>[Optional] A string to record the context of an AS Router event ping. Compound context values will be stringified by JSON.stringify</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">highlight_type</span></code></p></td>
<td><p>[Optional] Either [“bookmarks”, “recommendation”, “history”].</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">impression_id</span></code></p></td>
<td><p>[Optional] The unique impression identifier for a specific client.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ip</span></code></p></td>
<td><p>[Auto populated by Onyx] The IP address of the client.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">two</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">locale</span></code></p></td>
<td><p>[Auto populated by Onyx] The browser chrome’s language (eg. en-US).</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">two</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">load_trigger_ts</span></code></p></td>
<td><p>[Optional][Server Counter][Server Alert for too many omissions] DOMHighResTimeStamp of the action perceived by the user to trigger the load of this
page.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">load_trigger_type</span></code></p></td>
<td><p>[Server Counter][Server Alert for too many omissions] Either [“first_window_opened”, “menu_plus_or_keyboard”, “unexpected”].</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">metadata_source</span></code></p></td>
<td><p>[Optional] The source of which we computed metadata. Either (<code class="docutils literal notranslate"><span class="pre">MetadataService</span></code> or <code class="docutils literal notranslate"><span class="pre">Local</span></code> or <code class="docutils literal notranslate"><span class="pre">TippyTopProvider</span></code>).</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">page</span></code></p></td>
<td><p>[Required] One of [“<a class="reference external" href="about:newtab">about:newtab</a>”, “<a class="reference external" href="about:home">about:home</a>”, “<a class="reference external" href="about:welcome">about:welcome</a>”, “unknown” (which either means not-applicable or is a bug)].</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recommender_type</span></code></p></td>
<td><p>[Optional] The type of recommendation that is being shown, if any.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">session_duration</span></code></p></td>
<td><p>[Optional][Server Counter][Server Alert for too many omissions] Time in (integer) milliseconds of the difference between the new tab becoming visible
and losing focus</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">session_id</span></code></p></td>
<td><p>[Optional] The unique identifier for a specific session.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>[Required] Either (“recent_links”, “recent_bookmarks”, “frecent_links”, “top_sites”, “spotlight”, “sidebar”) and indicates what <code class="docutils literal notranslate"><span class="pre">action</span></code>.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">two</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">received_at</span></code></p></td>
<td><p>[Auto populated by Onyx] The time in ms since epoch.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">three</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">total_bookmarks</span></code></p></td>
<td><p>[Optional] The total number of bookmarks in the user’s places db.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">total_history_size</span></code></p></td>
<td><p>[Optional] The number of history items currently in the user’s places db.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ua</span></code></p></td>
<td><p>[Auto populated by Onyx] The user agent string.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">two</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unload_reason</span></code></p></td>
<td><p>[Required] The reason the Activity Stream page lost focus.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>[Optional] The URL of the recommendation shown in one of the highlights spots, if any.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code> (performance)</p></td>
<td><dl class="simple">
<dt>[Required] An integer that represents the measured performance value. Can store counts, times in milliseconds, and should always be a positive</dt><dd><p>integer.</p>
</dd>
</dl>
</td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code> (event)</p></td>
<td><p>[Optional] An object with keys “icon_type” and “card_type” to record the extra information for event ping</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ver</span></code></p></td>
<td><p>[Auto populated by Onyx] The version of the Onyx API the ping was sent to.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">highlights_size</span></code></p></td>
<td><p>[Optional] The size of the Highlights set.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>highlights_data_late_by_ms</p></td>
<td><p>[Optional] Time in ms it took for Highlights to become initialized</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>topsites_data_late_by_ms</p></td>
<td><p>[Optional] Time in ms it took for TopSites to become initialized</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>topstories.domain.affinity
.calculation.ms</p></td>
<td><p>[Optional] Time in ms it took for domain affinities to be calculated (topstories.domain.affinity.calculation.ms)</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>topsites_first_painted_ts</p></td>
<td><p>[Optional][Service Counter][Server Alert for too many omissions] Timestamp of when the Top Sites element finished painting (possibly with only
placeholder screenshots)</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">custom_screenshot</span></code></p></td>
<td><p>[Optional] Number of topsites that display a custom screenshot.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">screenshot_with_icon</span></code></p></td>
<td><p>[Optional] Number of topsites that display a screenshot and a favicon.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">screenshot</span></code></p></td>
<td><p>[Optional] Number of topsites that display only a screenshot.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tippytop</span></code></p></td>
<td><p>[Optional] Number of topsites that display a tippytop icon.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rich_icon</span></code></p></td>
<td><p>[Optional] Number of topsites that display a high quality favicon.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">no_image</span></code></p></td>
<td><p>[Optional] Number of topsites that have no screenshot.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">topsites_pinned</span></code></p></td>
<td><p>[Optional] Number of topsites that are pinned.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>topsites_search_shortcuts</p></td>
<td><p>[Optional] Number of search shortcut topsites.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>visibility_event_rcvd_ts</p></td>
<td><p>[Optional][Server Counter][Server Alert for too many omissions] DOMHighResTimeStamp of when the page itself receives an event that
document.visibilityState == visible.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tiles</span></code></p></td>
<td><p>[Required] A list of tile objects for the Pocket articles. Each tile object mush have a ID, optionally a “pos” property to indicate the tile
position, and optionally a “shim” property unique to the impression from the Ad server</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">click</span></code></p></td>
<td><p>[Optional] An integer to record the 0-based index when user clicks on a Pocket tile.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">block</span></code></p></td>
<td><p>[Optional] An integer to record the 0-based index when user blocks a Pocket tile.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pocket</span></code></p></td>
<td><p>[Optional] An integer to record the 0-based index when user saves a Pocket tile to Pocket.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">user_prefs</span></code></p></td>
<td><p>[Required] The encoded integer of user’s preferences.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p>&amp; :four:</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_preloaded</span></code></p></td>
<td><p>[Required] A boolean to signify whether the page is preloaded or not</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">icon_type</span></code></p></td>
<td><p>[Optional] (“tippytop”, “rich_icon”, “screenshot_with_icon”, “screenshot”, “no_image”, “custom_screenshot”)</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">region</span></code></p></td>
<td><p>[Optional] A string maps to pref “browser.search.region”, which is essentially the two letter ISO 3166-1 country code populated by the Firefox
search service. Note that: 1). it reports “OTHER” for those regions with smaller Firefox user base (less than 10000) so that users cannot be
uniquely identified; 2). it reports “UNSET” if this pref is missing; 3). it reports “EMPTY” if the value of this pref is an empty string.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">profile_creation_date</span></code></p></td>
<td><p>[Optional] An integer to record the age of the Firefox profile as the total number of days since the UNIX epoch.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">message_id</span></code></p></td>
<td><p>[required] A string identifier of the message in Activity Stream Router.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">has_flow_params</span></code></p></td>
<td><p>[required] One of [true, false]. A boolean identifier that indicates if Firefox Accounts flow parameters are set or unset.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">displayed</span></code></p></td>
<td><p>[required] 1: a SPOC is displayed; 0: non-displayed</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reason</span></code></p></td>
<td><p>[required] The reason if a SPOC is not displayed, “n/a” for the displayed, one of (“frequency_cap”, “blocked_by_user”, “flight_duplicate”,
“probability_selection”, “below_min_score”, “out_of_position”, “n/a”)</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">full_recalc</span></code></p></td>
<td><p>[required] Is it a full SPOCS recalculation: 0: false; 1: true. Recalculation case: 1). fetch SPOCS from Pocket endpoint. Non-recalculation cases:
1). An impression updates the SPOCS; 2). Any action that triggers the <code class="docutils literal notranslate"><span class="pre">selectLayoutRender</span></code></p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">experiments</span></code></p></td>
<td><p>[Optional] An object to record all active experiments (an empty object will be sent if there is no active experiment). The experiments IDs are
stored as keys, and the value object stores the branch information.
<cite>Example: {“experiment_1”: {“branch”: “control”}, “experiment_2”: {“branch”: “treatment”}}</cite>. This deprecates the <cite>shield_id</cite> used in Activity Stream
and Messaging System.</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p><cite>browser_session_id</cite></p></td>
<td><p>[Optional] The unique identifier for a browser session, retrieved from TelemetrySession</p></td>
<td><dl class="field-list simple">
<dt class="field-odd">one</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><strong>Where:</strong></p>
<ul class="simple">
<li><p>:one: Firefox data</p></li>
<li><p>:two: HTTP protocol data</p></li>
<li><p>:three: server augmented data</p></li>
<li><p>:four: User preferences encoding table</p></li>
</ul>
<p>Note: the following session-related fields are not yet implemented in the system-addon,
but will likely be added in future versions:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;total_bookmarks&quot;</span><span class="o">:</span> <span class="mf">19</span><span class="p">,</span>
  <span class="s2">&quot;total_history_size&quot;</span><span class="o">:</span> <span class="mf">9</span><span class="p">,</span>
  <span class="s2">&quot;highlights_size&quot;</span><span class="o">:</span> <span class="mf">20</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="encoding-and-decoding-of-user-prefs">
<h2>Encoding and decoding of <code class="docutils literal notranslate"><span class="pre">user_prefs</span></code><a class="headerlink" href="#encoding-and-decoding-of-user-prefs" title="Permalink to this headline">¶</a></h2>
<p>This encoding mapping was defined in <code class="docutils literal notranslate"><span class="pre">system-addon/lib/TelemetryFeed.jsm</span></code></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Preference</p></th>
<th class="head"><p>Encoded value (binary)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>showSearch</cite></p></td>
<td><p>1 (00000001)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>showTopSites</cite></p></td>
<td><p>2 (00000010)</p></td>
</tr>
<tr class="row-even"><td><p><cite>showTopStories</cite></p></td>
<td><p>4 (00000100)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>showHighlights</cite></p></td>
<td><p>8 (00001000)</p></td>
</tr>
<tr class="row-even"><td><p><cite>showSnippets</cite></p></td>
<td><p>16 (00010000)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>showSponsored</cite></p></td>
<td><p>32 (00100000)</p></td>
</tr>
<tr class="row-even"><td><p><cite>showCFRAddons</cite></p></td>
<td><p>64 (01000000)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>showCFRFeatures</cite></p></td>
<td><p>128 (10000000)</p></td>
</tr>
</tbody>
</table>
<p>Each item above could be combined with other items through bitwise OR (<code class="docutils literal notranslate"><span class="pre">|</span></code>) operation.</p>
<p>Examples:</p>
<ul class="simple">
<li><p>Everything is on, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">2</span> <span class="pre">|</span> <span class="pre">4</span> <span class="pre">|</span> <span class="pre">8</span> <span class="pre">|</span> <span class="pre">16</span> <span class="pre">|</span> <span class="pre">32</span> <span class="pre">|</span> <span class="pre">64</span> <span class="pre">|</span> <span class="pre">128</span> <span class="pre">=</span> <span class="pre">255</span></code></p></li>
<li><p>Everything is off, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">=</span> <span class="pre">0</span></code></p></li>
<li><p>Only show search and Top Stories, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">4</span> <span class="pre">=</span> <span class="pre">5</span></code></p></li>
<li><p>Everything except Highlights, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">|</span> <span class="pre">2</span> <span class="pre">|</span> <span class="pre">4</span> <span class="pre">|</span> <span class="pre">16</span> <span class="pre">|</span> <span class="pre">32</span> <span class="pre">|</span> <span class="pre">64</span> <span class="pre">|</span> <span class="pre">128</span> <span class="pre">=</span> <span class="pre">247</span></code></p></li>
</ul>
<p>Likewise, one can use bitwise AND (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>) for decoding.</p>
<ul class="simple">
<li><p>Check if everything is shown, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">&amp;</span> <span class="pre">(1</span> <span class="pre">|</span> <span class="pre">2</span> <span class="pre">|</span> <span class="pre">4</span> <span class="pre">|</span> <span class="pre">8</span> <span class="pre">|</span> <span class="pre">16</span> <span class="pre">|</span> <span class="pre">32</span> <span class="pre">|</span> <span class="pre">64</span> <span class="pre">|</span> <span class="pre">128)</span></code> or <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">==</span> <span class="pre">255</span></code></p></li>
<li><p>Check if everything is off, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">==</span> <span class="pre">0</span></code></p></li>
<li><p>Check if search is shown, <code class="docutils literal notranslate"><span class="pre">user_prefs</span> <span class="pre">&amp;</span> <span class="pre">1</span></code></p></li>
<li><p>Check if both Top Sites and Top Stories are shown, <code class="docutils literal notranslate"><span class="pre">(user_prefs</span> <span class="pre">&amp;</span> <span class="pre">2)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(user_prefs</span> <span class="pre">&amp;</span> <span class="pre">4)</span></code>, or  <code class="docutils literal notranslate"><span class="pre">(user_prefs</span> <span class="pre">&amp;</span> <span class="pre">(2</span> <span class="pre">|</span> <span class="pre">4))</span> <span class="pre">==</span> <span class="pre">(2</span> <span class="pre">|</span> <span class="pre">4)</span></code></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="data_events.html" class="btn btn-neutral float-right" title="Metrics we collect" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="about_home_startup_cache.html" class="btn btn-neutral float-left" title="The about:home startup cache" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>