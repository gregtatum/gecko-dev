

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How actors are organized &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to handle E10S in actors" href="actor-e10s-handling.html" />
    <link rel="prev" title="Backward Compatibility" href="backward-compatibility.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Firefox DevTools Contributor Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#automated-tests">Automated tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#files-and-directories">Files and directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tool-architectures">Tool Architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#frontend">Frontend</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#backend">Backend</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="protocol.html">Remote Debugging Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="client-api.html">Client API</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugger-api.html">Debugger API</a></li>
<li class="toctree-l3"><a class="reference internal" href="backward-compatibility.html">Backward Compatibility</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Actors Organization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rootactor">RootActor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#target-actors">Target Actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#target-scoped-actors">Target-scoped actors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="actor-e10s-handling.html">Handling Multi-Processes in Actors</a></li>
<li class="toctree-l3"><a class="reference internal" href="protocol.js.html">Writing Actors With protocol.js</a></li>
<li class="toctree-l3"><a class="reference internal" href="actor-registration.html">Registering A New Actor</a></li>
<li class="toctree-l3"><a class="reference internal" href="actor-best-practices.html">Actor Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#preferences">Preferences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#about-this-documentation">About this documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Firefox DevTools Contributor Docs</a> &raquo;</li>
        
      <li>How actors are organized</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/devtools/backend/actor-hierarchy.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-actors-are-organized">
<h1>How actors are organized<a class="headerlink" href="#how-actors-are-organized" title="Permalink to this headline">¶</a></h1>
<p>To start with, actors are living within devtools/server/actors folder.
They are organized in a hierarchy for easier lifecycle and memory management:
once a parent is removed from the pool, its children are removed as well.
(See actor-registration.md for more information about how to implement one)</p>
<p>The overall hierarchy of actors looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>RootActor: First one, automatically instantiated when we start connecting.
   |       Mostly meant to instantiate new actors.
   |
   |-- Global-scoped actors:
   |   Actors exposing features related to the main process, that are not
   |   specific to any particular target (document, tab, add-on, or worker).
   |   These actors are registered with `global: true` in
   |   devtools/server/main.js.
   |   Examples include:
   |   PreferenceActor (for Firefox prefs)
   |
   \-- Target actors:
       Actors that represent the main &quot;thing&quot; being targeted by a given toolbox,
       such as a tab, frame, worker, add-on, etc. and track its lifetime.
       Generally, there is a target actor for each thing you can point a
       toolbox at.
       Examples include:
       FrameTargetActor (for a frame, such as a tab)
       WorkerTargetActor (for various kind of workers)
       |
       \-- Target-scoped actors:
           Actors exposing one particular feature set. They are children of a
           given target actor and the data they return is filtered to reflect
           the target.
           These actors are registered with `target: true` in
           devtools/server/main.js.
           Examples include:
           WebConsoleActor
           InspectorActor
           These actors may extend this hierarchy by having their own children,
           like LongStringActor, WalkerActor, etc.
</pre></div>
</div>
<div class="section" id="rootactor">
<h2>RootActor<a class="headerlink" href="#rootactor" title="Permalink to this headline">¶</a></h2>
<p>The root actor is special. It is automatically created when a client connects.
It has a special <code class="docutils literal notranslate"><span class="pre">actorID</span></code> which is unique and is “root”.
All other actors have an <code class="docutils literal notranslate"><span class="pre">actorID</span></code> which is computed dynamically,
so that you need to ask an existing actor to create an Actor
and returns its <code class="docutils literal notranslate"><span class="pre">actorID</span></code>. That’s the main role of RootActor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RootActor</span> <span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>
   <span class="o">|--</span> <span class="n">TabDescriptorActor</span> <span class="p">(</span><span class="n">descriptors</span><span class="o">/</span><span class="n">tab</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>   <span class="n">Targets</span> <span class="n">frames</span> <span class="p">(</span><span class="n">such</span> <span class="k">as</span> <span class="n">a</span> <span class="n">tab</span><span class="p">)</span> <span class="n">living</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">parent</span> <span class="ow">or</span> <span class="n">child</span> <span class="n">process</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Note</span> <span class="n">that</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">just</span> <span class="n">a</span> <span class="n">proxy</span> <span class="k">for</span> <span class="n">FrameTargetActor</span><span class="p">,</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">loaded</span> <span class="n">via</span>
   <span class="o">|</span>   <span class="n">the</span> <span class="n">frame</span><span class="s1">&#39;s message manager as a frame script in the process containing</span>
   <span class="o">|</span>   <span class="n">the</span> <span class="n">frame</span> <span class="n">content</span><span class="o">.</span> <span class="n">This</span> <span class="n">proxy</span> <span class="n">via</span> <span class="n">message</span> <span class="n">manager</span> <span class="ow">is</span> <span class="n">always</span> <span class="n">used</span><span class="p">,</span> <span class="n">even</span>
   <span class="o">|</span>   <span class="n">when</span> <span class="n">the</span> <span class="n">content</span> <span class="n">happens</span> <span class="n">to</span> <span class="n">be</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">same</span> <span class="n">process</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;listTabs&quot;</span> <span class="ow">or</span> <span class="s2">&quot;getTab&quot;</span> <span class="n">requests</span><span class="o">.</span>
   <span class="o">|</span>   <span class="o">|</span>
   <span class="o">|</span>   \<span class="o">--</span> <span class="n">FrameTargetActor</span> <span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>       <span class="n">The</span> <span class="s2">&quot;real&quot;</span> <span class="n">target</span> <span class="n">actor</span> <span class="k">for</span> <span class="n">a</span> <span class="n">frame</span> <span class="p">(</span><span class="n">such</span> <span class="k">as</span> <span class="n">a</span> <span class="n">tab</span><span class="p">)</span> <span class="n">which</span> <span class="n">runs</span> <span class="ow">in</span>
   <span class="o">|</span>       <span class="n">whichever</span> <span class="n">process</span> <span class="n">holds</span> <span class="n">the</span> <span class="n">content</span><span class="o">.</span> <span class="n">FrameTargetActorProxy</span>
   <span class="o">|</span>       <span class="n">communicates</span> <span class="k">with</span> <span class="n">this</span> <span class="n">via</span> <span class="n">the</span> <span class="n">frame</span><span class="s1">&#39;s message manager.</span>
   <span class="o">|</span>       <span class="n">Extends</span> <span class="n">the</span> <span class="n">abstract</span> <span class="k">class</span> <span class="nc">BrowsingContextTargetActor</span><span class="o">.</span>
   <span class="o">|</span>       <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;connect&quot;</span> <span class="n">server</span> <span class="n">method</span> <span class="n">on</span> <span class="n">FrameTargetActorProxy</span><span class="o">.</span>
   <span class="o">|</span>
   <span class="o">|--</span> <span class="n">WorkerTargetActor</span> <span class="p">(</span><span class="n">worker</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>   <span class="n">Targets</span> <span class="n">a</span> <span class="n">worker</span> <span class="p">(</span><span class="n">applies</span> <span class="n">to</span> <span class="n">various</span> <span class="n">kinds</span> <span class="n">like</span> <span class="n">web</span> <span class="n">worker</span><span class="p">,</span> <span class="n">service</span>
   <span class="o">|</span>   <span class="n">worker</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">)</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;listWorkers&quot;</span> <span class="n">request</span> <span class="n">to</span> <span class="n">the</span> <span class="n">root</span> <span class="n">actor</span> <span class="n">to</span> <span class="n">get</span> <span class="nb">all</span> <span class="n">workers</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;listWorkers&quot;</span> <span class="n">request</span> <span class="n">to</span> <span class="n">a</span> <span class="n">FrameTargetActorProxy</span> <span class="n">to</span> <span class="n">get</span>
   <span class="o">|</span>   <span class="n">workers</span> <span class="k">for</span> <span class="n">a</span> <span class="n">specific</span> <span class="n">frame</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;listWorkers&quot;</span> <span class="n">request</span> <span class="n">to</span> <span class="n">a</span> <span class="n">ContentProcessTargetActor</span> <span class="n">to</span> <span class="n">get</span>
   <span class="o">|</span>   <span class="n">workers</span> <span class="k">for</span> <span class="n">the</span> <span class="n">chrome</span> <span class="n">of</span> <span class="n">the</span> <span class="n">child</span> <span class="n">process</span><span class="o">.</span>
   <span class="o">|</span>
   <span class="o">|--</span> <span class="n">ChromeWindowTargetActor</span> <span class="p">(</span><span class="n">chrome</span><span class="o">-</span><span class="n">window</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>   <span class="n">Targets</span> <span class="n">a</span> <span class="n">single</span> <span class="n">window</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="n">a</span> <span class="n">browser</span> <span class="n">window</span> <span class="ow">in</span> <span class="n">Firefox</span><span class="p">,</span> <span class="n">but</span> <span class="n">it</span> <span class="n">can</span>
   <span class="o">|</span>   <span class="n">be</span> <span class="n">used</span> <span class="n">to</span> <span class="n">reach</span> <span class="nb">any</span> <span class="n">window</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">parent</span> <span class="n">process</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Extends</span> <span class="n">the</span> <span class="n">abstract</span> <span class="k">class</span> <span class="nc">BrowsingContextTargetActor</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;getWindow&quot;</span> <span class="n">request</span> <span class="n">to</span> <span class="n">the</span> <span class="n">root</span> <span class="n">actor</span><span class="o">.</span>
   <span class="o">|</span>
   <span class="o">|--</span> <span class="n">ParentProcessTargetActor</span> <span class="p">(</span><span class="n">parent</span><span class="o">-</span><span class="n">process</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>   <span class="n">Targets</span> <span class="nb">all</span> <span class="n">resources</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">parent</span> <span class="n">process</span> <span class="n">of</span> <span class="n">Firefox</span> <span class="p">(</span><span class="n">chrome</span> <span class="n">documents</span><span class="p">,</span>
   <span class="o">|</span>   <span class="n">JSMs</span><span class="p">,</span> <span class="n">JS</span> <span class="n">XPCOM</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">)</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Extends</span> <span class="n">the</span> <span class="n">abstract</span> <span class="k">class</span> <span class="nc">BrowsingContextTargetActor</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Extended</span> <span class="n">by</span> <span class="n">WebExtensionTargetActor</span><span class="o">.</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;getProcess&quot;</span> <span class="n">request</span> <span class="n">without</span> <span class="nb">any</span> <span class="n">argument</span><span class="o">.</span>
   <span class="o">|</span>
   <span class="o">|--</span> <span class="n">ContentProcessTargetActor</span> <span class="p">(</span><span class="n">content</span><span class="o">-</span><span class="n">process</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
   <span class="o">|</span>   <span class="n">Targets</span> <span class="nb">all</span> <span class="n">resources</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">content</span> <span class="n">process</span> <span class="n">of</span> <span class="n">Firefox</span> <span class="p">(</span><span class="n">chrome</span> <span class="n">sandboxes</span><span class="p">,</span>
   <span class="o">|</span>   <span class="n">frame</span> <span class="n">scripts</span><span class="p">,</span> <span class="n">documents</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">)</span>
   <span class="o">|</span>   <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;getProcess&quot;</span> <span class="n">request</span> <span class="k">with</span> <span class="n">a</span> <span class="nb">id</span> <span class="n">argument</span><span class="p">,</span> <span class="n">matching</span> <span class="n">the</span>
   <span class="o">|</span>   <span class="n">targeted</span> <span class="n">process</span><span class="o">.</span>
   <span class="o">|</span>
   \<span class="o">--</span> <span class="n">WebExtensionActor</span> <span class="p">(</span><span class="n">addon</span><span class="o">/</span><span class="n">webextension</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
       <span class="n">Represents</span> <span class="n">a</span> <span class="n">WebExtension</span> <span class="n">add</span><span class="o">-</span><span class="n">on</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">parent</span> <span class="n">process</span><span class="o">.</span> <span class="n">This</span> <span class="n">gives</span> <span class="n">some</span>
       <span class="n">metadata</span> <span class="n">about</span> <span class="n">the</span> <span class="n">add</span><span class="o">-</span><span class="n">on</span> <span class="ow">and</span> <span class="n">watches</span> <span class="k">for</span> <span class="n">uninstall</span> <span class="n">events</span><span class="o">.</span> <span class="n">This</span> <span class="n">uses</span> <span class="n">a</span>
       <span class="n">proxy</span> <span class="n">to</span> <span class="n">access</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">WebExtension</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">WebExtension</span> <span class="n">process</span> <span class="n">via</span>
       <span class="n">the</span> <span class="n">message</span> <span class="n">manager</span><span class="o">.</span>
       <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;listAddons&quot;</span> <span class="n">request</span><span class="o">.</span>
       <span class="o">|</span>
       \<span class="o">--</span> <span class="n">WebExtensionTargetActor</span> <span class="p">(</span><span class="n">targets</span><span class="o">/</span><span class="n">webextension</span><span class="o">.</span><span class="n">js</span><span class="p">)</span>
           <span class="n">Targets</span> <span class="n">a</span> <span class="n">WebExtension</span> <span class="n">add</span><span class="o">-</span><span class="n">on</span><span class="o">.</span> <span class="n">This</span> <span class="n">runs</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">WebExtension</span> <span class="n">process</span><span class="o">.</span>
           <span class="n">The</span> <span class="n">client</span> <span class="n">issues</span> <span class="n">an</span> <span class="n">additional</span> <span class="s2">&quot;connect&quot;</span> <span class="n">request</span> <span class="n">to</span>
           <span class="n">WebExtensionActor</span> <span class="n">to</span> <span class="n">get</span> <span class="n">this</span> <span class="n">actor</span><span class="p">,</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">different</span> <span class="kn">from</span> <span class="nn">the</span>
           <span class="n">approach</span> <span class="n">used</span> <span class="k">for</span> <span class="n">frame</span> <span class="n">target</span> <span class="n">actors</span><span class="o">.</span>
           <span class="n">Extends</span> <span class="n">ParentProcessTargetActor</span><span class="o">.</span>
           <span class="n">Returned</span> <span class="n">by</span> <span class="s2">&quot;connect&quot;</span> <span class="n">request</span> <span class="n">to</span> <span class="n">WebExtensionActor</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="target-actors">
<h2>Target Actors<a class="headerlink" href="#target-actors" title="Permalink to this headline">¶</a></h2>
<p>Those are the actors exposed by the root actors which are meant to track the
lifetime of a given target: tab, process, add-on, or worker. It also allows to
fetch the target-scoped actors connected to this target, which are actors like
console, inspector, thread (for debugger), style inspector, etc.</p>
<p>Some target actors inherit from BrowsingContextTargetActor (defined in
browsing-context.js) which is meant for “browsing contexts” which present
documents to the user. It automatically tracks the lifetime of the targeted
browsing context, but it also tracks its iframes and allows switching the
target to one of its iframes.</p>
<p>For historical reasons, target actors also handle creating the ThreadActor, used
to manage breakpoints in the debugger. Actors inheriting from
BrowsingContextTargetActor expose <code class="docutils literal notranslate"><span class="pre">attach</span></code>/<code class="docutils literal notranslate"><span class="pre">detach</span></code> requests, that allows to
start/stop the ThreadActor.</p>
<p>Target-scoped actors are accessed via the target actor’s RDP form which contains
the <code class="docutils literal notranslate"><span class="pre">actorID</span></code> for each target-scoped actor.</p>
<p>The target-scoped actors expect to find the following properties on the target
actor:</p>
<ul class="simple">
<li><p>threadActor:
ThreadActor instance for the given target,
only defined once <code class="docutils literal notranslate"><span class="pre">attach</span></code> request is called, or on construction.</p></li>
<li><p>isRootActor: (historical name)
Always false, except on ParentProcessTargetActor.
Despite the attribute name, it is being used to accept all resources
(like chrome one) instead of limiting only to content resources.</p></li>
<li><p>makeDebugger:
Helper function used to create Debugger object for the target.
(See actors/utils/make-debugger.js for more info)</p></li>
</ul>
<p>In addition to this, the actors inheriting from BrowsingContextTargetActor,
expose many other attributes and events:</p>
<ul class="simple">
<li><p>window:
Reference to the window global object currently targeted.
It can change over time if we switch target to an iframe, so it
shouldn’t be stored in a variable, but always retrieved from the actor.</p></li>
<li><p>windows:
List of all document globals including the main window object and all
iframes.</p></li>
<li><p>docShell:
Primary docShell reference for the targeted document.</p></li>
<li><p>docShells:
List of all docShells for the targeted document and all its iframes.</p></li>
<li><p>chromeEventHandler:
The chrome event handler for the current target. Allows to listen to events
that can be missing/cancelled on this document itself.</p></li>
</ul>
<p>See BrowsingContextTargetActor documentation for more details.</p>
</div>
<div class="section" id="target-scoped-actors">
<h2>Target-scoped actors<a class="headerlink" href="#target-scoped-actors" title="Permalink to this headline">¶</a></h2>
<p>Each of these actors focuses on providing one particular feature set. They are
children of a given target actor.</p>
<p>The data they return is filtered to reflect the target. For example, the
InspectorActor that you fetch from a FrameTargetActor gives you information
about the markup and styles for only that frame.</p>
<p>These actors may extend this hierarchy by having their own children, like
LongStringActor, WalkerActor, etc.</p>
<p>To improve performance, target-scoped actors are created lazily. The target
actor lists the actor ID for each one, but the actor modules aren’t actually
loaded and instantiated at that point. Once the first request for a given
target-scoped actor is received by the server, that specific actor is
instantiated just in time to service the request.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="actor-e10s-handling.html" class="btn btn-neutral float-right" title="How to handle E10S in actors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="backward-compatibility.html" class="btn btn-neutral float-left" title="Backward Compatibility" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>