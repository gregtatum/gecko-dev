

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fuzzy Selector &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Chooser Selector" href="chooser.html" />
    <link rel="prev" title="Auto Selector" href="auto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../mach/index.html">Mach</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Try Server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#using-try">Using Try</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#attaching-new-jobs-from-a-review">Attaching new jobs from a review</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#table-of-contents">Table of Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html">Configuring Try</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Selectors</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="auto.html">Auto</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Fuzzy</a></li>
<li class="toctree-l4"><a class="reference internal" href="chooser.html">Chooser</a></li>
<li class="toctree-l4"><a class="reference internal" href="again.html">Again</a></li>
<li class="toctree-l4"><a class="reference internal" href="empty.html">Empty</a></li>
<li class="toctree-l4"><a class="reference internal" href="syntax.html">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="release.html">Release</a></li>
<li class="toctree-l4"><a class="reference internal" href="scriptworker.html">Scriptworker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../presets.html">Presets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tasks.html">Task Generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Try Server</a> &raquo;</li>
        
          <li><a href="index.html">Selectors</a> &raquo;</li>
        
      <li>Fuzzy Selector</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tools/try/selectors/fuzzy.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fuzzy-selector">
<h1>Fuzzy Selector<a class="headerlink" href="#fuzzy-selector" title="Permalink to this headline">¶</a></h1>
<p>The fuzzy selector uses a tool called <a class="reference external" href="https://github.com/junegunn/fzf">fzf</a>. It allows you to filter down all of the task labels
from a terminal based UI and an intelligent fuzzy finding algorithm. If the <code class="docutils literal notranslate"><span class="pre">fzf</span></code> binary is not
installed, you’ll be prompted to bootstrap it on first run.</p>
<div class="section" id="understanding-the-interface">
<h2>Understanding the Interface<a class="headerlink" href="#understanding-the-interface" title="Permalink to this headline">¶</a></h2>
<p>When you run <code class="docutils literal notranslate"><span class="pre">mach</span> <span class="pre">try</span> <span class="pre">fuzzy</span></code> an interface similar to the one below will open. This is <a class="reference external" href="https://github.com/junegunn/fzf">fzf</a>.</p>
<img alt="../../../_images/fzf.png" src="../../../_images/fzf.png" />
<p>There’s a lot to unpack here, so let’s examine each component a bit more closely.</p>
<blockquote>
<div><p>A. The set of tasks that match the currently typed-out query. In the above image only tasks that
match the query <code class="docutils literal notranslate"><span class="pre">'linux64</span> <span class="pre">mochibrochr</span></code> are displayed.</p>
<p>B. The set of selected tasks. These are the tasks that will be scheduled once you hit <code class="docutils literal notranslate"><span class="pre">Enter</span></code>.
In other words, if the task you want does not appear here, <em>it won’t be scheduled</em>.</p>
<p>C. Count information of the form <code class="docutils literal notranslate"><span class="pre">x/y</span> <span class="pre">(z)</span></code>, where <code class="docutils literal notranslate"><span class="pre">x</span></code> is the number of tasks that match the
current query, <code class="docutils literal notranslate"><span class="pre">y</span></code> is the total number of tasks and <code class="docutils literal notranslate"><span class="pre">z</span></code> is the number of tasks you have
selected.</p>
<p>D. The input bar for entering queries. As you type you’ll notice the list of tasks in <code class="docutils literal notranslate"><span class="pre">A</span></code>
starts to update immediately. In the image above, the query <code class="docutils literal notranslate"><span class="pre">'linux64</span> <span class="pre">mochibrochr</span></code> is entered.
Correspondingly only tasks matching that query are displayed.</p>
</div></blockquote>
<p>In general terms, you first find tasks on the left. Then you move them over to the right by
selecting them. Once you are satisfied with your selection, press <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to push to try.</p>
</div>
<div class="section" id="selecting-tasks">
<h2>Selecting Tasks<a class="headerlink" href="#selecting-tasks" title="Permalink to this headline">¶</a></h2>
<p>There are few ways you can select tasks. If you are feeling a bit overwhelmed, it might be best to
stick with the mouse to start:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Enter a query (e.g <code class="docutils literal notranslate"><span class="pre">mochitest</span></code>) to reduce the task list a little.</p></li>
<li><p>Scroll up and look for the task(s) you want.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Right-Click</span></code> as many tasks as desired to select them.</p></li>
<li><p>Optionally delete your query, go back to step 1) and repeat.</p></li>
<li><p>Press <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to push (or <code class="docutils literal notranslate"><span class="pre">Esc</span></code> to cancel).</p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dependencies are automatically filled in, so you can select a test task without needing
to select the build it depends on.</p>
</div>
<p>As you <code class="docutils literal notranslate"><span class="pre">Right-Click</span></code>, notice that a little arrow appears to the left of the task label. This
indicates that the task is selected and exists in the preview pane to the right.</p>
<p>Once you are a bit more comfortable with the interface, using the keyboard is much better at quickly
selecting tasks. Here are the main shortcuts you’ll need:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Ctrl-K / Up    =&gt; Move cursor up
Ctrl-J / Down  =&gt; Move cursor down
Tab            =&gt; Select task + move cursor down
Shift-Tab      =&gt; Select task + move cursor up
Ctrl-A         =&gt; Select all currently filtered tasks
Ctrl-T         =&gt; Toggle select all currently filtered tasks
Ctrl-D         =&gt; De-select all selected tasks (both filtered and not)
Alt-Bspace     =&gt; Clear query from input bar
Enter          =&gt; Accept selection and exit
Ctrl-C / Esc   =&gt; Cancel selection and exit
?              =&gt; Toggle preview pane
</pre></div>
</div>
<p>The process for selecting tasks is otherwise the same as for a mouse. A particularly fast and
powerful way to select tasks is to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Write a precise query =&gt; Ctrl-A =&gt; Alt-Bspace =&gt; Repeat
</pre></div>
</div>
<p>As before, when you are satisfied with your selection press <code class="docutils literal notranslate"><span class="pre">Enter</span></code> and all the tasks in the
preview pane will be pushed to try. If you change your mind you can press <code class="docutils literal notranslate"><span class="pre">Esc</span></code> or <code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code> to
exit the interface without pushing anything.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Initially <code class="docutils literal notranslate"><span class="pre">fzf</span></code> will automatically select whichever task is under your cursor. This is a
convenience feature for the case where you are only selecting a single task. This feature will be
turned off as soon as you <em>lock in</em> a selection with <code class="docutils literal notranslate"><span class="pre">Right-Click</span></code>, <code class="docutils literal notranslate"><span class="pre">Tab</span></code> or <code class="docutils literal notranslate"><span class="pre">Ctrl-A</span></code>.</p>
</div>
</div>
<div class="section" id="writing-queries">
<h2>Writing Queries<a class="headerlink" href="#writing-queries" title="Permalink to this headline">¶</a></h2>
<p>Queries are built from a series of terms, each separated by a space. Terms are logically joined by
the AND operator. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;windows &#39;mochitest
</pre></div>
</div>
<p>This query has two terms, and is the equivalent of saying: Give me all the tasks that match both the
term <code class="docutils literal notranslate"><span class="pre">'windows'</span></code> and the term <code class="docutils literal notranslate"><span class="pre">'mochitest'</span></code>. In other words, this query matches all Windows
mochitest tasks.</p>
<p>The single quote prefix before each term tells <code class="docutils literal notranslate"><span class="pre">fzf</span></code> to use exact substring matches, so only tasks
that contain both the literal string <code class="docutils literal notranslate"><span class="pre">windows</span></code> AND the literal string <code class="docutils literal notranslate"><span class="pre">mochitest</span></code> will be
matched.</p>
<p>Another thing to note is that the order of the terms makes no difference, so <code class="docutils literal notranslate"><span class="pre">'windows</span> <span class="pre">'mochitest</span></code>
and <code class="docutils literal notranslate"><span class="pre">'mochitest</span> <span class="pre">'windows</span></code> are equivalent.</p>
<div class="section" id="fuzzy-terms">
<h3>Fuzzy terms<a class="headerlink" href="#fuzzy-terms" title="Permalink to this headline">¶</a></h3>
<p>If a term is <em>not</em> prefixed with a single quote, that makes it a fuzzy term. This means the
characters in the term need to show up in order, but not in sequence. E.g the fuzzy term <code class="docutils literal notranslate"><span class="pre">max</span></code>
would match the string <code class="docutils literal notranslate"><span class="pre">mozilla</span> <span class="pre">firefox</span></code> (as first there is an <code class="docutils literal notranslate"><span class="pre">m</span></code>, then an <code class="docutils literal notranslate"><span class="pre">a</span></code> and finally an
<code class="docutils literal notranslate"><span class="pre">x</span></code>), but not the string <code class="docutils literal notranslate"><span class="pre">firefox</span> <span class="pre">by</span> <span class="pre">mozilla</span></code> (since the <code class="docutils literal notranslate"><span class="pre">x</span></code> is now out of order). Here’s a
less contrived example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>wndws mchtst
</pre></div>
</div>
<p>Like the query above, this one would also select all Windows mochitest tasks. But it will
additionally select:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>test-macosx1014-64-shippable/opt-talos-sessionrestore-many-windows-e10s
</pre></div>
</div>
<p>This is because both sequences of letters (<code class="docutils literal notranslate"><span class="pre">wndws</span></code> and <code class="docutils literal notranslate"><span class="pre">mchtst</span></code>) independently appear in order
somewhere in this string (remember the order of the terms makes no difference).</p>
<p>At first fuzzy terms may not seem very useful, but they are actually extremely powerful! Let’s use
the term from the interface image above, <code class="docutils literal notranslate"><span class="pre">'linux64</span> <span class="pre">mochibrochr</span></code>, as an example. First, just notice
how in the image <code class="docutils literal notranslate"><span class="pre">fzf</span></code> highlights the characters that constitute the match in green. Next, notice
how typing <code class="docutils literal notranslate"><span class="pre">mochibrochr</span></code> can quickly get us all mochitest browser-chrome tasks. The power of fuzzy
terms is that you don’t need to memorize the exact task labels you are looking for. Just start
typing something you think is vaguely correct and chances are you’ll see the task you’re looking for.</p>
</div>
<div class="section" id="term-modifiers">
<h3>Term Modifiers<a class="headerlink" href="#term-modifiers" title="Permalink to this headline">¶</a></h3>
<p>The following modifiers can be applied to a search term:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;word    =&gt; exact match (line must contain the literal string &quot;word&quot;)
^word    =&gt; exact prefix match (line must start with literal &quot;word&quot;)
word$    =&gt; exact suffix match (line must end with literal &quot;word&quot;)
!word    =&gt; exact negation match (line must not contain literal &quot;word&quot;)
&#39;a | &#39;b  =&gt; OR operator (joins two exact match operators together)
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>^start &#39;exact | &#39;other !ignore fuzzy end$
</pre></div>
</div>
<p>would match the string:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>starting to bake isn&#39;t exactly fun, but pizza is yummy in the end
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The best way to learn how to write queries is to run <code class="docutils literal notranslate"><span class="pre">mach</span> <span class="pre">try</span> <span class="pre">fuzzy</span> <span class="pre">--no-push</span></code> and play
around with all of these modifiers!</p>
</div>
</div>
</div>
<div class="section" id="specifying-queries-on-the-command-line">
<h2>Specifying Queries on the Command Line<a class="headerlink" href="#specifying-queries-on-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it’s more convenient to skip the interactive interface and specify a query on the command
line with <code class="docutils literal notranslate"><span class="pre">-q/--query</span></code>. This is equivalent to opening the interface then typing:
<code class="docutils literal notranslate"><span class="pre">&lt;query&gt;&lt;ctrl-a&gt;&lt;enter&gt;</span></code>.</p>
<p>For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># selects all mochitest tasks</span>
$ mach try fuzzy --query <span class="s2">&quot;mochitest&quot;</span>
</pre></div>
</div>
<p>You can pass in multiple queries at once and the results of each will be joined together:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># selects all mochitest and reftest tasks</span>
$ mach try fuzzy -q <span class="s2">&quot;mochitest&quot;</span> -q <span class="s2">&quot;reftest&quot;</span>
</pre></div>
</div>
<p>If instead you want the intersection of queries, you can pass in <code class="docutils literal notranslate"><span class="pre">-x/--and</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># selects all windows mochitest tasks</span>
$ mach try fuzzy --and -q <span class="s2">&quot;mochitest&quot;</span> -q <span class="s2">&quot;windows&quot;</span>
</pre></div>
</div>
<div class="section" id="modifying-presets">
<h3>Modifying Presets<a class="headerlink" href="#modifying-presets" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../presets.html"><span class="doc">Presets</span></a> make it easy to run a pre-determined set of tasks. But sometimes you
might not want to run that set exactly as is, you may only want to use the preset as a starting
point then add or remove tasks as needed. This can be accomplished with <code class="docutils literal notranslate"><span class="pre">-q/--query</span></code> or
<code class="docutils literal notranslate"><span class="pre">-i/--interactive</span></code>.</p>
<p>Here are some examples of adding tasks to a preset:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># selects all perf tasks plus all mochitest-chrome tasks</span>
$ mach try fuzzy --preset perf -q <span class="s2">&quot;mochitest-chrome&quot;</span>

<span class="c1"># adds tasks to the perf preset interactively</span>
$ mach try fuzzy --preset perf -i
</pre></div>
</div>
<p>Similarly, <code class="docutils literal notranslate"><span class="pre">-x/--and</span></code> can be used to filter down a preset by taking the intersection of the two
sets:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># limits perf tasks to windows only</span>
$ mach try fuzzy --preset perf -xq <span class="s2">&quot;windows&quot;</span>

<span class="c1"># limits perf tasks interactively</span>
$ mach try fuzzy --preset perf -xi
</pre></div>
</div>
</div>
<div class="section" id="shell-conflicts">
<h3>Shell Conflicts<a class="headerlink" href="#shell-conflicts" title="Permalink to this headline">¶</a></h3>
<p>Unfortunately <code class="docutils literal notranslate"><span class="pre">fzf</span></code>’s query language uses some characters (namely <code class="docutils literal notranslate"><span class="pre">'</span></code>, <code class="docutils literal notranslate"><span class="pre">!</span></code> and <code class="docutils literal notranslate"><span class="pre">$</span></code>) that can
interfere with your shell when using <code class="docutils literal notranslate"><span class="pre">-q/--query</span></code>. Below are some tips for how to type out a query
on the command line.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">!</span></code> character is typically used for history expansion. If you don’t use this feature, the
easiest way to specify queries on the command line is to disable it:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># bash</span>
$ <span class="nb">set</span> +H
$ ./mach try fuzzy -q <span class="s2">&quot;&#39;foo !bar&quot;</span>

<span class="c1"># zsh</span>
$ setopt no_banghist
$ ./mach try fuzzy -q <span class="s2">&quot;&#39;foo !bar&quot;</span>
</pre></div>
</div>
<p>If using <code class="docutils literal notranslate"><span class="pre">bash</span></code>, add <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">+H</span></code> to your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>, <code class="docutils literal notranslate"><span class="pre">~/.bash_profile</span></code> or equivalent. If using
<code class="docutils literal notranslate"><span class="pre">zsh</span></code>, add <code class="docutils literal notranslate"><span class="pre">setopt</span> <span class="pre">no_banghist</span></code> to your <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code> or equivalent.</p>
<p>If you don’t want to disable history expansion, you can escape your queries like this:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># bash</span>
$ ./mach try fuzzy -q <span class="s1">$&#39;\&#39;foo !bar&#39;</span>

<span class="c1"># zsh</span>
$ ./mach try fuzzy -q <span class="s2">&quot;&#39;foo \!bar&quot;</span>
</pre></div>
</div>
<p>The third option is to use <code class="docutils literal notranslate"><span class="pre">-e/--exact</span></code> which reverses the behaviour of the <code class="docutils literal notranslate"><span class="pre">'</span></code> character (see
<a class="reference internal" href="#additional-arguments"><span class="std std-ref">Additional Arguments</span></a> for more details). Using this flag means you won’t need to escape the
<code class="docutils literal notranslate"><span class="pre">'</span></code> character as often and allows you to run your queries like this:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># bash and zsh</span>
$ ./mach try fuzzy -eq <span class="s1">&#39;foo !bar&#39;</span>
</pre></div>
</div>
<p>This method is only useful if you find you almost always prefix terms with <code class="docutils literal notranslate"><span class="pre">'</span></code> (and rarely use
fuzzy terms). Otherwise as soon as you want to use a fuzzy match you’ll run into the same problem as
before.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the examples in these three approaches will select the same set of tasks.</p>
</div>
<p>If you use <code class="docutils literal notranslate"><span class="pre">fish</span></code> shell, you won’t need to escape <code class="docutils literal notranslate"><span class="pre">!</span></code>, however you will need to escape <code class="docutils literal notranslate"><span class="pre">$</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># fish</span>
$ ./mach try fuzzy -q <span class="s2">&quot;&#39;foo !bar baz\$&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="test-paths">
<h2>Test Paths<a class="headerlink" href="#test-paths" title="Permalink to this headline">¶</a></h2>
<p>One or more paths to a file or directory may be specified as positional arguments. When
specifying paths, the list of available tasks to choose from is filtered down such that
only suites that have tests in a specified path can be selected. Notably, only the first
chunk of each suite/platform appears. When the tasks are scheduled, only tests that live
under one of the specified paths will be run.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using paths, be aware that all tests under the specified paths will run in the
same chunk. This might produce a different ordering from what gets run on production
branches, and may yield different results.</p>
<p>For suites that restart the browser between each manifest (like mochitest), this
shouldn’t be as big of a concern.</p>
</div>
<p>Paths can be used with the interactive <code class="docutils literal notranslate"><span class="pre">fzf</span></code> window, or using the <code class="docutils literal notranslate"><span class="pre">-q/--query</span></code> argument.
For example, running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ mach try fuzzy layout/reftests/reftest-sanity -q <span class="s2">&quot;!pgo !cov !asan &#39;linux64&quot;</span>
</pre></div>
</div>
<p>Would produce the following <code class="docutils literal notranslate"><span class="pre">try_task_config.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;env&quot;</span><span class="p">:{</span>
    <span class="nt">&quot;MOZHARNESS_TEST_PATHS&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;reftest\&quot;:\&quot;layout/reftests/reftest-sanity\&quot;}&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;tasks&quot;</span><span class="p">:[</span>
    <span class="s2">&quot;test-linux64-qr/debug-reftest-e10s-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test-linux64-qr/opt-reftest-e10s-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test-linux64/debug-reftest-e10s-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test-linux64/debug-reftest-no-accel-e10s-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test-linux64/opt-reftest-e10s-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test-linux64/opt-reftest-no-accel-e10s-1&quot;</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Inside of these tasks, the reftest harness will only run tests that live under
<code class="docutils literal notranslate"><span class="pre">layout/reftests/reftest-sanity</span></code>.</p>
</div>
<div class="section" id="additional-arguments">
<span id="id1"></span><h2>Additional Arguments<a class="headerlink" href="#additional-arguments" title="Permalink to this headline">¶</a></h2>
<p>There are a few additional command line arguments you may wish to use:</p>
<p><code class="docutils literal notranslate"><span class="pre">-e/--exact</span></code>
By default, <code class="docutils literal notranslate"><span class="pre">fzf</span></code> treats terms as a fuzzy match and prefixing a term with <code class="docutils literal notranslate"><span class="pre">'</span></code> turns it into an exact
match. If passing in <code class="docutils literal notranslate"><span class="pre">--exact</span></code>, this behaviour is reversed. Non-prefixed terms become exact, and a
<code class="docutils literal notranslate"><span class="pre">'</span></code> prefix makes a term fuzzy.</p>
<p><code class="docutils literal notranslate"><span class="pre">--full</span></code>
By default, only target tasks (e.g tasks that would normally run on mozilla-central)
are generated. Passing in <code class="docutils literal notranslate"><span class="pre">--full</span></code> allows you to select from all tasks. This is useful for
things like nightly or release tasks.</p>
<p><code class="docutils literal notranslate"><span class="pre">-u/--update</span></code>
Update the bootstrapped <code class="docutils literal notranslate"><span class="pre">fzf</span></code> binary to the latest version.</p>
<p>For a full list of command line arguments, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ mach try fuzzy --help
</pre></div>
</div>
<p>For more information on using <code class="docutils literal notranslate"><span class="pre">fzf</span></code>, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ man fzf
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="chooser.html" class="btn btn-neutral float-right" title="Chooser Selector" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="auto.html" class="btn btn-neutral float-left" title="Auto Selector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>