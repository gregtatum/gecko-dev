

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PerfDocs &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="pylint" href="pylint.html" />
    <link rel="prev" title="MinGW capitalization" href="mingw-capitalization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/android/geckoview/index.html">Welcome to GeckoViewâ€™s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Code quality</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../static-analysis.html">Static analysis</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Linting</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../usage.html">Running Linters Locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage.html#fixing-lint-errors">Fixing Lint Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../create.html">Adding a New Linter to the Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="black.html">Black</a></li>
<li class="toctree-l3"><a class="reference internal" href="clang-format.html">clang-format</a></li>
<li class="toctree-l3"><a class="reference internal" href="clippy.html">clippy</a></li>
<li class="toctree-l3"><a class="reference internal" href="codespell.html">Codespell</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpp-virtual-final.html">cpp virtual final</a></li>
<li class="toctree-l3"><a class="reference internal" href="eslint.html">ESLint</a></li>
<li class="toctree-l3"><a class="reference internal" href="eslint-plugin-mozilla.html">Mozilla ESLint Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="eslint-plugin-spidermonkey-js.html">Mozilla ESLint SpiderMonkey JS</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-perm.html">File permission</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-whitespace.html">Trailing whitespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="flake8.html">Flake8</a></li>
<li class="toctree-l3"><a class="reference internal" href="l10n.html">L10n</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="lintpref.html">Lintpref</a></li>
<li class="toctree-l3"><a class="reference internal" href="mingw-capitalization.html">MinGW capitalization</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">PerfDocs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#run-locally">Run Locally</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sources">Sources</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pylint.html">pylint</a></li>
<li class="toctree-l3"><a class="reference internal" href="rejected-words.html">Rejected words</a></li>
<li class="toctree-l3"><a class="reference internal" href="rstlinter.html">RST Linter</a></li>
<li class="toctree-l3"><a class="reference internal" href="rustfmt.html">Rustfmt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../coding-style/index.html">Coding style</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Code quality</a> &raquo;</li>
        
          <li><a href="../index.html">Linting</a> &raquo;</li>
        
      <li>PerfDocs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/code-quality/lint/linters/perfdocs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="perfdocs">
<h1>PerfDocs<a class="headerlink" href="#perfdocs" title="Permalink to this headline">Â¶</a></h1>
<p><a class="reference internal" href="#perfdocs">PerfDocs</a> is a tool that checks to make sure all performance tests are documented in tree.</p>
<p>At the moment, it is only used for this documentation verification, but in the future it will also auto-generate documentation from these descriptions that will be displayed in the source-docs documentation page (rather than the wiki, which is where they currently reside).</p>
<div class="section" id="run-locally">
<h2>Run Locally<a class="headerlink" href="#run-locally" title="Permalink to this headline">Â¶</a></h2>
<p>The mozlint integration of PerfDocs can be run using mach:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mach lint --linter perfdocs
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">Â¶</a></h2>
<p>There are no configuration options available for this linter. It scans the full source tree under <code class="docutils literal notranslate"><span class="pre">testing</span></code>, looking for folders named <code class="docutils literal notranslate"><span class="pre">perfdocs</span></code> and then validates their content. This has only been implemented for Raptor so far, but Talos will be added in the future. We also hope to expand this to search outside the <code class="docutils literal notranslate"><span class="pre">testing</span></code> directory.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">perfdocs</span></code> folders, there needs to be an <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> file and it needs to contain the string <code class="docutils literal notranslate"><span class="pre">{documentation}</span></code> in some location in the file which is where the test documentation will be placed. The folders must also have a <code class="docutils literal notranslate"><span class="pre">config.yml</span></code> file following this schema:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CONFIG_SCHEMA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
        <span class="s2">&quot;manifest&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
        <span class="s2">&quot;suites&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;suite_name&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;tests&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;test_name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
                            <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;description&quot;</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;manifest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;suites&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here is an example of a configuration file for the Raptor framework:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">:</span> <span class="n">raptor</span>
<span class="n">manifest</span><span class="p">:</span> <span class="n">testing</span><span class="o">/</span><span class="n">raptor</span><span class="o">/</span><span class="n">raptor</span><span class="o">/</span><span class="n">raptor</span><span class="o">.</span><span class="n">ini</span>
<span class="n">suites</span><span class="p">:</span>
    <span class="n">desktop</span><span class="p">:</span>
        <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Desktop tests.&quot;</span>
        <span class="n">tests</span><span class="p">:</span>
            <span class="n">raptor</span><span class="o">-</span><span class="n">tp6</span><span class="p">:</span> <span class="s2">&quot;Raptor TP6 tests.&quot;</span>
    <span class="n">mobile</span><span class="p">:</span>
        <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Mobile tests&quot;</span>
    <span class="n">benchmarks</span><span class="p">:</span>
        <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Benchmark tests.&quot;</span>
        <span class="n">tests</span><span class="p">:</span>
            <span class="n">wasm</span><span class="p">:</span> <span class="s2">&quot;All wasm tests.&quot;</span>
</pre></div>
</div>
<p>Note that there needs to be a FrameworkGatherer implemented for the framework being documented since each of them may have different ways of parsing test manifests for the tests. See <a class="reference external" href="https://searchfox.org/mozilla-central/source/tools/lint/perfdocs/framework_gatherers.py">RaptorGatherer</a> for an example gatherer that was implemented for Raptor.</p>
</div>
<div class="section" id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://searchfox.org/mozilla-central/source/tools/lint/perfdocs.yml">Configuration</a></p></li>
<li><p><a class="reference external" href="https://searchfox.org/mozilla-central/source/tools/lint/perfdocs">Source</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pylint.html" class="btn btn-neutral float-right" title="pylint" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mingw-capitalization.html" class="btn btn-neutral float-left" title="MinGW capitalization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>