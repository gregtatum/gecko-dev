

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>General Test Guidelines &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.4/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Making a Testing Plan" href="making-a-testing-plan.html" />
    <link rel="prev" title="Writing Tests" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">web-platform-tests documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#video-introduction-transcript">Video Introduction (transcript)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#github">GitHub</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#table-of-contents">Table of Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../test-suite-design.html">Test Suite Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-video-transcript.html">“Introduction to WPT” video transcript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../running-tests/index.html">Running Tests</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Writing Tests</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#test-types">Test Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#submitting-tests">Submitting Tests</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reviewing-tests/index.html">Reviewing Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/index.html">Project Administration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">web-platform-tests documentation</a> &raquo;</li>
        
          <li><a href="index.html">Writing Tests</a> &raquo;</li>
        
      <li>General Test Guidelines</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/web-platform/writing-tests/general-guidelines.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="general-test-guidelines">
<h1>General Test Guidelines<a class="headerlink" href="#general-test-guidelines" title="Permalink to this headline">¶</a></h1>
<div class="section" id="file-paths-and-names">
<h2>File Paths and Names<a class="headerlink" href="#file-paths-and-names" title="Permalink to this headline">¶</a></h2>
<p>When choosing where in the directory structure to put any new tests,
try to follow the structure of existing tests for that specification;
if there are no existing tests, it is generally recommended to create
subdirectories for each section.</p>
<p>Due to path length limitations on Windows, test paths must be less
that 150 characters relative to the test root directory (this gives
vendors just over 100 characters for their own paths when running in
automation).</p>
<p>File names should generally be somewhat descriptive of what is being
tested; very generic names like <code class="docutils literal notranslate"><span class="pre">001.html</span></code> are discouraged. A common
format is <code class="docutils literal notranslate"><span class="pre">test-topic-001.html</span></code>, where <code class="docutils literal notranslate"><span class="pre">test-topic</span></code> is a short
identifier that describes the test. It should avoid conjunctions,
articles, and prepositions as it should be as concise as possible. The
integer that follows is normally just increased incrementally, and
padded to three digits. (If you’d end up with more than 999 tests,
your <code class="docutils literal notranslate"><span class="pre">test-topic</span></code> is probably too broad!)</p>
<p>The test filename is significant in enabling specific optional features, such as HTTPS
or server-side substitution. See the documentation on <a class="reference internal" href="file-names.html"><span class="doc">file names flags</span></a>
for more details.</p>
<p>In the css directory, the file names should be unique within the whole
css/ directory, regardless of where they are in the directory structure.</p>
</div>
<div class="section" id="https">
<h2>HTTPS<a class="headerlink" href="#https" title="Permalink to this headline">¶</a></h2>
<p>By default, tests are served over plain HTTP. If a test requires HTTPS
it must be given a filename containing <code class="docutils literal notranslate"><span class="pre">.https.</span></code> e.g.,
<code class="docutils literal notranslate"><span class="pre">test-secure.https.html</span></code>, or be the generated service worker test of a
<code class="docutils literal notranslate"><span class="pre">.https</span></code>-less <code class="docutils literal notranslate"><span class="pre">.any</span></code> test. For more details see the documentation on
<a class="reference internal" href="file-names.html"><span class="doc">file names</span></a>.</p>
</div>
<div class="section" id="http2">
<h2>HTTP2<a class="headerlink" href="#http2" title="Permalink to this headline">¶</a></h2>
<p>If a test must be served from an HTTP/2 server, it must be given a
filename containing <code class="docutils literal notranslate"><span class="pre">.h2</span></code>.</p>
<div class="section" id="support-files">
<h3>Support Files<a class="headerlink" href="#support-files" title="Permalink to this headline">¶</a></h3>
<p>Various support files are available in in the directories named <code class="docutils literal notranslate"><span class="pre">/common/</span></code>,
<code class="docutils literal notranslate"><span class="pre">/media/</span></code>, and <code class="docutils literal notranslate"><span class="pre">/css/support/</span></code>. Reusing existing resources is encouraged where
possible, as is adding generally-useful files to these common areas rather than
to specific test suites.</p>
</div>
<div class="section" id="tools">
<h3>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may want to add a script to the repository that’s meant
to be used from the command line, not from a browser (e.g., a script
for generating test files). If you want to ensure (e.g., for security
reasons) that such scripts will only be usable from the command line
but won’t be handled by the HTTP server then place them in a <code class="docutils literal notranslate"><span class="pre">tools</span></code>
subdirectory at the appropriate level—the server will then return a
404 if they are requested.</p>
<p>For example, if you wanted to add a script for use with tests in the
<code class="docutils literal notranslate"><span class="pre">notifications</span></code> directory, create the <code class="docutils literal notranslate"><span class="pre">notifications/tools</span></code>
subdirectory and put your script there.</p>
</div>
</div>
<div class="section" id="file-formats">
<h2>File Formats<a class="headerlink" href="#file-formats" title="Permalink to this headline">¶</a></h2>
<p>Tests are generally formatted as HTML (including XHTML) or XML (including SVG).
Some test types support other formats:</p>
<ul class="simple">
<li><p><a class="reference internal" href="testharness.html"><span class="doc">testharness.js tests</span></a> may be expressed as JavaScript files
(<a class="reference internal" href="server-features.html"><span class="doc">the WPT server automatically generates the HTML documents for these</span></a>)</p></li>
<li><p><a class="reference internal" href="wdspec.html"><span class="doc">WebDriver specification tests</span></a> are expressed as Python files</p></li>
</ul>
<p>The best way to determine how to format a new test is to look at how similar
tests have been formatted. You can also ask for advice in <a class="reference external" href="irc://irc.w3.org:6667/testing">the project’s IRC
room</a>.</p>
</div>
<div class="section" id="character-encoding">
<h2>Character Encoding<a class="headerlink" href="#character-encoding" title="Permalink to this headline">¶</a></h2>
<p>Except when specifically testing encoding, files must be encoded in
UTF-8. In file formats where UTF-8 is not the default encoding, they
must contain metadata to mark them as such (e.g., <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">charset=utf-8&gt;</span></code> in HTML files) or be pure ASCII.</p>
</div>
<div class="section" id="server-side-support">
<h2>Server Side Support<a class="headerlink" href="#server-side-support" title="Permalink to this headline">¶</a></h2>
<p>The custom web server
supports <a class="reference internal" href="server-features.html"><span class="doc">a variety of features</span></a> useful for testing
browsers, including (but not limited to!) support for writing out
appropriate domains and custom (per-file and per-directory) HTTP
headers.</p>
</div>
<div class="section" id="be-short">
<h2>Be Short<a class="headerlink" href="#be-short" title="Permalink to this headline">¶</a></h2>
<p>Tests should be as short as possible. For reftests in particular
scrollbars at 800×600px window size must be avoided unless scrolling
behavior is specifically being tested. For all tests extraneous
elements on the page should be avoided so it is clear what is part of
the test (for a typical testharness test, the only content on the page
will be rendered by the harness itself).</p>
</div>
<div class="section" id="be-minimal">
<h2>Be Minimal<a class="headerlink" href="#be-minimal" title="Permalink to this headline">¶</a></h2>
<p>Tests should generally avoid depending on edge case behavior of
features that they don’t explicitly intend on testing. For example,
except where testing parsing, tests should contain
no <a class="reference external" href="https://validator.nu">parse errors</a>.</p>
<p>This is not, however, to discourage testing of edge cases or
interactions between multiple features; such tests are an essential
part of ensuring interoperability of the web platform.</p>
</div>
<div class="section" id="be-cross-platform">
<h2>Be Cross-Platform<a class="headerlink" href="#be-cross-platform" title="Permalink to this headline">¶</a></h2>
<p>Tests should be as cross-platform as reasonably possible, working
across different devices, screen resolutions, paper sizes, etc. The
assumptions that can be relied on are documented <a class="reference internal" href="assumptions.html"><span class="doc">here</span></a>;
tests that rely on anything else should be manual tests that document
their assumptions.</p>
<p>Fonts cannot be relied on to be either installed or to have specific
metrics. As such, in most cases when a known font is needed, <a class="reference internal" href="ahem.html"><span class="doc">Ahem</span></a>
should be used and loaded as a web font. In other cases, <code class="docutils literal notranslate"><span class="pre">&#64;font-face</span></code>
should be used.</p>
</div>
<div class="section" id="be-self-contained">
<h2>Be Self-Contained<a class="headerlink" href="#be-self-contained" title="Permalink to this headline">¶</a></h2>
<p>Tests must not depend on external network resources, including
w3c-test.org. When these tests are run on CI systems they are
typically configured with access to external resources disabled, so
tests that try to access them will fail. Where tests want to use
multiple hosts this is possible through a known set of subdomains and
the <a class="reference internal" href="server-features.html"><span class="doc">text substitution features of wptserve</span></a>.</p>
</div>
<div class="section" id="be-self-describing">
<h2>Be Self-Describing<a class="headerlink" href="#be-self-describing" title="Permalink to this headline">¶</a></h2>
<p>Tests should make it obvious when they pass and when they fail. It
shouldn’t be necessary to consult the specification to figure out
whether a test has passed of failed.</p>
</div>
<div class="section" id="style-rules">
<h2>Style Rules<a class="headerlink" href="#style-rules" title="Permalink to this headline">¶</a></h2>
<p>A number of style rules should be applied to the test file. These are
not uniformly enforced throughout the existing tests, but will be for
new tests. Any of these rules may be broken if the test demands it:</p>
<ul class="simple">
<li><p>No trailing whitespace</p></li>
<li><p>Use spaces rather than tabs for indentation</p></li>
<li><p>Use UNIX-style line endings (i.e. no CR characters at EOL)</p></li>
</ul>
<p>We have a lint tool for catching these and other common mistakes. You
can run it manually by starting the <code class="docutils literal notranslate"><span class="pre">wpt</span></code> executable from the root of
your local web-platform-tests working directory, and invoking the
<code class="docutils literal notranslate"><span class="pre">lint</span></code> subcommand, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">wpt</span> <span class="n">lint</span>
</pre></div>
</div>
<p>The lint tool is also run automatically for every submitted pull request,
and reviewers will not merge branches with tests that have lint errors, so
you must fix any errors the lint tool reports. For details on doing that,
see the <a class="reference internal" href="lint-tool.html"><span class="doc">lint-tool documentation</span></a>.</p>
<p>But in the unusual case of error reports for things essential to a certain
test or that for other exceptional reasons shouldn’t prevent a merge of a
test, update and commit the <code class="docutils literal notranslate"><span class="pre">lint.ignore</span></code> file in the web-platform-tests
root directory to suppress the error reports. For details on doing that,
see the <a class="reference internal" href="lint-tool.html"><span class="doc">lint-tool documentation</span></a>.</p>
</div>
<div class="section" id="css-specific-requirements">
<h2>CSS-Specific Requirements<a class="headerlink" href="#css-specific-requirements" title="Permalink to this headline">¶</a></h2>
<p>In order to be included in an official specification test suite, tests
for CSS have some additional requirements for:</p>
<ul class="simple">
<li><p><a class="reference internal" href="css-metadata.html"><span class="doc">Metadata</span></a>, and</p></li>
<li><p><a class="reference internal" href="css-user-styles.html"><span class="doc">User style sheets</span></a>.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="making-a-testing-plan.html" class="btn btn-neutral float-right" title="Making a Testing Plan" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Writing Tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>