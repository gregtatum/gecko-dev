

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Preferences &mdash; Firefox Source Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/custom_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../../_static/firefox.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script src="../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Remote CFR Messages" href="remote_cfr.html" />
    <link rel="prev" title="Mochitests" href="mochitests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home" alt="Documentation Home"> Firefox Source Docs
          

          
            
            <img src="../../../../../_static/firefox-wordmark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../setup/index.html">Getting Set Up To Work On The Firefox Codebase</a></li>
</ul>
<p class="caption"><span class="caption-text">Working On Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contributing/index.html">Working on Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bug-mgmt/index.html">Bug Handling</a></li>
</ul>
<p class="caption"><span class="caption-text">Source Code Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Firefox</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../urlbar/index.html">Address Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../BrowserUsageTelemetry.html">Browser Usage Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../enterprisepolicies/docs/index.html">Enterprise Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extensions/formautofill/docs/index.html">Form Autofill</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Firefox Home (New Tab)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#for-jsm-files">For .jsm files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#for-js-jsx-sass-or-css-files">For .js, .jsx, .sass, or .css files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#building-assets-and-running-firefox">Building assets and running Firefox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#continuous-development-debugging">Continuous development / debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#code-coverage">Code Coverage</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#detailed-docs">Detailed Docs</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="about_home_startup_cache.html">The <code class="docutils literal notranslate"><span class="pre">about:home</span></code> startup cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_dictionary.html">Activity Stream Pings</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_events.html">Metrics we collect</a></li>
<li class="toctree-l4"><a class="reference internal" href="geo_locale.html">Custom <code class="docutils literal notranslate"><span class="pre">geo</span></code>, <code class="docutils literal notranslate"><span class="pre">locale</span></code>, and update channels</a></li>
<li class="toctree-l4"><a class="reference internal" href="mochitests.html">Mochitests</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Preferences</a></li>
<li class="toctree-l4"><a class="reference internal" href="remote_cfr.html">Remote CFR Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="sections.html">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="telemetry.html">Telemetry checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="tippytop.html">TippyTop in Activity Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="unit_testing_guide.html">Unit testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installer/windows/installer/index.html">Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../toolkit/mozapps/defaultagent/default-browser-agent/index.html">Default Browser Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../content-src/asrouter/docs/index.html">Messaging System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../base/tabbrowser/index.html">tabbrowser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../touchbar/index.html">Touch Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../uitour/docs/index.html">UITour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../payments/docs/index.html">WebPayments UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dom/index.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../layout/index.html">Layout &amp; CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../devtools/index.html">Firefox DevTools Contributor Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../toolkit/index.html">Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../js/index.html">SpiderMonkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mobile/android/geckoview/index.html">Welcome to GeckoView’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../modules/libpref/index.html">libpref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../remote/index.html">Remote Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../services/common/services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../uriloader/index.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../widget/cocoa/index.html">Firefox on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../code-quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../writing-rust-code/index.html">Writing Rust Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/profiler/index.html">Gecko Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">The Firefox Build System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mach/index.html">Mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/try/index.html">Try Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/moztreedocs/index.html">Managing Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Testing &amp; Test Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/testing-policy/index.html">Testing Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../web-platform/index.html">web-platform-tests documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/fuzzing/index.html">Fuzzing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/sanitizer/index.html">Sanitizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing/perfdocs/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/code-coverage/index.html">Code coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../testing-rust-code/index.html">Testing &amp; Debugging Rust Code</a></li>
</ul>
<p class="caption"><span class="caption-text">Localization &amp; Internationalization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intl/index.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../l10n/index.html">Localization</a></li>
</ul>
<p class="caption"><span class="caption-text">Firefox and Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../python/index.html">Using third-party Python packages</a></li>
</ul>
<p class="caption"><span class="caption-text">Metrics Collected in Firefox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../metrics/index.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../metrics/index.html#pings">Pings</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Firefox Source Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Firefox</a> &raquo;</li>
        
          <li><a href="../index.html">Firefox Home (New Tab)</a> &raquo;</li>
        
      <li>Preferences</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/browser/components/newtab/docs/v2-system-addon/preferences.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="preferences">
<h1>Preferences<a class="headerlink" href="#preferences" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preference-branch">
<h2>Preference branch<a class="headerlink" href="#preference-branch" title="Permalink to this headline">¶</a></h2>
<p>The preference branch for activity stream is <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.</span></code>.
Any preferences defined in the preference configuration will be relative to that
branch. For example, if a preference is defined with the name <code class="docutils literal notranslate"><span class="pre">foo</span></code>, the full
preference as it is displayed in <code class="docutils literal notranslate"><span class="pre">about:config</span></code> will be <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.foo</span></code>.</p>
</div>
<div class="section" id="defining-new-preferences">
<h2>Defining new preferences<a class="headerlink" href="#defining-new-preferences" title="Permalink to this headline">¶</a></h2>
<p>All preferences for Activity Stream should be defined in the <code class="docutils literal notranslate"><span class="pre">PREFS_CONFIG</span></code> Array
found in <code class="docutils literal notranslate"><span class="pre">lib/ActivityStream.jsm</span></code>.
The configuration object should have a <code class="docutils literal notranslate"><span class="pre">name</span></code> (the name of the pref), a <code class="docutils literal notranslate"><span class="pre">title</span></code>
that describes the functionality of the pref, and a <code class="docutils literal notranslate"><span class="pre">value</span></code>, the default value
of the pref. Optionally a <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function can be provided to dynamically
generate a default pref value based on args, e.g., geo and locale. For
developers-specific defaults, an optional <code class="docutils literal notranslate"><span class="pre">value_local_dev</span></code> will be used instead
of <code class="docutils literal notranslate"><span class="pre">value</span></code>. For example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;telemetry.log&quot;</span><span class="p">,</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Log telemetry events in the console&quot;</span><span class="p">,</span>
  <span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">value_local_dev</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">getValue</span><span class="o">:</span> <span class="p">({</span><span class="nx">geo</span><span class="p">})</span> <span class="p">=&gt;</span> <span class="nx">geo</span> <span class="o">===</span> <span class="s2">&quot;CA&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="important-setting-test-specific-values-for-mozilla-central">
<h3>IMPORTANT: Setting test-specific values for Mozilla Central<a class="headerlink" href="#important-setting-test-specific-values-for-mozilla-central" title="Permalink to this headline">¶</a></h3>
<p>If a feed or feature behind a pref makes any network calls or would other be
disruptive for automated tests and that pref is on by default, make sure you
disable it for tests in Mozilla Central.</p>
<p>You should create a bug in Bugzilla and a patch that adds lines to turn off your
pref in the following files:</p>
<ul class="simple">
<li><p>layout/tools/reftest/reftest-preferences.js</p></li>
<li><p>testing/profiles/prefs_general.js</p></li>
<li><p>testing/talos/talos/config.py</p></li>
</ul>
<p>You can see an example in <a class="reference external" href="https://github.com/mozilla/activity-stream/pull/2977">this patch</a>.</p>
</div>
</div>
<div class="section" id="reading-setting-and-observing-preferences-from-jsms">
<h2>Reading, setting, and observing preferences from <code class="docutils literal notranslate"><span class="pre">.jsm</span></code>s<a class="headerlink" href="#reading-setting-and-observing-preferences-from-jsms" title="Permalink to this headline">¶</a></h2>
<p>To read/set/observe Activity Stream preferences, construct a <code class="docutils literal notranslate"><span class="pre">Prefs</span></code> instance found in <code class="docutils literal notranslate"><span class="pre">lib/ActivityStreamPrefs.jsm</span></code>.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// Import Prefs</span>
<span class="nx">XPCOMUtils</span><span class="p">.</span><span class="nx">defineLazyModuleGetter</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;Prefs&quot;</span><span class="p">,</span>
  <span class="s2">&quot;resource://activity-stream/lib/ActivityStreamPrefs.jsm&quot;</span><span class="p">);</span>

<span class="c1">// Create an instance</span>
<span class="kr">const</span> <span class="nx">prefs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Prefs</span><span class="p">();</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Prefs</span></code> utility will set the Activity Stream branch for you by default, so you
don’t need to worry about prefixing every pref with <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">prefs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Prefs</span><span class="p">();</span>

<span class="c1">// This will return the value of browser.newtabpage.activity-stream.foo</span>
<span class="nx">prefs</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">);</span>

<span class="c1">// This will set the value of browser.newtabpage.activity-stream.foo to true</span>
<span class="nx">prefs</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

<span class="c1">// This will call aCallback when browser.newtabpage.activity-stream.foo is changed</span>
<span class="nx">prefs</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="nx">aCallback</span><span class="p">);</span>

<span class="c1">// This will stop listening to browser.newtabpage.activity-stream.foo</span>
<span class="nx">prefs</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="nx">aCallback</span><span class="p">);</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://searchfox.mozilla.org/mozilla-central/source/toolkit/modules/Preferences.jsm">toolkit/modules/Preferences.jsm</a>
for more information about what methods are available.</p>
</div>
<div class="section" id="discovery-stream-preferences">
<h2>Discovery Stream Preferences<a class="headerlink" href="#discovery-stream-preferences" title="Permalink to this headline">¶</a></h2>
<p>Preferences specific to the Discovery Stream are nested under the sub-branch <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream</span></code> (with the exception of <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.blocked</span></code>).</p>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-flight-blocks">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.flight.blocks</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-flight-blocks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(JSON)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>Not intended for user configuration, but is programmatically updated. Used for tracking blocked flight IDs when a user dismisses a SPOC. Keys are flight IDs. Values don’t have a specific meaning.</p>
</div>
<div class="section" id="browser-newtabpage-blocked">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.blocked</span></code><a class="headerlink" href="#browser-newtabpage-blocked" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(JSON)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>Not intended for user configuration, but is programmatically updated. Used for tracking blocked story IDs when a user dismisses one. Keys are story IDs. Values don’t have a specific meaning.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-config">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.config</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-config" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Type <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(JSON)</span></code></p></li>
<li><p>Default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;api_key_pref&quot;</span><span class="p">:</span> <span class="s2">&quot;extensions.pocket.oAuthConsumerKey&quot;</span><span class="p">,</span>
   <span class="s2">&quot;collapsible&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;show_spocs&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;hardcoded_layout&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;personalized&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;layout_endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;https://getpocket.cdn.mozilla.net/v3/newtab/layout?version=1&amp;consumer_key=$apiKey&amp;layout_variant=basic&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">api_key_pref</span></code> (string): The name of a variable containing the key for the Pocket API.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collapsible</span></code> (boolean): Controls whether the sections in new tab can be collapsed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code> (boolean): Controls whether DS is turned on and is programmatically set based on a user’s locale. DS enablement is a logical <code class="docutils literal notranslate"><span class="pre">AND</span></code> of this and the value of <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.enabled</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_spocs</span></code> (boolean): Show sponsored content in new tab.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hardcoded_layout</span></code> (boolean): When this is true, a hardcoded layout shipped with Firefox will be used instead of a remotely fetched layout definition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">personalized</span></code> (boolean): When this is <code class="docutils literal notranslate"><span class="pre">true</span></code> personalized content based on browsing history will be displayed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layout_endpoint</span></code> (string): The URL for a remote layout definition that will be used if <code class="docutils literal notranslate"><span class="pre">hardcoded_layout</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unused_key</span></code> (string): This is not set by default and is unused by this codebase. It’s a standardized way to differentiate configurations to prevent experiment participants from being unenrolled.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.enabled</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-enabled" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>When this is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> the Discovery Stream experience will show up if <code class="docutils literal notranslate"><span class="pre">enabled</span></code> is also <code class="docutils literal notranslate"><span class="pre">true</span></code> on <code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.config</span></code>. Otherwise the old Activity Stream experience will be shown.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-endpointspocsclear">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.endpointSpocsClear</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-endpointspocsclear" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(URL)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">https://spocs.getpocket.com/user</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>Endpoint for when a user opts-out of sponsored content to delete the corresponding data from the ad server.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-endpoints">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.endpoints</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-endpoints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(URLs,</span> <span class="pre">CSV)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">https://getpocket.cdn.mozilla.net/,https://spocs.getpocket.com/</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>A list of endpoints that are allowed to be used by Discovery Stream for remote content (eg: story metadata) and configuration (eg: remote layout definitions for experimentation).</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-engagementlabelenabled">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.engagementLabelEnabled</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-engagementlabelenabled" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>A flag controlling the visibility of engagement labels on cards (eg: “Trending” or “Popular”).</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-hardcoded-basic-layout">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.hardcoded-basic-layout</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-hardcoded-basic-layout" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>If this is <code class="docutils literal notranslate"><span class="pre">false</span></code> the default hardcoded layout is used, and if it’s <code class="docutils literal notranslate"><span class="pre">true</span></code> then an alternate hardcoded layout (that currently simulates the older AS experience) is used.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-rec-impressions">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.rec.impressions</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-rec-impressions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(JSON)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>Programmatically generated hash table where the keys are recommendation IDs and the values are timestamps representing the first impression.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-spoc-impressions">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.spoc.impressions</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-spoc-impressions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(JSON)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code></p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>Programmatically generated hash table where the keys are sponsored content IDs and the values are arrays of timestamps for every impression.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-locale-list-config">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.locale-list-config</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-locale-list-config" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(CSV,</span> <span class="pre">locales)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>A comma separated list of locales that by default have stories enabled in newtab. It overrides what might be in region-stories-config. So if I set this to “en-US,en-CA,en-GB”, all users with a English browser would see newtab stories, even if their region was not in region-stories-config list.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-region-stories-config">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.region-stories-config</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-region-stories-config" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(CSV,</span> <span class="pre">regions)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">US,DE,CA,GB,IE,CH,AT,BE</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>A comma separated list of geos that by default have stories enabled in newtab. It matches the client’s geo with that list, then looks for a matching locale.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-region-spocs-config">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.region-spocs-config</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-region-spocs-config" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(CSV,</span> <span class="pre">regions)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">US,CA,DE</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>A comma separated list of geos that by default have spocs enabled in newtab. It matches the client’s geo with that list.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-region-layout-config">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.region-layout-config</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-region-layout-config" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(CSV,</span> <span class="pre">regions)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">US,CA,GB,DE,IE,CH,AT,BE</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>A comma separated list of geos that have 7 rows of stories enabled in newtab. It matches the client’s geo with that list.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-region-basic-layout">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.region-basic-layout</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-region-basic-layout" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: false</p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>If this is <code class="docutils literal notranslate"><span class="pre">true</span></code> newtabs with stories enabled see 1 row. It is set programmatically based on the result from region-layout-config.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-spocs-endpoint">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.spocs-endpoint</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-spocs-endpoint" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(URL)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>Override to specify endpoint for SPOCs. Will take precedence over remote and hardcoded layout SPOC endpoints.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-personalization-version">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.personalization.version</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-personalization-version" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>This controls what version of personalization we should use to score newtab stories.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-personalization-modelkeys">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.personalization.modelKeys</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-personalization-modelkeys" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">(CSV)</span></code></p></li>
<li><p>Default: <code class="docutils literal notranslate"><span class="pre">nb_model_arts_and_entertainment,</span> <span class="pre">nb_model_autos_and_vehicles,</span> <span class="pre">nb_model_beauty_and_fitness,</span> <span class="pre">nb_model_blogging_resources_and_services,</span> <span class="pre">nb_model_books_and_literature,</span> <span class="pre">nb_model_business_and_industrial,</span> <span class="pre">nb_model_computers_and_electronics,</span> <span class="pre">nb_model_finance,</span> <span class="pre">nb_model_food_and_drink,</span> <span class="pre">nb_model_games,</span> <span class="pre">nb_model_health,</span> <span class="pre">nb_model_hobbies_and_leisure,</span> <span class="pre">nb_model_home_and_garden,</span> <span class="pre">nb_model_internet_and_telecom,</span> <span class="pre">nb_model_jobs_and_education,</span> <span class="pre">nb_model_law_and_government,</span> <span class="pre">nb_model_online_communities,</span> <span class="pre">nb_model_people_and_society,</span> <span class="pre">nb_model_pets_and_animals,</span> <span class="pre">nb_model_real_estate,</span> <span class="pre">nb_model_reference,</span> <span class="pre">nb_model_science,</span> <span class="pre">nb_model_shopping,</span> <span class="pre">nb_model_sports,</span> <span class="pre">nb_model_travel</span></code></p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>This is a configuration for personalization version 2. It is a list of topics the algorithm uses to score stories by.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-recs-personalized">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.recs.personalized</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-recs-personalized" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: false</p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>This controls if newtab story personalization includes regular stories or not. See spocs.personalized for sponsored content.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-spocs-personalized">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.spocs.personalized</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-spocs-personalized" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: true</p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>This controls if newtab story personalization includes sponsored content or not. See recs.personalized for regular stories.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-discoverystream-iscollectiondismissible">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.discoverystream.isCollectionDismissible</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-discoverystream-iscollectiondismissible" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: true</p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>This controls if newtab story collections are dismissible or not.</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-feeds-section-topstories">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.feeds.section.topstories</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-feeds-section-topstories" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: true</p></li>
<li><p>Pref Type: Firefox</p></li>
</ul>
<p>This controls if the user should see newtab stories or not. It is set by the user via about:preferences#home</p>
</div>
<div class="section" id="browser-newtabpage-activity-stream-feeds-system-topstories">
<h3><code class="docutils literal notranslate"><span class="pre">browser.newtabpage.activity-stream.feeds.system.topstories</span></code><a class="headerlink" href="#browser-newtabpage-activity-stream-feeds-system-topstories" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p>Default: false</p></li>
<li><p>Pref Type: AS</p></li>
</ul>
<p>Not intended for user configuration, but is programmatically set. It also controls if the user should see newtab stories or not. It is set at run time, and computed based on the locale/region.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="remote_cfr.html" class="btn btn-neutral float-right" title="Remote CFR Messages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mochitests.html" class="btn btn-neutral float-left" title="Mochitests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>